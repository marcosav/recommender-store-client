{"version":3,"sources":["locales/es/translation.js","locales/en/translation.js","i18n.ts","types.ts","utils/AuthRequestInterceptor.ts","utils/SessionStorageManager.ts","utils/ServerErrorHandler.ts","utils/HttpStatusCodes.ts","utils/Constants.ts","utils/ValidationTools.ts","utils/DateUtils.ts","api/BaseAPI.ts","api/AuthAPI.ts","api/ProductAPI.ts","api/UserAPI.ts","api/CartAPI.ts","api/FavoriteAPI.ts","api/ResourceAPI.ts","api/ProductReportAPI.ts","api/OrdersAPI.ts","api/FeedbackAPI.ts","api/RecommenderAPI.ts","services/UserService.tsx","services/ProductService.tsx","services/FavoriteService.tsx","services/CartService.tsx","services/session/SessionService.tsx","services/session/SessionStorage.ts","services/session/AuthService.ts","services/session/index.ts","services/ResourceService.tsx","services/ProductReportService.tsx","services/OrdersService.tsx","services/FeedbackService.tsx","containers/Login/Login.style.ts","components/NavegationBar/NavigationBar.style.ts","components/NavegationBar/Logo.tsx","components/NavegationBar/NavigationBar.tsx","components/NavegationBar/index.ts","components/NavegationBar/NavigationBarWrapper.tsx","components/ProductHolder/Product.style.ts","components/ProductHolder/Product.tsx","components/ProductHolder/index.ts","components/UserHolder/UserHolder.style.ts","components/UserHolder/UserHolder.tsx","components/UserHolder/index.ts","components/PageContainer/PageContainer.style.ts","components/PageContainer/PageContainer.tsx","components/PageContainer/index.ts","components/ProductSlider/ProductSlider.style.ts","components/ProductSlider/ProductSlider.tsx","components/ProductSlider/index.ts","components/ProductImg/ProductImg.tsx","components/ProductImg/index.ts","components/ReportDialog/ReportDialog.tsx","components/ReportDialog/index.ts","components/utils/PasswordField/index.ts","components/utils/PasswordField/PasswordField.tsx","components/utils/ErrorHandler/ErrorHandler.tsx","components/utils/CircularProgressIndicator/index.ts","components/utils/CircularProgressIndicator/CircularProgressIndicator.tsx","components/utils/ErrorAlert/ErrorAlert.tsx","components/utils/ErrorAlert/index.ts","components/utils/ErrorAlert/ErrorWrapperClass.tsx","components/utils/ContentWarn/ContentWarn.tsx","components/utils/ContentWarn/index.ts","components/utils/Loading/index.ts","components/utils/Loading/Loading.tsx","containers/Login/index.ts","containers/Login/Login.tsx","containers/Signup/Signup.style.ts","containers/Signup/components/SignupForm/Signup.style.ts","containers/Signup/components/SignupForm/index.ts","containers/Signup/components/SignupForm/SignupForm.tsx","containers/Signup/components/SignupTitle/SignupTitle.style.ts","containers/Signup/components/SignupTitle/index.ts","containers/Signup/components/SignupTitle/SignupTitle.tsx","containers/Signup/components/EditTitle/EditTitle.style.ts","containers/Signup/components/EditTitle/index.ts","containers/Signup/components/EditTitle/EditTitle.tsx","containers/Signup/index.ts","containers/Signup/Signup.tsx","containers/Home/Home.style.ts","services/RecommenderService.tsx","containers/Home/index.ts","containers/Home/Home.tsx","containers/PageNotFound.tsx","containers/ProductPage/ProductPage.style.ts","containers/ProductPage/components/ProductInfo/ProductInfo.style.ts","containers/ProductPage/components/index.ts","containers/ProductPage/components/ProductInfo/ProductInfo.tsx","containers/ProductPage/index.ts","containers/ProductPage/ProductPage.tsx","containers/ProductEdit/ProductEdit.style.ts","containers/ProductEdit/components/ProductEditForm/ProductEditForm.style.ts","containers/ProductEdit/components/ProductEditForm/index.ts","containers/ProductEdit/components/ProductEditForm/ProductEditForm.tsx","containers/ProductEdit/index.ts","containers/ProductEdit/ProductEdit.tsx","containers/Logout.tsx","containers/Search/Search.style.ts","containers/Search/Search.tsx","containers/Favorites/Favorites.style.ts","containers/Favorites/index.ts","containers/Favorites/Favorites.tsx","containers/CartPage/CartPage.style.ts","containers/CartPage/components/CartProductHolder/CartProductHolder.style.ts","containers/CartPage/components/CartProductHolder/index.ts","containers/CartPage/components/CartProductHolder/CartProductHolder.tsx","containers/CartPage/components/InvalidCartDialog/index.ts","containers/CartPage/components/InvalidCartDialog/InvalidCartDialog.tsx","containers/CartPage/index.ts","containers/CartPage/CartPage.tsx","containers/VendorProfile/VendorProfile.style.tsx","containers/VendorProfile/components/VendorProfileInfo/VendorProfileInfo.style.ts","containers/VendorProfile/components/index.ts","containers/VendorProfile/components/VendorProfileInfo/VendorProfileInfo.tsx","containers/VendorProfile/index.ts","containers/VendorProfile/VendorProfile.tsx","containers/ReportsPage/ReportsPage.style.ts","containers/ReportsPage/components/index.ts","containers/ReportsPage/components/ReportHolder/ReportHolder.tsx","containers/ReportsPage/index.ts","containers/ReportsPage/ReportsPage.tsx","containers/CheckoutPage/CheckoutPage.style.ts","containers/CheckoutPage/index.ts","containers/CheckoutPage/CheckoutPage.tsx","containers/OrderHistoryPage/OrderHistoryPage.style.ts","containers/OrderHistoryPage/components/OrderHolder/OrderHolder.style.ts","containers/OrderHistoryPage/components/OrderHolder/OrderHolder.tsx","containers/OrderHistoryPage/components/index.ts","containers/OrderHistoryPage/index.ts","containers/OrderHistoryPage/OrderHistoryPage.tsx","layout/BaseLayout.tsx","routes.tsx","themeConfig.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Object","freeze","translation","routes","base","home","search","vendor","cart","product_publish","product","product_edit","login","logout","signup","profile","profile_edit","favorites","reports","checkout","history","404","cancel","nav","header","upload","login_info","signup_info","admin","title","subtitle","field","username","password","incorrect","name","surname","email","repeatedEmail","nickname","repeatedPassword","description","photo_footer","continue","empty","buy","total","items","item","unit","unavailable","no_stock","content","invalid","button","products","vendors","shown","hidden","product_title","edit","no_results","found","filter","date","price_down","price_up","amount","brand","price","stock","category","publish","save","delete","report","body","placeholder","weekly_popular","recommended","reason","finish","success","recent_addresses","no_recent_addresses","loading_recent_addresses","address","recipient","city","region","code","country","phone","orders","validation","min_length","max_length","mandatory","invalid_format","already_exists","not_matching","min","max","invalid_img_format","max_size","already_reported","info","loading","interesting","no_articles","error","500","text","401","other","not_found","fashion","appliances","phones","sports","games","others","recent","i18n","use","LanguageDetector","initReactI18next","init","resources","es","en","fallbackLng","debug","whitelist","react","useSuspense","wait","ActionType","AuthRequestinterceptor","interceptorReq","interceptorRes","lastToken","token","setup","onToken","undefined","axios","interceptors","request","eject","req","headers","amz","authorization","setupTokenInterceptor","remove","response","res","data","TOKEN_COOKIE","SessionStorageManager","localStorage","removeItem","readToken","getItem","storeToken","Date","setDate","getDate","setItem","instance","callback","handle","setCallback","cb","serverErrorHandler","ServerErrorHandlerContext","React","createContext","OK","NoContent","BadRequest","Unauthorized","Forbidden","NotFound","ServerError","FALLBACK_IMAGE","MAX_PRODUCT_IMAGES","SESSION_EXPIRE_DELAY","createValidator","t","errors","errorFor","helperFor","args","split","msg","details","slice","k","length","replace","format","seconds","timezone","moment","tz","toDate","toLocaleString","API_URL","process","FEEDBACK_API_URL","DEFAULT_HANDLED","HttpStatusCode","emptyStatusValidation","h","handled","exceptions","v","includes","BaseAPI","baseUrl","getImage","path","get","validateStatus","responseType","params","options","url","post","postMP","put","putMP","this","AuthAPI","auth","a","reauth","PRODUCT_PATH","VENDOR_PATH","ProductAPI","getProduct","id","getVendorProducts","searchProducts","publishProduct","form","files","onUploadProgress","update","formData","FormData","append","JSON","stringify","i","file","deleteProduct","findCategories","rateProduct","rating","USER_PATH","UserAPI","image","getUser","getDetailedUser","detailed","searchUsers","deleteUser","addresses","CART_PATH","CHECKOUT_PATH","CartAPI","current","productId","clear","FAVORITES_PATH","FAV_PRODUCTS_PATH","FAV_VENDORS_PATH","FavoritesAPI","getForUser","u","add","ResourceAPI","load","startsWith","REPORT_PATH","ProductReportAPI","getFor","ORDERS_PATH","OrdersAPI","FeedbackAPI","collect","action","RecommenderAPI","getPopular","UserContext","useUserService","useContext","ProductContext","useProductService","FavoriteContext","FavoriteAPI","useFavoriteService","CartContext","useCartService","sessionStorage","session","cookies","decode","parse","atob","decoded","sessionId","sub","userId","uid","r","storedToken","isLogged","shouldUpdateToken","getTime","exp","Constants","hasExpired","SessionStorageImpl","authService","interceptor","AuthRequestInterceptor","isAuth","api","status","AuthServiceImpl","SessionContext","useSession","ResourceContext","useResourceService","ProductReportContext","useProductReportService","OrdersContext","useOrdersService","FeedbackContext","useFeedbackService","useStyles","makeStyles","theme","createStyles","margin","padding","spacing","display","maxWidth","width","flexDirection","transform","breakpoints","down","buttons","marginTop","marginLeft","gridTemplateColumns","input","backgroundColor","palette","background","paper","borderRadius","userSelect","color","grey","fontWeight","toolbar","logo","cursor","up","textShadow","searchContainer","boxShadow","alignItems","position","shape","transition","transitions","create","fade","common","black","searchIcon","height","pointerEvents","justifyContent","inputButton","inputRoot","inputInput","paddingLeft","avatar","menuText","usernameMenu","divider","secondary","dark","LogoIcon","props","SvgIcon","viewBox","d","fill","data-original","NavigationBar","useLocation","useSessionService","classes","useHistory","useTranslation","cartItems","logged","useState","anchorEl","setAnchorEl","anchorAdmin","setAnchorAdmin","searched","setSearched","over","setOver","useEffect","pathname","handleMenuClose","handleAdminMenuClose","redirect","push","menuId","menuContent","Typography","className","MenuItem","onClick","ListItemIcon","menuContentLogged","aria-controls","fontSize","Divider","light","renderMenu","Menu","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","open","Boolean","onClose","adminMenu","AppBar","elevation","Toolbar","variant","Logo","IconButton","Paper","component","onSubmit","e","preventDefault","trim","InputBase","root","value","inputProps","onChange","target","type","aria-label","currentTarget","Badge","badgeContent","edge","Avatar","substring","NavigationBarWrapper","state","getSession","setState","sessionService","s","Component","container","minWidth","media","backgroundRepeat","backgroundSize","actions","zIndex","bottom","topActions","chip","top","right","maxHeight","textOverflow","overflow","DefaultActions","favService","cartService","noFav","noCart","useTheme","fav","favorite","setFavorite","addToFav","stopPropagation","size","htmlColor","main","white","disabled","Product","Actions","feedbackService","img","setImg","loadImage","mainImage","reader","FileReader","readAsDataURL","onload","result","Card","Chip","style","label","CardActionArea","CLICK","CardMedia","marginBottom","user","UserHolder","gotoProfile","profileImgUri","URL","createObjectURL","src","marginRight","pagger","NoResults","PageContainer","itemRender","EmptyComponent","setShownItems","deps","ContainerComponent","location","page","setItems","pages","setPages","fetchRequest","handleData","pageCount","Math","ceil","pageSize","Empty","Container","children","map","p","Pagination","count","hideNextButton","hidePrevButton","showFirstButton","showLastButton","flexWrap","overflowX","minHeight","scrollbarWidth","endGap","ProductSlider","rest","ProductImg","fallback","alt","selectedImgUrl","setSelectedImg","srcSet","ReportDialog","setOpen","reportService","setReason","setErrors","handleClose","handleReport","ValidationTools","Dialog","aria-labelledby","aria-describedby","DialogTitle","DialogContent","DialogContentText","TextField","autoFocus","fullWidth","multiline","helperText","rows","DialogActions","Button","PasswordField","setPassword","showPassword","setShowPassword","floor","random","FormControl","InputLabel","htmlFor","OutlinedInput","endAdornment","InputAdornment","onMouseDown","labelWidth","FormHelperText","CircularProgressIndicator","Box","CircularProgress","left","round","Alert","knownErrors","ErrorAlert","Snackbar","autoHideDuration","severity","ErrorWrapperClass","bind","textAlign","ContentWarn","Loading","x","y","fontFamily","Login","userService","setUsername","setError","doLogin","to","onSubmitCapture","noValidate","autoComplete","disableElevation","alignSelf","deleteImage","backdrop","drawer","loader","SignupFormComponent","doForm","setData","uploading","updateData","actual","changeData","required","startIcon","subtitleLogin","textDecoration","subtitleContainer","SignupTitle","clsx","EditTitle","goBack","Signup","match","_id","parseInt","isNaN","imagePreview","setImagePreview","setImage","editImageUri","setEditImageUri","uploadProgress","setUploadProgress","loaded","deletable","doSignup","rLogin","doEdit","fetchUser","deletePhoto","accept","Backdrop","default","categories","slider","topContainer","mainImgHolder","backgroundImage","backgroundPosition","RecommenderContext","useRecommenderService","Home","productService","recommenderService","setCategories","popular","setPopular","setRecommended","fetchRecommended","fetchPopular","fetchCategories","c","all","useStyle","PageNotFound","images","holder","subholder","paddingRight","overflowWrap","catVendorVisits","visits","descriptionBuy","flexBasis","infoPair","wordBreak","buyHolder","ProductInfo","setAmount","amounts","setAmounts","setSelectedImgUrl","selectedImg","reporting","setReporting","owner","editable","amnts","Array","from","_","InfoHeader","Link","href","vendorNick","Rating","precision","readOnly","Hidden","mdUp","im","smDown","Autocomplete","getOptionLabel","disableClearable","renderInput","ProductPage","setProduct","document","handleNotFound","fetchProduct","VISIT","fetchRecommendations","justifyItems","pair","ProductEditForm","updateProduct","find","setCategory","InputProps","FormControlLabel","control","Switch","checked","InputLabelProps","shrink","ProductEdit","imagePreviews","setImagePreviews","setFiles","setImages","index","findIndex","removePhoto","selectPhoto","Logout","controls","filterInput","filterField","sortingModes","mode","icon","Search","query","shownItems","selectedOrder","setSelectedOrder","order","setOrder","newId","handleCategory","m","toggler","Favorites","favType","productOrUser","setProductOrUser","ToggleButtonGroup","exclusive","ToggleButton","contentHolder","list","imageContainer","subtotal","CartProductHolder","pc","favoriteService","updateTotal","removed","setRemoved","setUnavailable","amountField","setAmountField","amountError","setAmountError","outStock","calcSub","n","setSubtotal","checkStock","gotoProduct","handleCart","changeUnits","ButtonBase","onBlur","InvalidCartDialog","setContent","CartPage","setProducts","calcTotal","reduce","prev","prod","setTotal","setSize","updateSize","pred","fetchProducts","EmptyCart","valid","join","checkValidCart","endIcon","topText","paddingBottom","border","borderColor","borderStyle","VendorProfileInfo","self","profileImage","setProfileImage","VendorProfile","perms","vendorId","setUser","setShown","fetchVendor","ReportHolder","deleteReport","DateUtils","TableRow","TableCell","scope","align","productName","userNickname","ReportsPage","TableContainer","Table","TableHead","TableBody","summary","addressesTitle","addressButton","addressContainer","addressHolder","CheckoutPage","setAddresses","selectAddress","err","done","orderId","orderSuccess","heading","flexShrink","secondaryHeading","addressValues","OrderedProductHolder","userRating","setRating","ListItem","unitPrice","OrderHolder","o","expanded","setExpanded","Accordion","isExpanded","AccordionSummary","expandIcon","AccordionDetails","List","entries","OrderHistoryPage","completedOrder","orderService","CheckRedirect","RouteCheck","route","RouteComponent","identified","then","BaseLayout","render","exact","Routes","createMuiTheme","primary","blue","orange","App","ThemeProvider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.72c6028d.chunk.js","sourcesContent":["const es = {\r\n    routes: {\r\n        base: 'Shop - ',\r\n        home: 'Inicio',\r\n        search: 'Buscar',\r\n        vendor: 'Vendedor',\r\n        cart: 'Carrito',\r\n        product_publish: 'Nuevo producto',\r\n        product: 'Cargando...',\r\n        product_edit: 'Editar producto',\r\n        login: 'Iniciar sesin',\r\n        logout: 'Saliendo...',\r\n        signup: 'Registrarse',\r\n        profile: 'Mi perfil',\r\n        profile_edit: 'Editar perfil',\r\n        favorites: 'Favoritos',\r\n        reports: 'Reportes',\r\n        checkout: 'Proceso de compra',\r\n        history: 'Mis pedidos',\r\n        404: 'No encontrado',\r\n    },\r\n    cancel: 'Cancelar',\r\n    nav: {\r\n        header: 'Tienda',\r\n        favorites: 'Favoritos',\r\n        upload: 'Publicar producto',\r\n        history: 'Mis pedidos',\r\n        logout: 'Salir',\r\n        login: 'Iniciar sesin',\r\n        login_info: 'Entra con tu cuenta',\r\n        signup: 'Registrarse',\r\n        signup_info: 'No tienes? Regstrate',\r\n        search: 'Buscar',\r\n        admin: {\r\n            reports: 'Reportes',\r\n        },\r\n    },\r\n    login: {\r\n        title: 'Inicia sesin',\r\n        subtitle: 'An no te has registrado? Hazlo ya!',\r\n        field: {\r\n            username: 'Seudnimio o correo',\r\n            password: 'Contrasea',\r\n            incorrect: 'Usuario o contrasea incorrectos',\r\n        },\r\n    },\r\n    signup: {\r\n        title: 'Registrar',\r\n        subtitle: 'Ya ests registrado?',\r\n        field: {\r\n            name: 'Nombre',\r\n            surname: 'Apellidos',\r\n            email: 'Correo electrnico',\r\n            repeatedEmail: 'Repite el correo',\r\n            nickname: 'Seudnimo',\r\n            password: 'Contrasea',\r\n            repeatedPassword: 'Repite contrasea',\r\n            description: 'Descripcin',\r\n            photo_footer: 'Foto de perfil (Mx 14MB .jpeg, .jpg, .png)',\r\n        },\r\n        continue: 'Continuar',\r\n    },\r\n    cart: {\r\n        empty: 'Carrito vaco',\r\n        title: 'Carrito',\r\n        buy: 'Proceder',\r\n        total: 'Total',\r\n        items: 'tems',\r\n        item: 'tem',\r\n        unit: 'Unidad',\r\n        unavailable: 'No disponible ya',\r\n        no_stock: 'Stock insuficiente',\r\n        favorites: 'Tus favoritos',\r\n        content: {\r\n            invalid:\r\n                'Por favor revisa los siguientes items del carrito, ya no estn disponibles o no hay suficiente stock: ',\r\n            title: 'Productos invlidos',\r\n            button: 'Entendido',\r\n        },\r\n    },\r\n    favorites: {\r\n        title: 'Mis favoritos',\r\n        empty: 'No hay favoritos',\r\n        products: 'Productos',\r\n        vendors: 'Vendedores',\r\n    },\r\n    profile: {\r\n        empty: 'No hay productos',\r\n        shown: 'Visibles',\r\n        hidden: 'Ocultos',\r\n        product_title: 'Productos',\r\n        edit: {\r\n            title: 'Editar perfil',\r\n        },\r\n    },\r\n    search: {\r\n        no_results: 'Sin resultados',\r\n        found: 'Encontrados {0} resultados para \"{1}\"',\r\n        filter: {\r\n            date: 'Ms recientes',\r\n            price_down: 'Precio descendente',\r\n            price_up: 'Precio ascendente',\r\n        },\r\n    },\r\n    product: {\r\n        buy: 'Comprar',\r\n        amount: 'Cantidad',\r\n        no_stock: 'Agotado',\r\n        name: 'Ttulo',\r\n        brand: 'Marca',\r\n        description: 'Descripcin',\r\n        price: 'Precio',\r\n        stock: 'Stock disponible',\r\n        hidden: 'Hidden',\r\n        category: 'Categora',\r\n        edit: 'Editar producto',\r\n        publish: 'Publicar producto',\r\n        save: 'Guardar',\r\n        delete: 'Borrar',\r\n        report: {\r\n            title: 'Reportar producto',\r\n            body: 'Si consideras que el contenido de este producto puede ser inadeacuado, reprtalo para que lo revise un administrador.',\r\n            placeholder: 'Mensaje',\r\n            button: 'Reportar',\r\n        },\r\n    },\r\n    home: {\r\n        title: 'Qu vas a comprar?',\r\n        weekly_popular: 'Populares en la semana',\r\n        recommended: 'Recomendados',\r\n    },\r\n    reports: {\r\n        empty: 'No hay reportes',\r\n        product: 'Producto',\r\n        date: 'Fecha',\r\n        reason: 'Motivo',\r\n    },\r\n    checkout: {\r\n        title: 'Pago',\r\n        finish: 'Completar',\r\n        success: 'El pedido #{0} se ha completado correctamente!',\r\n        empty: 'Por favor revisa el carrito de compra, porque est vaco.',\r\n        invalid:\r\n            'Por favor revisa el carrito de compra, hay problemas con la disponibilidad de alguno de los tems.',\r\n        recent_addresses: 'Direcciones recientes',\r\n        no_recent_addresses: 'No hay direcciones recientes',\r\n        loading_recent_addresses: 'Cargando direcciones recientes...',\r\n    },\r\n    address: {\r\n        recipient: 'Nombre y apellidos',\r\n        city: 'Ciudad',\r\n        region: 'Regin',\r\n        code: 'Cdigo postal',\r\n        country: 'Pas',\r\n        address: 'Direccin',\r\n        phone: 'Telfono',\r\n    },\r\n    orders: {\r\n        title: 'Compras',\r\n        empty: 'No hay productos',\r\n    },\r\n    validation: {\r\n        min_length: 'Longitud mnima de {0}',\r\n        max_length: 'Longitud mxima de {0}',\r\n        mandatory: 'Campo obligatorio',\r\n        invalid_format: 'Formato invlido',\r\n        already_exists: 'Ya est en uso',\r\n        not_matching: 'Los campos no coinciden',\r\n        min: 'El valor mnimo es {0}',\r\n        max: 'El valor mximo es {0}',\r\n        invalid: 'Valor invlido',\r\n        invalid_img_format: 'Extensin invlida, usa .jpg, .jpeg o .png',\r\n        max_size: 'Tamao mximo permitido {0}MB',\r\n        already_reported: 'Ya has reportado este producto, por favor espera!',\r\n    },\r\n    info: {\r\n        loading: 'Cargando...',\r\n        interesting: 'Podra interesarte...',\r\n        no_articles: 'No hay recomendaciones',\r\n    },\r\n    error: {\r\n        500: {\r\n            text: 'Lo sentimos, ha ocurrido un error, por favor recarga la pgina e intntalo de nuevo!',\r\n        },\r\n        401: {\r\n            text: 'Inicia sesin para hacer esto!',\r\n        },\r\n        other: {\r\n            text: 'Ha pasado algn error desconocido, recarga la pgina',\r\n        },\r\n        not_found: 'No encontrado | 404',\r\n    },\r\n    category: {\r\n        fashion: 'Moda',\r\n        appliances: 'Electrodomsticos',\r\n        phones: 'Telfonos',\r\n        'computers-electronic': 'Ordenadores/Electrnica',\r\n        sports: 'Deportes',\r\n        games: 'Juegos',\r\n        home: 'Hogar',\r\n        others: 'Otros',\r\n    },\r\n}\r\n\r\nexport default Object.freeze({ translation: es })\r\n","const en = {\r\n    routes: {\r\n        base: 'Shop - ',\r\n        home: 'Home',\r\n        search: 'Search',\r\n        vendor: 'Vendor',\r\n        cart: 'Cart',\r\n        product_publish: 'Publish product',\r\n        product: 'Loading...',\r\n        product_edit: 'Edit product',\r\n        login: 'Log in',\r\n        logout: 'Logging out...',\r\n        signup: 'Sign up',\r\n        profile: 'My profile',\r\n        profile_edit: 'Edit profile',\r\n        favorites: 'Favorites',\r\n        reports: 'Reports',\r\n        checkout: 'Checkout',\r\n        history: 'My orders',\r\n        404: 'Not found',\r\n    },\r\n    cancel: 'Cancel',\r\n    nav: {\r\n        header: 'Shop',\r\n        favorites: 'Favorites',\r\n        upload: 'Upload product',\r\n        history: 'My orders',\r\n        logout: 'Logout',\r\n        login: 'Login',\r\n        login_info: 'Login with your account',\r\n        signup: 'Sign up',\r\n        signup_info: 'Not registered? Sign up',\r\n        search: 'Search',\r\n        admin: {\r\n            reports: 'Reports',\r\n        },\r\n    },\r\n    login: {\r\n        title: 'Log in',\r\n        subtitle: 'Not registered yet? Do it now!',\r\n        field: {\r\n            username: 'Nickname or e-mail',\r\n            password: 'Password',\r\n            incorrect: 'Incorrect user/password',\r\n        },\r\n    },\r\n    signup: {\r\n        title: 'Sign up',\r\n        subtitle: 'Alredy registered?',\r\n        field: {\r\n            name: 'Name',\r\n            surname: 'Surname',\r\n            email: 'E-mail',\r\n            repeatedEmail: 'Repeated e-mail',\r\n            nickname: 'Nickname',\r\n            password: 'Password',\r\n            repeatedPassword: 'Repeated password',\r\n            description: 'Description',\r\n            photo_footer: 'Profile photo (Max 14MB .jpeg, .jpg, .png)',\r\n        },\r\n        continue: 'Continue',\r\n    },\r\n    cart: {\r\n        empty: 'Cart is empty',\r\n        title: 'Cart',\r\n        buy: 'Proceed',\r\n        total: 'Total',\r\n        items: 'Items',\r\n        item: 'Item',\r\n        unit: 'Unit',\r\n        unavailable: 'Unavailable',\r\n        no_stock: 'Insufficient stock',\r\n        favorites: 'Your favorites',\r\n        invalid: {\r\n            content:\r\n                'Please check the following items, they are unavailable or there is insufficient stock: ',\r\n            title: 'Invalid products',\r\n            button: 'Got it',\r\n        },\r\n    },\r\n    favorites: {\r\n        title: 'My favorites',\r\n        empty: 'No favorites',\r\n        products: 'Products',\r\n        vendors: 'Vendors',\r\n    },\r\n    profile: {\r\n        empty: 'No products',\r\n        shown: 'Shown',\r\n        hidden: 'Hidden',\r\n        product_title: 'Products',\r\n        edit: {\r\n            title: 'Edit profile',\r\n        },\r\n    },\r\n    search: {\r\n        no_results: 'No results',\r\n        found: 'Found {0} results for \"{1}\"',\r\n        filter: {\r\n            recent: 'Most recent',\r\n            price_down: 'High to Low',\r\n            price_up: 'Low to High',\r\n        },\r\n    },\r\n    product: {\r\n        buy: 'Buy',\r\n        amount: 'Amount',\r\n        no_stock: 'Out of stock',\r\n        name: 'Title',\r\n        brand: 'Brand',\r\n        description: 'Description',\r\n        price: 'Price',\r\n        stock: 'Available stock',\r\n        hidden: 'Hidden',\r\n        category: 'Category',\r\n        edit: 'Edit product',\r\n        publish: 'Publish product',\r\n        save: 'Save',\r\n        delete: 'Delete',\r\n        report: {\r\n            title: 'Report product',\r\n            body: 'If you think that the content of this product may be inappropriate, please report it to an administrator for review.',\r\n            placeholder: 'Message',\r\n            button: 'Report',\r\n        },\r\n    },\r\n    home: {\r\n        title: 'What are you buying?',\r\n        weekly_popular: 'Weekly popular',\r\n        recommended: 'Recommended',\r\n    },\r\n    reports: {\r\n        empty: 'No reports',\r\n        product: 'Product',\r\n        date: 'Date',\r\n        reason: 'Reason',\r\n        title: 'Reports',\r\n    },\r\n    checkout: {\r\n        title: 'Checkout',\r\n        finish: 'Finish',\r\n        success: 'Order #{0} has been successfully completed!',\r\n        empty: \"Please check your shopping cart because it's empty!\",\r\n        invalid:\r\n            'Please check your shopping cart, there are some problems regarding the availability of some items.',\r\n        recent_addresses: 'Recent addresses',\r\n        no_recent_addresses: 'No recent addresses',\r\n        loading_recent_addresses: 'Loading recent addresses...',\r\n    },\r\n    address: {\r\n        recipient: 'Full name',\r\n        city: 'City',\r\n        region: 'Region',\r\n        code: 'Zip code',\r\n        country: 'Country',\r\n        address: 'Address',\r\n        phone: 'Phone number',\r\n    },\r\n    orders: {\r\n        title: 'Orders',\r\n        empty: 'No products',\r\n    },\r\n    validation: {\r\n        min_length: 'Min allowed length is {0}',\r\n        max_length: 'Max allowed length is {0}',\r\n        mandatory: 'Mandatory field',\r\n        invalid_format: 'Invalid format',\r\n        already_exists: 'Already exists',\r\n        not_matching: 'Fields not matching',\r\n        min: 'Minimum valid value is {0}',\r\n        max: 'Maximum valid value is {0}',\r\n        invalid: 'Invalid value',\r\n        invalid_img_format: 'Invalid format use .jpg, .jpeg o .png',\r\n        max_size: 'Maximum allowed size is {0}MB',\r\n        already_reported:\r\n            'You have already reported this product, please wait!',\r\n    },\r\n    info: {\r\n        loading: 'Loading...',\r\n        interesting: 'May interest you...',\r\n        no_articles: 'No articles found',\r\n    },\r\n    error: {\r\n        500: {\r\n            text: 'Sorry, an error has ocurred, please refresh the page and try again!',\r\n        },\r\n        401: {\r\n            text: 'Please log in to do that!',\r\n        },\r\n        other: {\r\n            text: 'An unknown error has ocurred, refresh the page!',\r\n        },\r\n        not_found: 'Not found | 404',\r\n    },\r\n    category: {\r\n        fashion: 'Fashion',\r\n        appliances: 'Appliances',\r\n        phones: 'Phones',\r\n        'computers-electronic': 'Computers/Electronic',\r\n        sports: 'Sports',\r\n        games: 'Games',\r\n        home: 'Home',\r\n        others: 'Others',\r\n    },\r\n}\r\n\r\nexport default Object.freeze({ translation: en })\r\n","import i18n from 'i18next'\r\nimport { initReactI18next } from 'react-i18next'\r\nimport LanguageDetector from 'i18next-browser-languagedetector'\r\n\r\nimport es from './locales/es/translation'\r\nimport en from './locales/en/translation'\r\n\r\ni18n.use(LanguageDetector)\r\n    .use(initReactI18next)\r\n    .init({\r\n        resources: {\r\n            es,\r\n            en,\r\n        },\r\n        fallbackLng: 'es',\r\n        debug: false,\r\n        whitelist: ['es', 'en'],\r\n        react: {\r\n            useSuspense: true,\r\n            wait: true,\r\n        },\r\n    })\r\n\r\nexport default i18n\r\n","interface Product {\r\n    id: number\r\n    name: string\r\n    brand: string\r\n    price: number\r\n    stock: number\r\n    category: ProductCategory\r\n    images: ProductImage[]\r\n    hidden: boolean\r\n    description: string\r\n    lastUpdated: Date\r\n    date: Date\r\n    visits: number\r\n    rating: number\r\n    userId: number\r\n\r\n    vendorNick?: string\r\n    fav?: boolean\r\n}\r\n\r\ninterface ProductImage {\r\n    i: number\r\n    u: string\r\n}\r\n\r\ninterface PreviewProduct {\r\n    id: number\r\n    name: string\r\n    brand: string\r\n    price: number\r\n    stock: number\r\n    mainImage: string\r\n    lastUpdated: Date\r\n    visits: number\r\n    rating: number\r\n\r\n    fav?: boolean\r\n}\r\n\r\ninterface ProductCategory {\r\n    id: number\r\n    name?: string\r\n}\r\n\r\ninterface ProductReport {\r\n    id: number\r\n    productId: number\r\n    userId: number\r\n    reason: string\r\n    date: Date\r\n    productName: string\r\n    userNickname: string\r\n}\r\n\r\ninterface User {\r\n    id: number\r\n    nickname: string\r\n    description: string\r\n    profileImgUri?: string\r\n    registerDate: Date\r\n\r\n    fav?: boolean\r\n}\r\n\r\ninterface UserDetails {\r\n    name: string\r\n    surname: string\r\n    email: string\r\n}\r\n\r\ntype DetailedUser = User & UserDetails\r\n\r\ninterface UserAddress {\r\n    recipient: string\r\n    code: string\r\n    city: string\r\n    region: string\r\n    country: string\r\n    address: string\r\n    phone: string\r\n}\r\n\r\ninterface CartProduct {\r\n    id: number\r\n    amount: number\r\n}\r\n\r\ninterface CartProductPreview {\r\n    product: PreviewProduct\r\n    amount: number\r\n\r\n    removed?: boolean\r\n    unavailable?: boolean\r\n}\r\n\r\ninterface Date {\r\n    seconds: number\r\n    nanos: number\r\n}\r\n\r\ninterface Order {\r\n    id: number\r\n    userId: number\r\n    address: UserAddress\r\n    items: OrderedProduct[]\r\n    date: Date\r\n}\r\n\r\ninterface OrderedProduct {\r\n    amount: number\r\n    unitPrice: number\r\n    product: PreviewProduct\r\n\r\n    userRating?: number\r\n}\r\n\r\nenum ActionType {\r\n    CLICK = 0,\r\n    VISIT = 5,\r\n}\r\n\r\nexport type {\r\n    Product,\r\n    PreviewProduct,\r\n    ProductCategory,\r\n    ProductReport,\r\n    User,\r\n    UserAddress,\r\n    DetailedUser,\r\n    CartProduct,\r\n    CartProductPreview,\r\n    Order,\r\n    OrderedProduct,\r\n}\r\n\r\nexport { ActionType }\r\n","import axios from 'axios'\r\n\r\nexport default class AuthRequestinterceptor {\r\n    private interceptorReq?: number\r\n    private interceptorRes?: number\r\n\r\n    private lastToken?: string\r\n\r\n    header = (token = this.lastToken) => `Bearer ${token}`\r\n\r\n    setup = (token: string, onToken: (token: string) => void) => {\r\n        this.lastToken = token\r\n\r\n        if (this.interceptorReq !== undefined)\r\n            axios.interceptors.request.eject(this.interceptorReq)\r\n\r\n        this.interceptorReq = axios.interceptors.request.use((req) => {\r\n            if (req.headers.amz) {\r\n                delete req.headers.amz\r\n                return req\r\n            }\r\n\r\n            req.headers.authorization = this.header()\r\n            return req\r\n        })\r\n\r\n        this.setupTokenInterceptor(onToken)\r\n    }\r\n\r\n    remove = () => {\r\n        if (this.interceptorReq !== undefined) {\r\n            axios.interceptors.request.eject(this.interceptorReq)\r\n            this.interceptorReq = undefined\r\n        }\r\n\r\n        if (this.interceptorRes !== undefined) {\r\n            axios.interceptors.response.eject(this.interceptorRes)\r\n            this.interceptorRes = undefined\r\n        }\r\n    }\r\n\r\n    private setupTokenInterceptor = (onToken: (token: string) => void) => {\r\n        if (this.interceptorRes !== undefined)\r\n            axios.interceptors.response.eject(this.interceptorRes)\r\n\r\n        this.interceptorRes = axios.interceptors.response.use((res) => {\r\n            const token = res.data?.token\r\n            if (token) {\r\n                this.lastToken = token\r\n                onToken(token)\r\n            }\r\n            return res\r\n        })\r\n    }\r\n}\r\n","const TOKEN_COOKIE = 'token'\r\nconst TOKEN_LIFESPAN = 7\r\n\r\nexport default class SessionStorageManager {\r\n    remove = () => localStorage.removeItem(TOKEN_COOKIE)\r\n\r\n    readToken = () => localStorage.getItem(TOKEN_COOKIE)\r\n\r\n    storeToken = (token: string) => {\r\n        const date = new Date()\r\n        date.setDate(date.getDate() + TOKEN_LIFESPAN)\r\n\r\n        localStorage.setItem(TOKEN_COOKIE, token)\r\n    }\r\n}\r\n","import React from 'react'\r\n\r\ntype Callback = (code: number) => void\r\n\r\nexport interface ServerErrorHandlerListener {\r\n    setCallback: (callback: Callback) => void\r\n}\r\n\r\nexport interface ServerErrorHandlerEmitter {\r\n    handle: (code: number) => void\r\n}\r\n\r\nclass ServerErrorHandler\r\n    implements ServerErrorHandlerListener, ServerErrorHandlerEmitter {\r\n    private callback: Callback | undefined\r\n\r\n    handle = (code: number) => {\r\n        if (this.callback) this.callback(code)\r\n    }\r\n\r\n    setCallback = (cb: Callback) => {\r\n        this.callback = cb\r\n    }\r\n}\r\n\r\nconst instance = new ServerErrorHandler()\r\n\r\nexport const serverErrorHandler: ServerErrorHandlerEmitter = instance\r\n\r\nconst ServerErrorHandlerContext = React.createContext<ServerErrorHandlerListener>(\r\n    instance\r\n)\r\n\r\nexport const useServerErrorHandler = () =>\r\n    React.useContext(ServerErrorHandlerContext)\r\n","export const OK = 200\r\nexport const NoContent = 204\r\n\r\nexport const BadRequest = 400\r\nexport const Unauthorized = 401\r\nexport const Forbidden = 403\r\nexport const NotFound = 404\r\n\r\nexport const ServerError = 500","export const FALLBACK_IMAGE = '/icons/noimage.svg'\r\n\r\nexport const MAX_PRODUCT_IMAGES = 8\r\n\r\nexport const SESSION_EXPIRE_DELAY = 5 * 24 * 60 * 60 * 1000\r\n","export const createValidator = (t: any, errors: any) => {\r\n    const errorFor = (field: string) => field in errors\r\n\r\n    const helperFor = (field: string) => {\r\n        const error = errors[field]\r\n        if (error === undefined) return undefined\r\n        const args = error.split('.')\r\n\r\n        let msg = t(`validation.${args[0]}`)\r\n\r\n        const details = args.slice(1)\r\n        for (let k = 0; k < details.length; k++)\r\n            msg = msg.replace('{' + k + '}', details[k])\r\n\r\n        return msg\r\n    }\r\n\r\n    return { errorFor, helperFor }\r\n}\r\n","import moment from 'moment-timezone'\r\n\r\nexport const format = (seconds: number, timezone: string = 'Europe/Madrid') => {\r\n    return moment(seconds * 1000)\r\n        .tz(timezone)\r\n        .toDate()\r\n        .toLocaleString()\r\n}\r\n","import axios, { AxiosResponse } from 'axios'\r\n\r\nimport { HttpStatusCode, serverErrorHandler } from '../utils'\r\n\r\nconst API_URL = `${process.env.REACT_APP_API_URL}/v${process.env.REACT_APP_API_VERSION}`\r\nexport const FEEDBACK_API_URL = `${process.env.REACT_APP_FEEDBACK_API_URL}/v${process.env.REACT_APP_FEEDBACK_API_VERSION}`\r\n\r\nexport type RPromise<T = null> = Promise<AxiosResponse<T>>\r\nexport type StatusHandler = (status: number) => boolean\r\n\r\nconst DEFAULT_HANDLED = [\r\n    HttpStatusCode.ServerError,\r\n    HttpStatusCode.Unauthorized,\r\n]\r\n\r\nconst emptyStatusValidation = (h?: number[]) => (code: number) => {\r\n    let handled = h ? [...DEFAULT_HANDLED, ...h] : DEFAULT_HANDLED\r\n    let exceptions = h?.filter((v) => DEFAULT_HANDLED.includes(v)) ?? []\r\n    if (handled.includes(code) && !exceptions.includes(code))\r\n        serverErrorHandler.handle(code)\r\n\r\n    return true\r\n}\r\n\r\nexport default class BaseAPI {\r\n    baseUrl: string\r\n\r\n    constructor(baseUrl: string = API_URL) {\r\n        this.baseUrl = baseUrl\r\n    }\r\n\r\n    protected getImage = (path: string) =>\r\n        axios.get(path, {\r\n            headers: { amz: 'amz' },\r\n            validateStatus: (code: number) => true,\r\n            responseType: 'blob',\r\n        })\r\n\r\n    protected get = <T = null>(\r\n        path: string,\r\n        params?: any,\r\n        handled?: number[],\r\n        options: any = {}\r\n    ) =>\r\n        axios.get<T>(this.url(path), {\r\n            params,\r\n            validateStatus: emptyStatusValidation(handled),\r\n            ...options,\r\n        })\r\n\r\n    protected post = <T = null>(\r\n        path: string,\r\n        params?: any,\r\n        handled?: number[],\r\n        options: any = {}\r\n    ) =>\r\n        axios.post<T>(this.url(path), null, {\r\n            params,\r\n            validateStatus: emptyStatusValidation(handled),\r\n            ...options,\r\n        })\r\n\r\n    protected postMP = <T = null>(\r\n        path: string,\r\n        data: any,\r\n        handled?: number[],\r\n        options: any = {}\r\n    ) =>\r\n        axios.post<T>(this.url(path), data, {\r\n            validateStatus: emptyStatusValidation(handled),\r\n            ...options,\r\n        })\r\n\r\n    protected put = <T = null>(\r\n        path: string,\r\n        params?: any,\r\n        handled?: number[],\r\n        options: any = {}\r\n    ) =>\r\n        axios.put<T>(this.url(path), null, {\r\n            params,\r\n            validateStatus: emptyStatusValidation(handled),\r\n            ...options,\r\n        })\r\n\r\n    protected putMP = <T = null>(\r\n        path: string,\r\n        data: any,\r\n        handled?: number[],\r\n        options: any = {}\r\n    ) =>\r\n        axios.put<T>(this.url(path), data, {\r\n            validateStatus: emptyStatusValidation(handled),\r\n            ...options,\r\n        })\r\n\r\n    protected delete = <T = null>(\r\n        path: string,\r\n        params?: any,\r\n        handled?: number[],\r\n        options: any = {}\r\n    ) =>\r\n        axios.delete<T>(this.url(path), {\r\n            params,\r\n            validateStatus: emptyStatusValidation(handled),\r\n            ...options,\r\n        })\r\n\r\n    private url = (path: string) => `${this.baseUrl}${path}`\r\n}\r\n","import { HttpStatusCode } from '../utils'\r\n\r\nimport BaseAPI from './BaseAPI'\r\n\r\nexport default class AuthAPI extends BaseAPI {\r\n    auth = async () =>\r\n        await this.post<string>('/auth', null, [HttpStatusCode.Unauthorized])\r\n\r\n    reauth = async (header: string) =>\r\n        await this.post<string>(\r\n            '/reauth',\r\n            null,\r\n            [HttpStatusCode.Unauthorized],\r\n            { headers: { authorization: header } }\r\n        )\r\n}\r\n","import BaseAPI, { RPromise } from './BaseAPI'\r\n\r\nimport { PreviewProduct, Product, ProductCategory } from '../types'\r\nimport { Paged, PagedParams } from './types'\r\nimport { HttpStatusCode } from '../utils'\r\n\r\nexport interface ProductService {\r\n    getProduct: (id: number) => RPromise<Product>\r\n    getVendorProducts: (\r\n        id: number,\r\n        shown: boolean,\r\n        params: PagedParams\r\n    ) => RPromise<Paged<PreviewProduct>>\r\n    searchProducts: (\r\n        search: SearchProduct & PagedParams\r\n    ) => RPromise<Paged<PreviewProduct>>\r\n    publishProduct: (\r\n        form: ProductForm,\r\n        images: File[],\r\n        onUploadProgress: any,\r\n        update: boolean\r\n    ) => RPromise<number>\r\n    deleteProduct: (id: number) => RPromise\r\n    findCategories: () => RPromise<ProductCategory[]>\r\n    rateProduct: (id: number, rating: number) => RPromise\r\n}\r\n\r\nconst PRODUCT_PATH = '/product'\r\nconst VENDOR_PATH = '/vendor'\r\n\r\nexport interface ProductForm {\r\n    id?: number\r\n    name: string\r\n    brand: string\r\n    description: string\r\n    price: number\r\n    stock: number\r\n    category: number\r\n    hidden: boolean\r\n}\r\n\r\ninterface SearchProduct {\r\n    query: string\r\n    category?: number\r\n}\r\n\r\nexport default class ProductAPI extends BaseAPI implements ProductService {\r\n    getProduct = (id: number) =>\r\n        this.get<Product>(`${PRODUCT_PATH}/${id}`, null)\r\n\r\n    getVendorProducts = (id: number, shown: boolean, params: PagedParams) =>\r\n        this.get<Paged<PreviewProduct>>(\r\n            `${PRODUCT_PATH}${VENDOR_PATH}/${id}`,\r\n            {\r\n                shown,\r\n                ...params,\r\n            },\r\n            [HttpStatusCode.Forbidden]\r\n        )\r\n\r\n    searchProducts = (search: SearchProduct & PagedParams) =>\r\n        this.get<Paged<PreviewProduct>>(`${PRODUCT_PATH}/list`, search, [\r\n            HttpStatusCode.BadRequest,\r\n        ])\r\n\r\n    publishProduct = (\r\n        form: ProductForm,\r\n        files: File[],\r\n        onUploadProgress: any,\r\n        update: boolean\r\n    ) => {\r\n        const formData = new FormData()\r\n\r\n        formData.append('form', JSON.stringify(form))\r\n        for (let i = 0; i < files.length; i++) {\r\n            const file = files[i]\r\n            if (file !== undefined)\r\n                formData.append(\r\n                    `${update && file === null ? 'delete' : 'file'}${i}`,\r\n                    file\r\n                )\r\n        }\r\n\r\n        return (update ? this.putMP : this.postMP)<number>(\r\n            '/product',\r\n            formData,\r\n            [HttpStatusCode.Forbidden],\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                },\r\n                onUploadProgress,\r\n            }\r\n        )\r\n    }\r\n\r\n    deleteProduct = (id: number) =>\r\n        this.delete(`${PRODUCT_PATH}/${id}`, null, [HttpStatusCode.Forbidden])\r\n\r\n    findCategories = () =>\r\n        this.get<ProductCategory[]>(`${PRODUCT_PATH}/categories`)\r\n\r\n    rateProduct = (id: number, rating: number) =>\r\n        this.put(`${PRODUCT_PATH}/${id}/rate`, { rating })\r\n}\r\n","import BaseAPI, { RPromise } from './BaseAPI'\r\n\r\nimport { User, DetailedUser, UserAddress } from '../types'\r\nimport { HttpStatusCode } from '../utils'\r\n\r\nexport interface UserService {\r\n    login: (form: LoginForm) => RPromise<LoginResponse>\r\n    signup: (form: SignupForm, image: File, onUploadProgress: any) => RPromise\r\n    edit: (form: SignupForm, image: File, onUploadProgress: any) => RPromise\r\n    getUser: (id: number) => RPromise<User>\r\n    getDetailedUser: (id: number) => RPromise<DetailedUser>\r\n    searchUsers: (search: SearchUser) => RPromise<User[]>\r\n    deleteUser: (id: number) => RPromise\r\n    addresses: (id: number) => RPromise<UserAddress[]>\r\n}\r\n\r\nconst USER_PATH = '/user'\r\n\r\ninterface SearchUser {\r\n    query: string\r\n    page?: number\r\n    category?: number\r\n    order?: number\r\n}\r\n\r\ninterface LoginForm {\r\n    username: string\r\n    password: string\r\n}\r\n\r\nexport interface SignupForm {\r\n    id?: number\r\n    name: string\r\n    surname: string\r\n    email?: string\r\n    repeatedEmail?: string\r\n    password: string\r\n    repeatedPassword: string\r\n    nickname: string\r\n    description: string\r\n    deletePhoto?: boolean\r\n}\r\n\r\ninterface LoginResponse {\r\n    token: string\r\n    user: User\r\n}\r\n\r\nexport default class UserAPI extends BaseAPI implements UserService {\r\n    login = (form: LoginForm) =>\r\n        this.post<LoginResponse>('/login', form, [HttpStatusCode.Unauthorized])\r\n\r\n    signup = (form: SignupForm, image: File, onUploadProgress: any) => {\r\n        const formData = new FormData()\r\n\r\n        formData.append('form', JSON.stringify(form))\r\n        if (image) formData.append('file', image)\r\n\r\n        return this.postMP('/signup', formData, undefined, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data',\r\n            },\r\n            onUploadProgress,\r\n        })\r\n    }\r\n\r\n    edit = (form: SignupForm, image: File, onUploadProgress: any) => {\r\n        const formData = new FormData()\r\n\r\n        formData.append('form', JSON.stringify(form))\r\n        if (image) formData.append('file', image)\r\n\r\n        return this.putMP('/profile/edit', formData, undefined, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data',\r\n            },\r\n            onUploadProgress,\r\n        })\r\n    }\r\n\r\n    getUser = (id: number) => this.get<User>(`${USER_PATH}/${id}`)\r\n\r\n    getDetailedUser = (id: number) =>\r\n        this.get<DetailedUser>(`${USER_PATH}/${id}`, { detailed: true }, [\r\n            HttpStatusCode.Forbidden,\r\n        ])\r\n\r\n    searchUsers = (search: SearchUser) =>\r\n        this.get<User[]>(`${USER_PATH}/list`, search)\r\n\r\n    deleteUser = (id: number) =>\r\n        this.delete(`${USER_PATH}/${id}`, null, [\r\n            HttpStatusCode.Forbidden,\r\n            HttpStatusCode.NotFound,\r\n        ])\r\n\r\n    addresses = (id: number) =>\r\n        this.get<UserAddress[]>(`${USER_PATH}/${id}/addresses`, null, [\r\n            HttpStatusCode.Forbidden,\r\n            HttpStatusCode.NotFound,\r\n        ])\r\n}\r\n","import BaseAPI, { RPromise } from './BaseAPI'\r\n\r\nimport { CartProductPreview, UserAddress } from '../types'\r\n\r\nconst CART_PATH = '/cart'\r\nconst CHECKOUT_PATH = '/checkout'\r\n\r\nexport interface CartService {\r\n    update: (form: UpdateCartForm) => RPromise\r\n    remove: (productId: number) => RPromise\r\n    clear: () => RPromise\r\n    current: () => RPromise<CartProductPreview[]>\r\n    checkout: (address: UserAddress) => RPromise<{ orderId: number }>\r\n}\r\n\r\nexport interface UpdateCartForm {\r\n    productId: number\r\n    amount: number\r\n    add: boolean\r\n}\r\n\r\nexport default class CartAPI extends BaseAPI implements CartService {\r\n    current = () => this.get<CartProductPreview[]>(CART_PATH)\r\n\r\n    update = (form: UpdateCartForm) => this.post(CART_PATH, form)\r\n\r\n    remove = (productId: number) => this.delete(CART_PATH, { productId })\r\n\r\n    clear = () => this.delete(`${CART_PATH}/all`)\r\n\r\n    checkout = (address: UserAddress) =>\r\n        this.post<{ orderId: number }>(CHECKOUT_PATH, address)\r\n}\r\n","import BaseAPI, { RPromise } from './BaseAPI'\r\n\r\nimport { PreviewProduct, User } from '../types'\r\n\r\nimport { Paged, PagedParams } from './types'\r\nimport { HttpStatusCode } from '../utils'\r\n\r\nexport interface FavoriteService {\r\n    getForUser: (\r\n        params: PagedParams,\r\n        product?: boolean\r\n    ) => RPromise<Paged<PreviewProduct | User>>\r\n    add: (id: number, product?: boolean) => RPromise\r\n    remove: (id: number, product?: boolean) => RPromise\r\n}\r\n\r\nconst FAVORITES_PATH = '/favorites'\r\nconst FAV_PRODUCTS_PATH = '/products'\r\nconst FAV_VENDORS_PATH = '/vendors'\r\n\r\nexport default class FavoritesAPI extends BaseAPI implements FavoriteService {\r\n    getForUser = (params: PagedParams, product: boolean = true) =>\r\n        this.get<Paged<PreviewProduct | User>>(this.u(product), params)\r\n\r\n    add = (id: number, product: boolean = true) =>\r\n        this.post(this.u(product), { id }, [HttpStatusCode.NotFound])\r\n\r\n    remove = (id: number, product: boolean = true) =>\r\n        this.delete(this.u(product), { id })\r\n\r\n    private u = (product: boolean) =>\r\n        `${FAVORITES_PATH}${product ? FAV_PRODUCTS_PATH : FAV_VENDORS_PATH}`\r\n}\r\n","import BaseAPI, { RPromise } from './BaseAPI'\r\n\r\nexport interface ResourceService {\r\n    load: (path: string) => RPromise<any>\r\n}\r\n\r\nexport default class ResourceAPI extends BaseAPI implements ResourceService {\r\n    load = (path: string) => {\r\n        return path.startsWith('http')\r\n            ? this.getImage(path)\r\n            : this.get<any>(`/${path}`, undefined, undefined, {\r\n                  responseType: 'blob',\r\n              })\r\n    }\r\n}\r\n","import BaseAPI, { RPromise } from './BaseAPI'\r\n\r\nimport { ProductReport } from '../types'\r\n\r\nimport { Paged, PagedParams } from './types'\r\n\r\nimport { HttpStatusCode } from '../utils'\r\n\r\nexport interface ProductReportService {\r\n    getFor: (\r\n        params: PagedParams & ReportSearch\r\n    ) => RPromise<Paged<ProductReport>>\r\n    report: (productId: number, reason: string) => RPromise\r\n    remove: (id: number) => RPromise\r\n}\r\n\r\ninterface ReportSearch {\r\n    productId?: number\r\n}\r\n\r\nconst REPORT_PATH = '/product/report'\r\n\r\nexport default class ProductReportAPI\r\n    extends BaseAPI\r\n    implements ProductReportService {\r\n    getFor = (params: PagedParams & ReportSearch) =>\r\n        this.get<Paged<ProductReport>>(REPORT_PATH, params)\r\n\r\n    report = (productId: number, reason: string) =>\r\n        this.post(REPORT_PATH, { productId, reason }, [HttpStatusCode.NotFound])\r\n\r\n    remove = (id: number) => this.delete(`${REPORT_PATH}/${id}`)\r\n}\r\n","import BaseAPI, { RPromise } from './BaseAPI'\r\n\r\nimport { Order } from '../types'\r\nimport { Paged, PagedParams } from './types'\r\nimport { HttpStatusCode } from '../utils'\r\n\r\nconst ORDERS_PATH = '/orders'\r\n\r\ninterface OrderListParams {\r\n    userId?: number\r\n}\r\n\r\nexport interface OrdersService {\r\n    getForUser: (\r\n        params: OrderListParams & PagedParams\r\n    ) => RPromise<Paged<Order>>\r\n}\r\n\r\nexport default class OrdersAPI extends BaseAPI implements OrdersService {\r\n    getForUser = (params: OrderListParams & PagedParams) =>\r\n        this.get<Paged<Order>>(ORDERS_PATH, params, [HttpStatusCode.NotFound])\r\n}\r\n","import BaseAPI, { FEEDBACK_API_URL } from './BaseAPI'\r\n\r\nimport { HttpStatusCode } from '../utils'\r\nimport { ActionType } from '../types'\r\n\r\nexport interface FeedbackService {\r\n    collect: (action: UserAction) => void\r\n}\r\n\r\ninterface UserAction {\r\n    item: number\r\n    action: ActionType\r\n}\r\n\r\nexport default class FeedbackAPI extends BaseAPI implements FeedbackService {\r\n    constructor() {\r\n        super(FEEDBACK_API_URL)\r\n    }\r\n\r\n    collect = async (action: UserAction) => {\r\n        try {\r\n            await this.post(`/record`, action, [\r\n                HttpStatusCode.ServerError,\r\n                HttpStatusCode.Unauthorized,\r\n            ])\r\n        } catch (ex) {}\r\n    }\r\n}\r\n","import BaseAPI, { RPromise } from './BaseAPI'\r\n\r\nimport { HttpStatusCode } from '../utils'\r\nimport { PreviewProduct } from '../types'\r\n\r\nexport interface RecommenderService {\r\n    getFor: (product?: number) => RPromise<PreviewProduct[]>\r\n    getPopular: () => RPromise<PreviewProduct[]>\r\n}\r\n\r\nexport default class RecommenderAPI\r\n    extends BaseAPI\r\n    implements RecommenderService {\r\n    getFor = (product?: number) =>\r\n        this.get<PreviewProduct[]>(`/recommended`, { product }, [\r\n            HttpStatusCode.ServerError,\r\n            HttpStatusCode.Unauthorized,\r\n        ])\r\n\r\n    getPopular = () =>\r\n        this.get<PreviewProduct[]>(`/popular`, {}, [\r\n            HttpStatusCode.ServerError,\r\n            HttpStatusCode.Unauthorized,\r\n        ])\r\n}\r\n","import React from 'react'\r\n\r\nimport { UserAPI, UserService } from '../api'\r\n\r\nexport const UserContext = React.createContext<UserService>(new UserAPI())\r\n\r\nconst useUserService = () => React.useContext(UserContext)\r\n\r\nexport default useUserService\r\n","import React from 'react'\r\n\r\nimport { ProductAPI, ProductService } from '../api'\r\n\r\nexport const ProductContext = React.createContext<ProductService>(\r\n    new ProductAPI()\r\n)\r\n\r\nconst useProductService = () => React.useContext(ProductContext)\r\n\r\nexport default useProductService\r\n","import React from 'react'\r\n\r\nimport { FavoriteAPI, FavoriteService } from '../api'\r\n\r\nexport const FavoriteContext = React.createContext<FavoriteService>(\r\n    new FavoriteAPI()\r\n)\r\n\r\nconst useFavoriteService = () => React.useContext(FavoriteContext)\r\n\r\nexport default useFavoriteService\r\n","import React from 'react'\r\n\r\nimport { CartAPI, CartService } from '../api'\r\n\r\nexport const CartContext = React.createContext<CartService>(new CartAPI())\r\n\r\nconst useCartService = () => React.useContext(CartContext)\r\n\r\nexport default useCartService\r\n","import React from 'react'\r\n\r\nimport { AuthService, AuthServiceImpl } from './AuthService'\r\nimport { SessionStorage, SessionStorageImpl } from './SessionStorage'\r\n\r\nexport type SessionService = AuthService & SessionStorage\r\n\r\nconst sessionStorage = SessionStorageImpl()\r\nconst authService = AuthServiceImpl(sessionStorage)\r\n\r\nexport const SessionContext = React.createContext<SessionService>({\r\n    ...authService,\r\n    ...sessionStorage,\r\n})\r\n\r\nconst useSessionService = () => React.useContext(SessionContext)\r\n\r\nexport default useSessionService\r\n","import { CartProduct, User } from '../../types'\r\nimport { Constants, SessionStorageManager } from '../../utils'\r\n\r\ntype SessionCallback = (session?: Session) => void\r\n\r\nexport interface SessionStorage {\r\n    current: () => Session | undefined\r\n    update: (token: string, user?: User) => void\r\n    clear: () => void\r\n    storedToken: () => string | null\r\n    isLogged: () => boolean\r\n    setCallback: (callback: SessionCallback) => void\r\n    shouldUpdateToken: (token?: string | null) => boolean\r\n    hasExpired: (token: string) => boolean\r\n}\r\n\r\nexport interface Session {\r\n    sessionId: string\r\n    userId?: number\r\n    username?: string\r\n    cart: CartProduct[]\r\n    admin: boolean\r\n}\r\n\r\nexport const SessionStorageImpl = () => {\r\n    let session: Session | undefined\r\n\r\n    let callback: SessionCallback | undefined\r\n\r\n    let cookies = new SessionStorageManager()\r\n\r\n    const current = () => session\r\n\r\n    const update = (token: string) => {\r\n        const decoded = decode(token)\r\n\r\n        if (decoded) {\r\n            const sessionId = decoded.sub\r\n            const userId = decoded.uid\r\n            const username = decoded.username\r\n            const cart = JSON.parse(decoded.cart ?? '[]')\r\n            const admin = decoded.r\r\n\r\n            if (!session) session = { sessionId, userId, username, cart, admin }\r\n            else {\r\n                session.sessionId = sessionId\r\n                session.userId = userId\r\n                session.username = username\r\n                session.cart = cart\r\n                session.admin = admin\r\n            }\r\n        }\r\n\r\n        cookies.storeToken(token)\r\n\r\n        if (callback) callback(session)\r\n    }\r\n\r\n    const isLogged = () => session?.userId !== undefined\r\n\r\n    const storedToken = () => cookies.readToken()\r\n\r\n    const shouldUpdateToken = (token?: string | null) =>\r\n        token\r\n            ? new Date().getTime() >\r\n              decode(token).exp * 1000 - Constants.SESSION_EXPIRE_DELAY\r\n            : true\r\n\r\n    const hasExpired = (token: string) =>\r\n        new Date().getTime() > decode(token).exp * 1000\r\n\r\n    const clear = () => {\r\n        cookies.remove()\r\n        session = undefined\r\n    }\r\n\r\n    const setCallback = (cb: SessionCallback) => {\r\n        callback = cb\r\n    }\r\n\r\n    const decode = (token: string): any => {\r\n        try {\r\n            return JSON.parse(atob(token.split('.')[1]))\r\n        } catch (error) {\r\n            return null\r\n        }\r\n    }\r\n\r\n    return {\r\n        current,\r\n        update,\r\n        clear,\r\n        storedToken,\r\n        isLogged,\r\n        setCallback,\r\n        shouldUpdateToken,\r\n        hasExpired,\r\n    }\r\n}\r\n","import { AuthAPI } from '../../api'\r\n\r\nimport { SessionStorage } from './SessionStorage'\r\n\r\nimport { AuthRequestInterceptor } from '../../utils'\r\n\r\nexport interface AuthService {\r\n    isAuth: () => boolean\r\n    auth: () => Promise<void>\r\n    logout: () => Promise<void>\r\n}\r\n\r\nexport const AuthServiceImpl = (sessionStorage: SessionStorage) => {\r\n    const interceptor = new AuthRequestInterceptor()\r\n\r\n    let isAuth = false\r\n\r\n    const api = new AuthAPI()\r\n\r\n    const auth = async () => {\r\n        let token = sessionStorage.storedToken()\r\n        let shouldUpdateToken = sessionStorage.shouldUpdateToken(token)\r\n\r\n        if (shouldUpdateToken) {\r\n            let res\r\n            if (token && !sessionStorage.hasExpired(token))\r\n                res = await api.reauth(interceptor.header(token))\r\n            else res = await api.auth()\r\n\r\n            if (res.status === 200) token = res.data\r\n        }\r\n\r\n        if (token) {\r\n            isAuth = true\r\n            interceptor.setup(token, onToken)\r\n            sessionStorage.update(token)\r\n        }\r\n    }\r\n\r\n    const logout = async () => {\r\n        interceptor.remove()\r\n        sessionStorage.clear()\r\n\r\n        await auth()\r\n    }\r\n\r\n    const onToken = (token: string) => {\r\n        sessionStorage.update(token)\r\n    }\r\n\r\n    return { isAuth: () => isAuth, auth, logout }\r\n}\r\n","import useSession, { SessionService } from './SessionService'\r\nimport { Session } from './SessionStorage'\r\n\r\nexport type { Session, SessionService }\r\n\r\nexport default useSession\r\n","import React from 'react'\r\n\r\nimport { ResourceAPI, ResourceService } from '../api'\r\n\r\nexport const ResourceContext = React.createContext<ResourceService>(new ResourceAPI())\r\n\r\nconst useResourceService = () => React.useContext(ResourceContext)\r\n\r\nexport default useResourceService\r\n","import React from 'react'\r\n\r\nimport { ProductReportAPI, ProductReportService } from '../api'\r\n\r\nexport const ProductReportContext = React.createContext<ProductReportService>(\r\n    new ProductReportAPI()\r\n)\r\n\r\nconst useProductReportService = () => React.useContext(ProductReportContext)\r\n\r\nexport default useProductReportService\r\n","import React from 'react'\r\n\r\nimport { OrdersAPI, OrdersService } from '../api'\r\n\r\nexport const OrdersContext = React.createContext<OrdersService>(new OrdersAPI())\r\n\r\nconst useOrdersService = () => React.useContext(OrdersContext)\r\n\r\nexport default useOrdersService\r\n","import React from 'react'\r\n\r\nimport { FeedbackAPI, FeedbackService } from '../api'\r\n\r\nexport const FeedbackContext = React.createContext<FeedbackService>(\r\n    new FeedbackAPI()\r\n)\r\n\r\nconst useFeedbackService = () => React.useContext(FeedbackContext)\r\n\r\nexport default useFeedbackService\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        form: {\r\n            margin: 'auto',\r\n            padding: theme.spacing(1),\r\n            display: 'flex',\r\n            maxWidth: 'calc(100% - 16px)',\r\n            width: '46ch',\r\n            flexDirection: 'column',\r\n            transform: 'translateY(-35%)',\r\n            [theme.breakpoints.down('sm')]: {\r\n                transform: 'translateY(-20%)',\r\n            },\r\n        },\r\n        buttons: {\r\n            marginTop: theme.spacing(1),\r\n            '& > button:last-child': {\r\n                marginLeft: theme.spacing(1),\r\n            },\r\n            gridTemplateColumns: '1fr 1fr',\r\n            display: 'grid',\r\n        },\r\n        input: {\r\n            margin: theme.spacing(1, 0),\r\n            width: '100%',\r\n            backgroundColor: theme.palette.background.paper,\r\n            borderRadius: 4,\r\n        },\r\n        header: {\r\n            margin: theme.spacing(4),\r\n            userSelect: 'none',\r\n        },\r\n        title: {\r\n            color: theme.palette.grey[800],\r\n            fontWeight: 'bold',\r\n        },\r\n        subtitle: {\r\n            color: theme.palette.grey[500],\r\n            fontWeight: 'lighter',\r\n        },\r\n    })\r\n)\r\n","import { fade, makeStyles, Theme, createStyles } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        toolbar: {\r\n            [theme.breakpoints.down('xs')]: {\r\n                padding: theme.spacing(0, 1, 0, 0.5),\r\n            },\r\n        },\r\n        logo: {\r\n            display: 'none',\r\n            cursor: 'pointer',\r\n            userSelect: 'none',\r\n            [theme.breakpoints.up('sm')]: {\r\n                display: 'block',\r\n            },\r\n        },\r\n        home: {\r\n            display: 'block',\r\n            [theme.breakpoints.up('sm')]: {\r\n                display: 'none',\r\n            },\r\n            userSelect: 'none',\r\n            transitionDuration: '.3s',\r\n            '&:hover': {\r\n                textShadow: '1px 1px 5px #00000088',\r\n            },\r\n            marginRight: theme.spacing(0.5),\r\n        },\r\n        searchContainer: {\r\n            width: '100%',\r\n        },\r\n        search: {\r\n            boxShadow: 'none',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            position: 'relative',\r\n            borderRadius: theme.shape.borderRadius,\r\n            color: 'white',\r\n            transition: theme.transitions.create('background'),\r\n            backgroundColor: fade(theme.palette.common.black, 0.2),\r\n            '&:hover': {\r\n                backgroundColor: fade(theme.palette.common.black, 0.3),\r\n            },\r\n            margin: 'auto',\r\n            width: '360px',\r\n            [theme.breakpoints.down('xs')]: {\r\n                marginLeft: theme.spacing(0),\r\n                width: '100%',\r\n            },\r\n        },\r\n        searchIcon: {\r\n            padding: theme.spacing(0, 2),\r\n            height: '100%',\r\n            position: 'absolute',\r\n            pointerEvents: 'none',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            color: 'white',\r\n        },\r\n        inputButton: {\r\n            padding: 10,\r\n            color: 'white',\r\n        },\r\n        inputRoot: {\r\n            color: 'inherit',\r\n            width: '100%',\r\n        },\r\n        inputInput: {\r\n            padding: theme.spacing(1, 1, 1, 0),\r\n            paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n        },\r\n        avatar: {\r\n            width: theme.spacing(4),\r\n            height: theme.spacing(4),\r\n        },\r\n        menuText: {\r\n            margin: theme.spacing(0, 2),\r\n        },\r\n        usernameMenu: {\r\n            fontWeight: 'bold',\r\n        },\r\n        divider: {\r\n            margin: theme.spacing(1, 0, 1, 0),\r\n        },\r\n        add: {\r\n            color: theme.palette.secondary.dark,\r\n        },\r\n    })\r\n)\r\n","import React from 'react'\r\n\r\nimport SvgIcon from '@material-ui/core/SvgIcon'\r\n\r\nconst LogoIcon = (props: any) => (\r\n    <SvgIcon width={512} height={512} viewBox=\"0 0 512 512\" {...props}>\r\n        <path\r\n            d=\"M304,128H16c-8.832,0-16,7.168-16,16v304c0,35.296,28.704,64,64,64h240c8.832,0,16-7.168,16-16V144  C320,135.168,312.832,128,304,128z\"\r\n            fill=\"#ffc107\"\r\n            data-original=\"#ffc107\"\r\n        />\r\n        <path\r\n            d=\"M496,256H240c-8.832,0-16,7.168-16,16v176c0,35.296,28.704,64,64,64h160c35.296,0,64-28.704,64-64  V272C512,263.168,504.832,256,496,256z\"\r\n            fill=\"#2196f3\"\r\n            data-original=\"#2196f3\"\r\n        />\r\n        <g>\r\n            <path\r\n                d=\"M240,192c-8.832,0-16-7.168-16-16V96c0-35.296-28.704-64-64-64S96,60.704,96,96v80   c0,8.832-7.168,16-16,16s-16-7.168-16-16V96c0-52.928,43.072-96,96-96s96,43.072,96,96v80C256,184.832,248.832,192,240,192z\"\r\n                fill=\"#455a64\"\r\n                data-original=\"#455a64\"\r\n            />\r\n            <path\r\n                d=\"M432,320c-8.832,0-16-7.168-16-16v-64c0-26.464-21.536-48-48-48s-48,21.536-48,48v64   c0,8.832-7.168,16-16,16s-16-7.168-16-16v-64c0-44.096,35.872-80,80-80s80,35.904,80,80v64C448,312.832,440.832,320,432,320z\"\r\n                fill=\"#455a64\"\r\n                data-original=\"#455a64\"\r\n            />\r\n        </g>\r\n    </SvgIcon>\r\n)\r\n\r\nexport default LogoIcon\r\n","import React from 'react'\r\n\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport InputBase from '@material-ui/core/InputBase'\r\nimport Badge from '@material-ui/core/Badge'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport Paper from '@material-ui/core/Paper'\r\n\r\nimport SearchIcon from '@material-ui/icons/Search'\r\nimport AccountCircle from '@material-ui/icons/AccountCircle'\r\nimport ShoppingBasket from '@material-ui/icons/ShoppingBasket'\r\nimport Favorite from '@material-ui/icons/Favorite'\r\nimport ExitToApp from '@material-ui/icons/ExitToApp'\r\nimport Add from '@material-ui/icons/Add'\r\nimport Person from '@material-ui/icons/Person'\r\nimport SignUp from '@material-ui/icons/HowToReg'\r\nimport ArrowForward from '@material-ui/icons/ArrowForward'\r\nimport GavelIcon from '@material-ui/icons/Gavel'\r\nimport ReportIcon from '@material-ui/icons/Report'\r\nimport HistoryIcon from '@material-ui/icons/History'\r\nimport HomeIcon from '@material-ui/icons/Home'\r\n\r\nimport { useStyles } from './NavigationBar.style'\r\nimport { useHistory } from 'react-router'\r\n\r\nimport { useSessionService } from '../../services'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport LogoIcon from './Logo'\r\nimport { useLocation } from 'react-router-dom'\r\n\r\nconst NavigationBar = () => {\r\n    const r = useLocation()\r\n\r\n    const sessionService = useSessionService()\r\n    const session = sessionService.current()\r\n\r\n    const classes = useStyles()\r\n    const history = useHistory()\r\n    const { t } = useTranslation()\r\n\r\n    const cartItems = session?.cart?.length\r\n    const username = session?.username\r\n    const logged = username !== undefined\r\n\r\n    const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null)\r\n    const [anchorAdmin, setAnchorAdmin] = React.useState<null | HTMLElement>(\r\n        null\r\n    )\r\n    const [searched, setSearched] = React.useState('')\r\n\r\n    const [over, setOver] = React.useState(true)\r\n\r\n    React.useEffect(() => {\r\n        setOver(r.pathname === '/')\r\n    }, [r.pathname])\r\n\r\n    const handleMenuClose = () => setAnchorEl(null)\r\n\r\n    const handleMenuOpen = (e: React.MouseEvent<HTMLElement>) => {\r\n        setAnchorEl(e.currentTarget)\r\n    }\r\n\r\n    const handleAdminMenuClose = () => setAnchorAdmin(null)\r\n\r\n    const handleAdminMenuOpen = (e: React.MouseEvent<HTMLElement>) => {\r\n        setAnchorAdmin(e.currentTarget)\r\n    }\r\n\r\n    const redirect = (path: string) => {\r\n        handleMenuClose()\r\n        handleAdminMenuClose()\r\n        history.push(path, undefined)\r\n    }\r\n\r\n    const onSearch = (e: any) => {\r\n        e.preventDefault()\r\n        if (searched.trim()) redirect(`/search/${searched}`)\r\n    }\r\n\r\n    const menuId = 'nav-account-menu'\r\n    const adminMenuId = 'nav-admin-menu'\r\n\r\n    const menuContent = (\r\n        <div>\r\n            <Typography color={'textSecondary'} className={classes.menuText}>\r\n                {t('nav.login_info')}\r\n            </Typography>\r\n            <MenuItem id=\"login-nav-bt\" onClick={() => redirect('/login')}>\r\n                <ListItemIcon color=\"inherit\">\r\n                    <Person />\r\n                </ListItemIcon>\r\n                {t('nav.login')}\r\n            </MenuItem>\r\n\r\n            <Typography color={'textSecondary'} className={classes.menuText}>\r\n                {t('nav.signup_info')}\r\n            </Typography>\r\n            <MenuItem id=\"signup-nav-bt\" onClick={() => redirect('/signup')}>\r\n                <ListItemIcon color=\"inherit\">\r\n                    <SignUp />\r\n                </ListItemIcon>\r\n                {t('nav.signup')}\r\n            </MenuItem>\r\n        </div>\r\n    )\r\n\r\n    const menuContentLogged = (\r\n        <div>\r\n            <MenuItem id=\"profile-nav-bt\" onClick={() => redirect('/profile')}>\r\n                <ListItemIcon aria-controls={menuId} color=\"inherit\">\r\n                    <AccountCircle fontSize=\"large\" />\r\n                </ListItemIcon>\r\n                <Typography className={classes.usernameMenu}>\r\n                    {username}\r\n                </Typography>\r\n            </MenuItem>\r\n\r\n            <Divider className={classes.divider} color={'transparent'} />\r\n\r\n            <MenuItem id=\"fav-nav-bt\" onClick={() => redirect('/favorites')}>\r\n                <ListItemIcon color=\"inherit\">\r\n                    <Favorite />\r\n                </ListItemIcon>\r\n                {t('nav.favorites')}\r\n            </MenuItem>\r\n\r\n            <MenuItem id=\"history-nav-bt\" onClick={() => redirect('/history')}>\r\n                <ListItemIcon color=\"inherit\">\r\n                    <HistoryIcon />\r\n                </ListItemIcon>\r\n                {t('nav.history')}\r\n            </MenuItem>\r\n\r\n            <MenuItem\r\n                id=\"upload-nav-bt\"\r\n                onClick={() => redirect('/product/publish')}\r\n                className={classes.add}\r\n            >\r\n                <ListItemIcon color=\"inherit\">\r\n                    <Add className={classes.add} />\r\n                </ListItemIcon>\r\n                {t('nav.upload')}\r\n            </MenuItem>\r\n\r\n            <Divider className={classes.divider} light />\r\n\r\n            <MenuItem id=\"logout-nav-bt\" onClick={() => redirect('/logout')}>\r\n                <ListItemIcon color=\"inherit\">\r\n                    <ExitToApp />\r\n                </ListItemIcon>\r\n                {t('nav.logout')}\r\n            </MenuItem>\r\n        </div>\r\n    )\r\n\r\n    const renderMenu = (\r\n        <Menu\r\n            anchorEl={anchorEl}\r\n            anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n            id={menuId}\r\n            keepMounted\r\n            transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n            open={Boolean(anchorEl)}\r\n            onClose={handleMenuClose}\r\n        >\r\n            {logged ? menuContentLogged : menuContent}\r\n        </Menu>\r\n    )\r\n\r\n    const adminMenu = (\r\n        <Menu\r\n            anchorEl={anchorAdmin}\r\n            anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n            id={adminMenuId}\r\n            keepMounted\r\n            transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n            open={Boolean(anchorAdmin)}\r\n            onClose={handleAdminMenuClose}\r\n        >\r\n            <MenuItem onClick={() => redirect('/reports')}>\r\n                <ListItemIcon color=\"inherit\">\r\n                    <ReportIcon />\r\n                </ListItemIcon>\r\n                {t('nav.admin.reports')}\r\n            </MenuItem>\r\n        </Menu>\r\n    )\r\n\r\n    return (\r\n        <div>\r\n            <AppBar\r\n                position={over ? 'absolute' : 'static'}\r\n                elevation={0}\r\n                color={over ? 'transparent' : undefined}\r\n            >\r\n                <Toolbar variant={'dense'} className={classes.toolbar}>\r\n                    <LogoIcon\r\n                        fontSize=\"large\"\r\n                        className={classes.logo}\r\n                        onClick={() => redirect('/')}\r\n                    />\r\n\r\n                    <IconButton\r\n                        color=\"inherit\"\r\n                        className={classes.home}\r\n                        onClick={() => redirect('/')}\r\n                    >\r\n                        <HomeIcon />\r\n                    </IconButton>\r\n\r\n                    <div className={classes.searchContainer}>\r\n                        <Paper\r\n                            component=\"form\"\r\n                            onSubmit={onSearch}\r\n                            className={classes.search}\r\n                        >\r\n                            <div className={classes.searchIcon}>\r\n                                <SearchIcon />\r\n                            </div>\r\n                            <InputBase\r\n                                id=\"search-input\"\r\n                                placeholder={t('nav.search')}\r\n                                classes={{\r\n                                    root: classes.inputRoot,\r\n                                    input: classes.inputInput,\r\n                                }}\r\n                                value={searched}\r\n                                inputProps={{ 'aria-label': 'search' }}\r\n                                onChange={(e) => setSearched(e.target.value)}\r\n                            />\r\n                            <IconButton\r\n                                type=\"submit\"\r\n                                className={classes.inputButton}\r\n                                aria-label=\"search\"\r\n                            >\r\n                                <ArrowForward />\r\n                            </IconButton>\r\n                        </Paper>\r\n                    </div>\r\n\r\n                    <div />\r\n\r\n                    {session?.admin && (\r\n                        <IconButton\r\n                            onClick={handleAdminMenuOpen}\r\n                            color=\"inherit\"\r\n                        >\r\n                            <GavelIcon />\r\n                        </IconButton>\r\n                    )}\r\n\r\n                    <IconButton\r\n                        id=\"cart-nav-bt\"\r\n                        onClick={() => redirect('/cart')}\r\n                        color=\"inherit\"\r\n                    >\r\n                        <Badge badgeContent={cartItems} color=\"secondary\">\r\n                            <ShoppingBasket />\r\n                        </Badge>\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                        edge=\"end\"\r\n                        id=\"user-nav\"\r\n                        onClick={handleMenuOpen}\r\n                        color=\"inherit\"\r\n                    >\r\n                        {logged ? (\r\n                            <Avatar className={classes.avatar}>\r\n                                {username?.substring(0, 2)}\r\n                            </Avatar>\r\n                        ) : (\r\n                            <AccountCircle fontSize=\"large\" />\r\n                        )}\r\n                    </IconButton>\r\n                </Toolbar>\r\n            </AppBar>\r\n            {renderMenu}\r\n            {adminMenu}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NavigationBar\r\n","import NavigationBarWrapper from './NavigationBarWrapper'\r\n\r\nexport default NavigationBarWrapper\r\n","import React from 'react'\r\n\r\nimport { Session, SessionService } from '../../services'\r\n\r\nimport NavigationBar from './NavigationBar'\r\n\r\ninterface NavigationBarWrapperProps {\r\n    sessionService: SessionService\r\n}\r\n\r\ninterface NavigationBarWrapperState {\r\n    session?: Session\r\n}\r\n\r\nexport default class NavigationBarWrapper extends React.Component<\r\n    NavigationBarWrapperProps,\r\n    NavigationBarWrapperState\r\n> {\r\n    constructor(props: any) {\r\n        super(props)\r\n        this.state = { session: undefined }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const getSession = async () => {\r\n            this.setState({\r\n                ...this.state,\r\n                session: this.props.sessionService.current(),\r\n            })\r\n        }\r\n\r\n        this.props.sessionService.setCallback((s) =>\r\n            this.setState({ ...this.state, session: s })\r\n        )\r\n\r\n        getSession()\r\n    }\r\n\r\n    render() {\r\n        return <NavigationBar />\r\n    }\r\n}\r\n","import { makeStyles, Theme, createStyles } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        container: {\r\n            minWidth: 220,\r\n            height: 270,\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            position: 'relative',\r\n            margin: theme.spacing(0, 2, 2, 0),\r\n        },\r\n        media: {\r\n            height: '100%',\r\n            backgroundRepeat: 'no-repeat',\r\n            backgroundSize: 'cover',\r\n            backgroundColor: theme.palette.grey[100],\r\n        },\r\n        actions: {\r\n            height: 40,\r\n            zIndex: 1,\r\n            background:\r\n                'linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)',\r\n            position: 'absolute',\r\n            bottom: 0,\r\n            padding: theme.spacing(1),\r\n        },\r\n        topActions: {\r\n            zIndex: 1,\r\n            position: 'absolute',\r\n            backgroundColor: '#00000044',\r\n            margin: theme.spacing(1),\r\n            borderRadius: theme.spacing(2),\r\n            padding: theme.spacing(0, 0.1),\r\n        },\r\n        chip: {\r\n            '& > span': {\r\n                color: theme.palette.grey[50],\r\n                fontSize: 15,\r\n                fontWeight: 'bold',\r\n                textShadow: '.5px .5px .5px #00000088',\r\n            },\r\n            position: 'absolute',\r\n            top: 0,\r\n            right: 0,\r\n            zIndex: 1,\r\n            height: 30,\r\n            margin: theme.spacing(1),\r\n        },\r\n        product: {\r\n            height: '100%',\r\n        },\r\n        title: {\r\n            marginLeft: 'auto',\r\n            fontWeight: 'bold',\r\n            color: theme.palette.grey[50],\r\n            fontSize: 15,\r\n            textShadow: '.5px .5px .5px #00000088',\r\n            maxHeight: 45,\r\n            textOverflow: 'ellipsis',\r\n            overflow: 'hidden',\r\n        },\r\n    })\r\n)\r\n","import React from 'react'\r\n\r\nimport { ActionType, PreviewProduct } from '../../types'\r\n\r\nimport { useStyles } from './Product.style'\r\n\r\nimport Card from '@material-ui/core/Card'\r\nimport CardMedia from '@material-ui/core/CardMedia'\r\nimport Chip from '@material-ui/core/Chip'\r\nimport CardActionArea from '@material-ui/core/CardActionArea'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport FavoriteBorder from '@material-ui/icons/FavoriteBorder'\r\nimport Favorite from '@material-ui/icons/Favorite'\r\nimport ShoppingBasket from '@material-ui/icons/ShoppingBasketOutlined'\r\n\r\nimport { useHistory } from 'react-router'\r\nimport { useTheme } from '@material-ui/core'\r\nimport { CartService, FavoriteService, ResourceService } from '../../api'\r\nimport { HttpStatusCode, Constants } from '../../utils'\r\nimport { useFeedbackService } from '../../services'\r\n\r\ninterface ProductProps {\r\n    Actions?: React.FC<ProductActionsProps>\r\n}\r\n\r\ninterface ProductActionsProps {\r\n    product: PreviewProduct\r\n    favService?: FavoriteService\r\n    cartService?: CartService\r\n    resources?: ResourceService\r\n    noFav?: boolean\r\n    noCart?: boolean\r\n}\r\n\r\nconst DefaultActions: React.FC<ProductActionsProps> = ({\r\n    product,\r\n    favService,\r\n    cartService,\r\n    noFav = false,\r\n    noCart = false,\r\n}) => {\r\n    const theme = useTheme()\r\n\r\n    const [favorite, setFavorite] = React.useState(product.fav === true)\r\n\r\n    const addToCart = (e: any) => {\r\n        e.stopPropagation()\r\n        cartService!!.update({\r\n            productId: product.id,\r\n            amount: 1,\r\n            add: true,\r\n        })\r\n    }\r\n\r\n    const addToFav = async (e: any) => {\r\n        e.stopPropagation()\r\n\r\n        const r = await (favorite\r\n            ? favService!!.remove(product.id)\r\n            : favService!!.add(product.id))\r\n\r\n        if (r.status !== HttpStatusCode.OK) return\r\n\r\n        setFavorite(!favorite)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {!noFav && (\r\n                <IconButton\r\n                    className={'holder-fav-bt'}\r\n                    size={'small'}\r\n                    onClick={addToFav}\r\n                >\r\n                    {favorite ? (\r\n                        <Favorite htmlColor={theme.palette.error.main} />\r\n                    ) : (\r\n                        <FavoriteBorder\r\n                            htmlColor={theme.palette.common.white}\r\n                        />\r\n                    )}\r\n                </IconButton>\r\n            )}\r\n            {!noCart && (\r\n                <IconButton\r\n                    size={'small'}\r\n                    disabled={!product.stock}\r\n                    onClick={addToCart}\r\n                >\r\n                    <ShoppingBasket\r\n                        htmlColor={\r\n                            product.stock\r\n                                ? theme.palette.common.white\r\n                                : theme.palette.error.light\r\n                        }\r\n                    />\r\n                </IconButton>\r\n            )}\r\n        </>\r\n    )\r\n}\r\n\r\nconst ProductHolder: React.FC<ProductProps & ProductActionsProps> = ({\r\n    product,\r\n    Actions = DefaultActions,\r\n    favService,\r\n    cartService,\r\n    resources,\r\n    noFav = false,\r\n    noCart = false,\r\n}) => {\r\n    const history = useHistory()\r\n\r\n    const classes = useStyles()\r\n\r\n    const feedbackService = useFeedbackService()\r\n\r\n    const [img, setImg] = React.useState<any>()\r\n\r\n    const gotoProduct = () => {\r\n        feedbackService.collect({\r\n            item: product.id,\r\n            action: ActionType.CLICK,\r\n        })\r\n\r\n        history.push(`/product/${product.id}`, undefined)\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const loadImage = async () => {\r\n            try {\r\n                const r = await resources!!.load(product.mainImage)\r\n\r\n                if (r.status !== HttpStatusCode.OK) return\r\n\r\n                const reader = new FileReader()\r\n                reader.readAsDataURL(r.data)\r\n                reader.onload = () => setImg(reader.result)\r\n            } catch (ex) {}\r\n        }\r\n\r\n        if (product.mainImage) loadImage()\r\n    }, [product, resources])\r\n\r\n    return (\r\n        <Card className={classes.container}>\r\n            <div className={classes.topActions}>\r\n                <Actions\r\n                    {...{\r\n                        product,\r\n                        favService,\r\n                        cartService,\r\n                        noFav,\r\n                        noCart,\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            <Chip\r\n                style={{ backgroundColor: '#00000044' }}\r\n                label={`${product.price}`}\r\n                className={classes.chip}\r\n            />\r\n\r\n            <CardActionArea className={classes.product} onClick={gotoProduct}>\r\n                <CardMedia\r\n                    className={classes.media}\r\n                    image={img ?? Constants.FALLBACK_IMAGE}\r\n                />\r\n            </CardActionArea>\r\n\r\n            <div className={classes.actions}>\r\n                <Typography className={classes.title}>\r\n                    {product.name}\r\n                </Typography>\r\n            </div>\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default ProductHolder\r\n","import Product from './Product'\r\n\r\nexport default Product","import { makeStyles, Theme, createStyles } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        container: {\r\n            minWidth: 220,\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            margin: theme.spacing(0, 2, 2, 0),\r\n        },\r\n        actions: {\r\n            marginTop: theme.spacing(1),\r\n            display: 'flex',\r\n            padding: theme.spacing(1),\r\n            alignItems: 'center',\r\n        },\r\n        username: {\r\n            marginLeft: 'auto',\r\n            fontWeight: 'bold',\r\n            cursor: 'pointer',\r\n        },\r\n        button: {\r\n            padding: 6,\r\n        },\r\n        avatar: {\r\n            margin: 'auto',\r\n            marginTop: theme.spacing(1),\r\n            marginBottom: theme.spacing(1),\r\n            height: theme.spacing(24),\r\n            width: theme.spacing(24),\r\n            fontSize: '3em',\r\n            '& img': {\r\n                display: 'block',\r\n                width: '100%',\r\n            },\r\n        },\r\n    })\r\n)\r\n","import React from 'react'\r\n\r\nimport { User } from '../../types'\r\n\r\nimport { useStyles } from './UserHolder.style'\r\n\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport FavoriteBorder from '@material-ui/icons/FavoriteBorder'\r\nimport Favorite from '@material-ui/icons/Favorite'\r\n\r\nimport { useHistory } from 'react-router'\r\nimport { useTheme } from '@material-ui/core'\r\nimport { FavoriteService, ResourceService } from '../../api'\r\nimport { HttpStatusCode } from '../../utils'\r\n\r\ninterface ProductProps {\r\n    Actions?: React.FC<UserActionsProps>\r\n}\r\n\r\ninterface UserActionsProps {\r\n    user: User\r\n    favService?: FavoriteService\r\n    resources?: ResourceService\r\n}\r\n\r\nconst DefaultActions: React.FC<UserActionsProps> = ({ user, favService }) => {\r\n    const theme = useTheme()\r\n\r\n    const [favorite, setFavorite] = React.useState(true)\r\n\r\n    const addToFav = async (e: any) => {\r\n        e.stopPropagation()\r\n\r\n        const r = await (favorite\r\n            ? favService!!.remove(user.id, false)\r\n            : favService!!.add(user.id, false))\r\n\r\n        if (r.status !== HttpStatusCode.OK) return\r\n\r\n        setFavorite(!favorite)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <IconButton size={'small'} onClick={addToFav}>\r\n                {favorite ? (\r\n                    <Favorite htmlColor={theme.palette.error.main} />\r\n                ) : (\r\n                    <FavoriteBorder />\r\n                )}\r\n            </IconButton>\r\n        </>\r\n    )\r\n}\r\n\r\nconst UserHolder: React.FC<ProductProps & UserActionsProps> = ({\r\n    user,\r\n    Actions = DefaultActions,\r\n    favService,\r\n    resources,\r\n}) => {\r\n    const history = useHistory()\r\n\r\n    const classes = useStyles()\r\n\r\n    const [img, setImg] = React.useState<any>()\r\n\r\n    const gotoProfile = () => history.push(`/vendor/${user.id}`, undefined)\r\n\r\n    React.useEffect(() => {\r\n        const loadImage = async () => {\r\n            const r = await resources!!.load(user.profileImgUri!!)\r\n\r\n            if (r.status !== HttpStatusCode.OK) return\r\n\r\n            setImg(URL.createObjectURL(r.data))\r\n        }\r\n\r\n        if (user.profileImgUri) loadImage()\r\n    }, [user, resources])\r\n\r\n    return (\r\n        <div className={classes.container}>\r\n            <IconButton onClick={gotoProfile} className={classes.button}>\r\n                <Avatar className={classes.avatar} src={img}>\r\n                    {user?.nickname?.substring(0, 2)}\r\n                </Avatar>\r\n            </IconButton>\r\n            <Paper className={classes.actions}>\r\n                <Actions {...{ user, favService }} />\r\n                <Typography className={classes.username} onClick={gotoProfile}>\r\n                    {user.nickname}\r\n                </Typography>\r\n            </Paper>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserHolder\r\n","import UserHolder from './UserHolder'\r\n\r\nexport default UserHolder","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n        },\r\n        container: {\r\n            display: 'grid',\r\n            gridTemplateColumns: 'repeat(1, 300px)',\r\n            [theme.breakpoints.up(490)]: {\r\n                gridTemplateColumns: 'repeat(2, 1fr)',\r\n            },\r\n            [theme.breakpoints.up(730)]: {\r\n                gridTemplateColumns: 'repeat(3, 1fr)',\r\n            },\r\n            [theme.breakpoints.up('md')]: {\r\n                gridTemplateColumns: 'repeat(4, 1fr)',\r\n            },\r\n            [theme.breakpoints.up('lg')]: {\r\n                gridTemplateColumns: 'repeat(5, 1fr)',\r\n            },\r\n            [theme.breakpoints.up(1600)]: {\r\n                gridTemplateColumns: 'repeat(6, 1fr)',\r\n            },\r\n            margin: theme.spacing(0, 0, 1, 2),\r\n        },\r\n        pagger: {\r\n            margin: theme.spacing(2),\r\n        },\r\n    })\r\n)\r\n","import React from 'react'\r\n\r\nimport { HttpStatusCode } from '../../utils'\r\n\r\nimport Pagination from '@material-ui/lab/Pagination'\r\nimport { Paged } from '../../api/types'\r\nimport { RPromise } from '../../api/BaseAPI'\r\n\r\nimport { ContentWarn, Loading } from '..'\r\n\r\nimport SearchIcon from '@material-ui/icons/Search'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport { useHistory, useLocation } from 'react-router'\r\nimport { useStyles } from './PageContainer.style'\r\n\r\ninterface PageContainerProps<T> {\r\n    request: (page: number) => RPromise<Paged<T>>\r\n    itemRender: (item: T, index: number) => React.ReactNode\r\n    EmptyComponent?: React.FC\r\n    setShownItems: (loaded?: Paged<T>) => void\r\n    deps?: any[]\r\n    ContainerComponent?: React.FC\r\n}\r\n\r\nconst NoResults = () => {\r\n    const { t } = useTranslation()\r\n    return (\r\n        <ContentWarn>\r\n            <SearchIcon />\r\n            <Typography>{t('search.no_results')}</Typography>\r\n        </ContentWarn>\r\n    )\r\n}\r\n\r\nfunction PageContainer<T>({\r\n    request,\r\n    itemRender,\r\n    EmptyComponent,\r\n    setShownItems,\r\n    deps = [],\r\n    ContainerComponent,\r\n}: PageContainerProps<T>) {\r\n    const location = useLocation()\r\n    const history = useHistory()\r\n\r\n    const page = (location as any)?.state?.page ?? 1\r\n\r\n    const [items, setItems] = React.useState<T[]>()\r\n    const [pages, setPages] = React.useState(0)\r\n\r\n    const classes = useStyles()\r\n\r\n    const handlePageChange = (e: React.ChangeEvent<unknown>, page: number) => {\r\n        history.push(\r\n            location.pathname,\r\n            !location.state ? { page } : { ...(location.state as any), page }\r\n        )\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const fetchRequest = async () => {\r\n            setItems(undefined)\r\n            setShownItems(undefined)\r\n\r\n            const r = await request(page - 1)\r\n\r\n            if (r.status !== HttpStatusCode.OK) return\r\n\r\n            handleData(r.data)\r\n        }\r\n\r\n        const handleData = (data: Paged<T>) => {\r\n            setItems(data.items)\r\n            setShownItems(data)\r\n            const pageCount = Math.ceil(data.total / data.pageSize)\r\n            setPages(pageCount)\r\n        }\r\n\r\n        fetchRequest()\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [setShownItems, page, ...deps])\r\n\r\n    const Empty = EmptyComponent ? <EmptyComponent /> : <NoResults />\r\n    const Container: React.FC = ({ children }) =>\r\n        ContainerComponent ? (\r\n            <ContainerComponent>{children}</ContainerComponent>\r\n        ) : (\r\n            <div className={classes.container}>{children}</div>\r\n        )\r\n\r\n    return items === undefined ? (\r\n        <Loading />\r\n    ) : items.length ? (\r\n        <div className={classes.root}>\r\n            <Container>\r\n                {items.map((p, i: number) => itemRender(p, i))}\r\n            </Container>\r\n            {pages > 1 && (\r\n                <Pagination\r\n                    className={classes.pagger}\r\n                    count={pages}\r\n                    page={page}\r\n                    onChange={handlePageChange}\r\n                    hideNextButton\r\n                    hidePrevButton\r\n                    showFirstButton\r\n                    showLastButton\r\n                />\r\n            )}\r\n        </div>\r\n    ) : (\r\n        Empty\r\n    )\r\n}\r\n\r\nexport default PageContainer\r\n","import PageContainer from './PageContainer'\r\n\r\nexport default PageContainer\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            flexWrap: 'nowrap',\r\n            overflowX: 'auto',\r\n            margin: theme.spacing(2, 'auto', 0, 'auto'),\r\n            padding: theme.spacing(0, 0, 0, 2),\r\n            maxWidth: 1800,\r\n            minHeight: 220,\r\n            scrollbarWidth: 'none',\r\n            '&::-webkit-scrollbar': {\r\n                display: 'none',\r\n            },\r\n        },\r\n        endGap: {\r\n            minWidth: 1,\r\n        },\r\n    })\r\n)\r\n","import React from 'react'\r\n\r\nimport { ContentWarn, ProductHolder } from '..'\r\nimport { FavoriteService, ProductService } from '../../api'\r\nimport { useResourceService } from '../../services'\r\n\r\nimport { PreviewProduct } from '../../types'\r\nimport { useStyles } from './ProductSlider.style'\r\n\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\ninterface ProductSliderProps {\r\n    products: PreviewProduct[]\r\n    favService: FavoriteService\r\n    productService: ProductService\r\n}\r\n\r\nconst ProductSlider: React.FC<ProductSliderProps> = ({ products, ...rest }) => {\r\n    const classes = useStyles()\r\n    const resources = useResourceService()\r\n\r\n    const { t } = useTranslation()\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            {products.length > 0 ? (\r\n                products.map((p, i) => (\r\n                    <ProductHolder\r\n                        key={i}\r\n                        product={p}\r\n                        {...{ resources, ...rest }}\r\n                    />\r\n                ))\r\n            ) : (\r\n                <ContentWarn>\r\n                    <Typography>{t('info.no_articles')}</Typography>\r\n                </ContentWarn>\r\n            )}\r\n            <div className={classes.endGap} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProductSlider\r\n","import ProductSlider from './ProductSlider'\r\n\r\nexport default ProductSlider\r\n","import React from 'react'\r\n\r\nimport { ResourceService } from '../../api'\r\nimport { Constants, HttpStatusCode } from '../../utils'\r\n\r\nconst ProductImg: React.FC<\r\n    any & {\r\n        fallback?: string\r\n        url?: string\r\n        resources?: ResourceService\r\n        setSelectedImg?: any\r\n        selectedImgUrl?: string\r\n    }\r\n> = ({\r\n    fallback = Constants.FALLBACK_IMAGE,\r\n    src,\r\n    alt,\r\n    url,\r\n    resources,\r\n    selectedImgUrl,\r\n    setSelectedImg,\r\n    ...rest\r\n}) => {\r\n    const [img, setImg] = React.useState<any>()\r\n\r\n    React.useEffect(() => {\r\n        const load = async () => {\r\n            try {\r\n                const r = await resources.load(url)\r\n\r\n                if (r.status !== HttpStatusCode.OK) return\r\n\r\n                setImg(URL.createObjectURL(r.data))\r\n            } catch (ex) {}\r\n        }\r\n\r\n        if (resources && url) load()\r\n    }, [resources, url])\r\n\r\n    React.useEffect(() => {\r\n        if (selectedImgUrl && resources && selectedImgUrl === url)\r\n            setSelectedImg(img)\r\n    }, [resources, selectedImgUrl, url, setSelectedImg, img])\r\n\r\n    return (\r\n        <picture>\r\n            <source srcSet={src ?? (url ? img : undefined)} />\r\n            <source srcSet={fallback} />\r\n            <img alt={alt} {...rest} />\r\n        </picture>\r\n    )\r\n}\r\n\r\nexport default ProductImg\r\n","import ProductImg from './ProductImg'\r\n\r\nexport default ProductImg\r\n","import React from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\nimport { useProductReportService } from '../../services'\r\nimport { Product } from '../../types'\r\nimport { HttpStatusCode, ValidationTools } from '../../utils'\r\n\r\ninterface ReportDialogProps {\r\n    product: Product\r\n    open: boolean\r\n    setOpen: (open: boolean) => void\r\n}\r\n\r\nconst ReportDialog: React.FC<ReportDialogProps> = ({\r\n    product,\r\n    open,\r\n    setOpen,\r\n}) => {\r\n    const { t } = useTranslation()\r\n\r\n    const reportService = useProductReportService()\r\n\r\n    const [reason, setReason] = React.useState('')\r\n    const [errors, setErrors] = React.useState<any>({})\r\n\r\n    const handleClose = () => {\r\n        setReason('')\r\n        setErrors({})\r\n        setOpen(false)\r\n    }\r\n\r\n    const handleReport = async () => {\r\n        const r = await reportService.report(product.id, reason)\r\n        switch (r.status) {\r\n            case HttpStatusCode.OK:\r\n            case HttpStatusCode.NoContent:\r\n            case HttpStatusCode.NotFound:\r\n                break\r\n            case HttpStatusCode.BadRequest:\r\n                setErrors((r.data as any).error)\r\n                return\r\n        }\r\n\r\n        handleClose()\r\n    }\r\n\r\n    const { errorFor, helperFor } = ValidationTools.createValidator(t, errors)\r\n\r\n    return (\r\n        <Dialog\r\n            open={open}\r\n            onClose={handleClose}\r\n            aria-labelledby=\"form-dialog-title\"\r\n            aria-describedby=\"form-dialog-description\"\r\n        >\r\n            <DialogTitle id=\"form-dialog-title\">\r\n                {t('product.report.title')}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <DialogContentText id=\"form-dialog-description\">\r\n                    {t('product.report.body')}\r\n                </DialogContentText>\r\n                <TextField\r\n                    autoFocus\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                    id=\"name\"\r\n                    label={t('product.report.placeholder')}\r\n                    fullWidth\r\n                    multiline\r\n                    onChange={(e) => setReason(e.target.value)}\r\n                    value={reason}\r\n                    error={errorFor('reason')}\r\n                    helperText={helperFor('reason')}\r\n                    rows={3}\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={handleClose} color=\"primary\">\r\n                    {t('cancel')}\r\n                </Button>\r\n                <Button onClick={handleReport} color=\"primary\">\r\n                    {t('product.report.button')}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default ReportDialog\r\n","import ReportDialog from './ReportDialog'\r\n\r\nexport default ReportDialog\r\n","import PasswordField from './PasswordField'\r\n\r\nexport default PasswordField\r\n","import React from 'react'\r\n\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport FormControl, { FormControlProps } from '@material-ui/core/FormControl'\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput'\r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Visibility from '@material-ui/icons/Visibility'\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff'\r\n\r\ninterface PasswordFieldProps {\r\n    password: string\r\n    setPassword: (password: string) => any\r\n    label: string\r\n    helperText?: string\r\n    name?: string\r\n}\r\n\r\nconst PasswordField: React.FC<PasswordFieldProps & FormControlProps> = ({\r\n    password,\r\n    setPassword,\r\n    label,\r\n    helperText,\r\n    name,\r\n    ...rest\r\n}) => {\r\n    const [showPassword, setShowPassword] = React.useState(false)\r\n\r\n    const handleClickShowPassword = () => setShowPassword(!showPassword)\r\n\r\n    const handleMouseDownPassword = (e: React.MouseEvent<HTMLButtonElement>) =>\r\n        e.preventDefault()\r\n\r\n    const i = Math.floor(Math.random() * 100000)\r\n\r\n    return (\r\n        <FormControl variant=\"outlined\" {...rest}>\r\n            <InputLabel htmlFor={`password-field-${i}`}>{label}</InputLabel>\r\n            <OutlinedInput\r\n                id={`password-field-${i}`}\r\n                type={showPassword ? 'text' : 'password'}\r\n                value={password}\r\n                name={name}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                endAdornment={\r\n                    <InputAdornment position=\"end\">\r\n                        <IconButton\r\n                            onClick={handleClickShowPassword}\r\n                            onMouseDown={handleMouseDownPassword}\r\n                            edge=\"end\"\r\n                        >\r\n                            {showPassword ? <Visibility /> : <VisibilityOff />}\r\n                        </IconButton>\r\n                    </InputAdornment>\r\n                }\r\n                labelWidth={label.length * 9}\r\n            />\r\n            {helperText && <FormHelperText>{helperText}</FormHelperText>}\r\n        </FormControl>\r\n    )\r\n}\r\n\r\nexport default PasswordField\r\n","import React from 'react'\r\n\r\ninterface ErrorHandlerProps {\r\n    children: React.ReactNode\r\n}\r\n\r\nexport default class ErrorHandler extends React.Component<ErrorHandlerProps> {\r\n    componentDidCatch(error: any, info: any) {\r\n    }\r\n\r\n    render() {\r\n        return this.props.children\r\n    }\r\n}\r\n","import CircularProgressIndicator from './CircularProgressIndicator'\r\n\r\nexport default CircularProgressIndicator\r\n","import React from 'react'\r\n\r\nimport Box from '@material-ui/core/Box'\r\nimport CircularProgress, {\r\n    CircularProgressProps,\r\n} from '@material-ui/core/CircularProgress'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nconst CircularProgressIndicator = (\r\n    props: CircularProgressProps & { value: number }\r\n) => {\r\n    return (\r\n        <Box position=\"relative\" display=\"inline-flex\">\r\n            <CircularProgress color=\"inherit\" variant=\"determinate\" {...props} />\r\n            <Box\r\n                top={0}\r\n                left={0}\r\n                bottom={0}\r\n                right={0}\r\n                position=\"absolute\"\r\n                display=\"flex\"\r\n                alignItems=\"center\"\r\n                justifyContent=\"center\"\r\n            >\r\n                <Typography\r\n                    variant=\"caption\"\r\n                    component=\"div\"\r\n                    color=\"inherit\"\r\n                >{`${Math.round(props.value)}%`}</Typography>\r\n            </Box>\r\n        </Box>\r\n    )\r\n}\r\n\r\nexport default CircularProgressIndicator\r\n","import React from 'react'\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar'\r\nimport MuiAlert, { AlertProps } from '@material-ui/lab/Alert'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\nimport { HttpStatusCode } from '../../../utils'\r\n\r\ninterface ErrorAlertProps {\r\n    error: number | undefined\r\n    setOpen: (open: boolean) => void\r\n    open: boolean\r\n}\r\n\r\nconst Alert = (props: AlertProps) => {\r\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />\r\n}\r\n\r\nconst knownErrors: (number | undefined)[] = [\r\n    HttpStatusCode.Unauthorized,\r\n    HttpStatusCode.ServerError,\r\n]\r\n\r\nconst ErrorAlert: React.FC<ErrorAlertProps> = ({ error, open, setOpen }) => {\r\n    const { t } = useTranslation()\r\n\r\n    const handleClose = (e?: React.SyntheticEvent, reason?: string) => {\r\n        if (reason === 'clickaway') return\r\n\r\n        setOpen(false)\r\n    }\r\n\r\n    const msg = knownErrors.includes(error)\r\n        ? t(`error.${error}.text`)\r\n        : t(`error.other.text`)\r\n\r\n    return (\r\n        <Snackbar open={open} autoHideDuration={6000} onClose={handleClose}>\r\n            <Alert severity=\"error\">{msg}</Alert>\r\n        </Snackbar>\r\n    )\r\n}\r\n\r\nexport default ErrorAlert\r\n","import ErrorWrapperClass from './ErrorWrapperClass'\r\n\r\nexport default ErrorWrapperClass\r\n","import React from 'react'\r\n\r\nimport ErrorAlert from './ErrorAlert'\r\n\r\nimport { ServerErrorHandlerListener } from '../../../utils'\r\n\r\ninterface ErrorWrapperClassProps {\r\n    serverErrorHandler: ServerErrorHandlerListener\r\n}\r\n\r\ninterface ErrorWrapperClassState {\r\n    error?: number\r\n    open: boolean\r\n}\r\n\r\nexport default class ErrorWrapperClass extends React.Component<\r\n    ErrorWrapperClassProps,\r\n    ErrorWrapperClassState\r\n> {\r\n    constructor(props: any) {\r\n        super(props)\r\n        this.state = { error: undefined, open: false }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.serverErrorHandler.setCallback((code) =>\r\n            this.setState({ error: code, open: true })\r\n        )\r\n    }\r\n\r\n    setOpen(open: boolean) {\r\n        this.setState({ ...this.state, open })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ErrorAlert\r\n                {...{\r\n                    error: this.state.error,\r\n                    setOpen: this.setOpen.bind(this),\r\n                    open: this.state.open,\r\n                }}\r\n            />\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\n\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            userSelect: 'none',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            color: theme.palette.grey[400],\r\n            margin: 'auto',\r\n            '& > p': {\r\n                textAlign: 'center',\r\n                fontWeight: 'bold',\r\n                fontSize: 36,\r\n            },\r\n            '& > svg': {\r\n                fontSize: 130,\r\n            },\r\n        },\r\n    })\r\n)\r\n\r\ninterface Props {\r\n    children: React.ReactNode\r\n}\r\n\r\nconst ContentWarn: React.FC<Props> = ({ children }) => {\r\n    const classes = useStyles()\r\n\r\n    return <div className={classes.root}>{children}</div>\r\n}\r\n\r\nexport default ContentWarn\r\n","import ContentWarn from './ContentWarn'\r\n\r\nexport default ContentWarn\r\n","import Loading from './Loading'\r\n\r\nexport default Loading\r\n","import React from 'react'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport ContentLoader from 'react-content-loader'\r\n\r\nconst Loading = () => {\r\n    const { t } = useTranslation()\r\n\r\n    return (\r\n        <ContentLoader\r\n            viewBox=\"0 0 300 100\"\r\n            height={100}\r\n            width={300}\r\n            style={{ margin: 'auto' }}\r\n        >\r\n            <text\r\n                x=\"40\"\r\n                y=\"65\"\r\n                style={{\r\n                    fontSize: 50,\r\n                    fontWeight: 'bold',\r\n                    fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n                }}\r\n            >\r\n                {t('info.loading')}\r\n            </text>\r\n        </ContentLoader>\r\n    )\r\n}\r\n\r\nexport default Loading\r\n","import Login from './Login'\r\n\r\nexport default Login","import React from 'react'\r\n\r\nimport Typography from '@material-ui/core/Typography'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\n\r\nimport { useSessionService, useUserService } from '../../services'\r\n\r\nimport { useStyles } from './Login.style'\r\nimport { PasswordField } from '../../components'\r\n\r\nimport { Redirect, RouteComponentProps } from 'react-router'\r\nimport { HttpStatusCode } from '../../utils'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nconst Login: React.FC<RouteComponentProps> = ({ history }) => {\r\n    const userService = useUserService()\r\n    const sessionService = useSessionService()\r\n\r\n    const { t } = useTranslation()\r\n\r\n    const classes = useStyles()\r\n\r\n    const [username, setUsername] = React.useState('')\r\n    const [password, setPassword] = React.useState('')\r\n\r\n    const [error, setError] = React.useState(false)\r\n\r\n    const doLogin = async (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const r = await userService.login({ username, password })\r\n\r\n        switch (r.status) {\r\n            case HttpStatusCode.OK:\r\n            case HttpStatusCode.NoContent:\r\n                history.push('/')\r\n                break\r\n            default:\r\n                setError(true)\r\n                break\r\n        }\r\n    }\r\n\r\n    const register = () => history.push('/signup')\r\n\r\n    if (sessionService.isLogged()) return <Redirect to=\"/\" />\r\n\r\n    return (\r\n        <>\r\n            <header className={classes.header}>\r\n                <Typography\r\n                    className={classes.title}\r\n                    variant=\"h3\"\r\n                    component=\"h1\"\r\n                >\r\n                    {t('login.title')}\r\n                </Typography>\r\n                <Typography\r\n                    className={classes.subtitle}\r\n                    variant=\"h5\"\r\n                    component=\"h2\"\r\n                >\r\n                    {t('login.subtitle')}\r\n                </Typography>\r\n            </header>\r\n            <form\r\n                className={classes.form}\r\n                onSubmitCapture={doLogin}\r\n                noValidate\r\n                id=\"login-form\"\r\n                autoComplete=\"off\"\r\n            >\r\n                <TextField\r\n                    className={classes.input}\r\n                    name=\"username\"\r\n                    label={t('login.field.username')}\r\n                    variant=\"outlined\"\r\n                    value={username}\r\n                    onChange={(e) => setUsername(e.target.value)}\r\n                    error={error}\r\n                />\r\n                <PasswordField\r\n                    className={classes.input}\r\n                    name=\"password\"\r\n                    label={t('login.field.password')}\r\n                    error={error}\r\n                    helperText={error ? t('login.field.incorrect') : ''}\r\n                    {...{ password, setPassword }}\r\n                />\r\n                <div className={classes.buttons}>\r\n                    <Button\r\n                        disableElevation\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        type=\"submit\"\r\n                        size=\"large\"\r\n                        id=\"login-bt\"\r\n                    >\r\n                        {t('login.title')}\r\n                    </Button>\r\n                    <Button variant=\"outlined\" onClick={register}>\r\n                        {t('signup.title')}\r\n                    </Button>\r\n                </div>\r\n            </form>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        container: {\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            [theme.breakpoints.down('xs')]: {\r\n                flexDirection: 'column',\r\n            },\r\n            marginBottom: theme.spacing(1),\r\n        },\r\n        buttons: {\r\n            margin: theme.spacing(1),\r\n            marginLeft: 'auto',\r\n            padding: theme.spacing(1, 5),\r\n        },\r\n        upload: {\r\n            position: 'relative',\r\n            margin: 'auto',\r\n            transform: 'translateY(-25%)',\r\n            '& > input': {\r\n                display: 'none',\r\n            },\r\n            '& > span': {\r\n                maxWidth: theme.spacing(20),\r\n                alignSelf: 'center',\r\n                textAlign: 'center',\r\n            },\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            [theme.breakpoints.down('xs')]: {\r\n                transform: 'translateY(0%)',\r\n                marginBottom: theme.spacing(2),\r\n            },\r\n        },\r\n        deleteImage: {\r\n            position: 'absolute',\r\n            top: 0,\r\n            right: 0,\r\n            zIndex: 2,\r\n        },\r\n        avatar: {\r\n            height: theme.spacing(20),\r\n            width: theme.spacing(20),\r\n        },\r\n        backdrop: {\r\n            zIndex: theme.zIndex.drawer + 1,\r\n            color: '#fff',\r\n        },\r\n    })\r\n)\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        form: {\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            width: '48ch',\r\n            marginLeft: 'auto',\r\n            marginRight: theme.spacing(8),\r\n            [theme.breakpoints.down('sm')]: {\r\n                marginRight: theme.spacing(2),\r\n            },\r\n            [theme.breakpoints.down('xs')]: {\r\n                width: '100%',\r\n            },\r\n        },\r\n        buttons: {\r\n            margin: theme.spacing(1),\r\n            marginLeft: 'auto',\r\n            padding: theme.spacing(1, 5),\r\n        },\r\n        input: {\r\n            margin: theme.spacing(1),\r\n            backgroundColor: theme.palette.background.paper,\r\n            borderRadius: 4,\r\n        },\r\n        bottom: {\r\n            marginLeft: 'auto',\r\n        },\r\n        loader: {\r\n            margin: 'auto',\r\n        },\r\n    })\r\n)\r\n","import SignupFormComponent from './SignupForm'\r\n\r\nexport default SignupFormComponent\r\n","import React from 'react'\r\n\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport { PasswordField } from '../../../../components'\r\n\r\nimport { SignupForm } from '../../../../api/UserAPI'\r\n\r\nimport { useStyles } from './Signup.style'\r\nimport { ValidationTools } from '../../../../utils'\r\n\r\ninterface SignupFormProps {\r\n    doForm: (e: any) => void\r\n    data: SignupForm\r\n    setData: (data: any) => void\r\n    errors: any\r\n    uploading: boolean\r\n    edit: boolean\r\n    deleteUser?: any\r\n}\r\n\r\nconst SignupFormComponent: React.FC<SignupFormProps> = ({\r\n    doForm,\r\n    data,\r\n    setData,\r\n    errors,\r\n    uploading,\r\n    edit,\r\n    deleteUser,\r\n}) => {\r\n    const { t } = useTranslation()\r\n\r\n    const classes = useStyles()\r\n\r\n    const updateData = (actual: {}) => {\r\n        setData({ ...data, ...actual })\r\n    }\r\n\r\n    const changeData = (field: string) => (e: any) =>\r\n        updateData({ [field]: e.target.value })\r\n\r\n    const { errorFor, helperFor } = ValidationTools.createValidator(t, errors)\r\n\r\n    return (\r\n        <form\r\n            id=\"signup-form\"\r\n            className={classes.form}\r\n            onSubmitCapture={doForm}\r\n            noValidate\r\n            autoComplete=\"off\"\r\n        >\r\n            <TextField\r\n                className={classes.input}\r\n                label={t('signup.field.name')}\r\n                variant=\"outlined\"\r\n                name=\"name\"\r\n                value={data['name']}\r\n                onChange={changeData('name')}\r\n                error={errorFor('name')}\r\n                helperText={helperFor('name')}\r\n                required\r\n            />\r\n\r\n            <TextField\r\n                className={classes.input}\r\n                label={t('signup.field.surname')}\r\n                variant=\"outlined\"\r\n                name=\"surname\"\r\n                value={data['surname']}\r\n                onChange={changeData('surname')}\r\n                error={errorFor('surname')}\r\n                helperText={helperFor('surname')}\r\n                required\r\n            />\r\n\r\n            <TextField\r\n                className={classes.input}\r\n                label={t('signup.field.email')}\r\n                variant=\"outlined\"\r\n                name=\"email\"\r\n                value={data['email']}\r\n                onChange={changeData('email')}\r\n                error={errorFor('email')}\r\n                helperText={helperFor('email')}\r\n                disabled={edit}\r\n                required\r\n            />\r\n\r\n            {!edit && (\r\n                <TextField\r\n                    className={classes.input}\r\n                    label={t('signup.field.repeatedEmail')}\r\n                    variant=\"outlined\"\r\n                    name=\"repeatedEmail\"\r\n                    value={data['repeatedEmail']}\r\n                    onChange={changeData('repeatedEmail')}\r\n                    error={errorFor('repeatedEmail')}\r\n                    helperText={helperFor('repeatedEmail')}\r\n                    required\r\n                />\r\n            )}\r\n\r\n            <TextField\r\n                className={classes.input}\r\n                label={t('signup.field.nickname')}\r\n                variant=\"outlined\"\r\n                value={data['nickname']}\r\n                name=\"nickname\"\r\n                onChange={changeData('nickname')}\r\n                error={errorFor('nickname')}\r\n                helperText={helperFor('nickname')}\r\n                required\r\n            />\r\n\r\n            <PasswordField\r\n                className={classes.input}\r\n                label={t('signup.field.password')}\r\n                error={errorFor('password')}\r\n                name=\"password\"\r\n                helperText={helperFor('password')}\r\n                {...{\r\n                    password: data.password,\r\n                    setPassword: (p) => updateData({ password: p }),\r\n                }}\r\n                required\r\n            />\r\n\r\n            <PasswordField\r\n                className={classes.input}\r\n                name=\"repeatedPassword\"\r\n                label={t('signup.field.repeatedPassword')}\r\n                error={errorFor('repeatedPassword')}\r\n                helperText={helperFor('repeatedPassword')}\r\n                {...{\r\n                    password: data.repeatedPassword,\r\n                    setPassword: (p) => updateData({ repeatedPassword: p }),\r\n                }}\r\n                required\r\n            />\r\n\r\n            <TextField\r\n                className={classes.input}\r\n                label={t('signup.field.description')}\r\n                variant=\"outlined\"\r\n                name=\"description\"\r\n                value={data['description']}\r\n                onChange={changeData('description')}\r\n                error={errorFor('description')}\r\n                helperText={helperFor('description')}\r\n                multiline\r\n                rows={5}\r\n            />\r\n\r\n            <div className={classes.bottom}>\r\n                {deleteUser && (\r\n                    <Button\r\n                        className={classes.buttons}\r\n                        disableElevation\r\n                        onClick={deleteUser}\r\n                        variant=\"contained\"\r\n                        color=\"secondary\"\r\n                        type=\"submit\"\r\n                        size=\"large\"\r\n                        disabled={uploading}\r\n                        startIcon={<DeleteIcon />}\r\n                    >\r\n                        {t('product.delete')}\r\n                    </Button>\r\n                )}\r\n\r\n                <Button\r\n                    className={classes.buttons}\r\n                    disableElevation\r\n                    disabled={uploading}\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    type=\"submit\"\r\n                    size=\"large\"\r\n                    id=\"signup-bt\"\r\n                >\r\n                    {t('signup.continue')}\r\n                </Button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default SignupFormComponent\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        header: {\r\n            margin: theme.spacing(4),\r\n            userSelect: 'none',\r\n        },\r\n        title: {\r\n            color: theme.palette.grey[800],\r\n            fontWeight: 'bold',\r\n        },\r\n        subtitle: {\r\n            color: theme.palette.grey[500],\r\n            fontWeight: 'lighter',\r\n        },\r\n        subtitleLogin: {\r\n            cursor: 'pointer',\r\n            textDecoration: 'underline',\r\n            marginLeft: theme.spacing(1),\r\n        },\r\n        subtitleContainer: {\r\n            display: 'flex',\r\n        },\r\n    })\r\n)\r\n","import SignupTitle from './SignupTitle'\r\n\r\nexport default SignupTitle\r\n","import React from 'react'\r\n\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport { useHistory } from 'react-router'\r\n\r\nimport { useStyles } from './SignupTitle.style'\r\n\r\nimport clsx from 'clsx'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nconst SignupTitle = () => {\r\n    const { t } = useTranslation()\r\n\r\n    const history = useHistory()\r\n    const classes = useStyles()\r\n\r\n    const login = () => history.push('/login')\r\n\r\n    return (\r\n        <header className={classes.header}>\r\n            <Typography className={classes.title} variant=\"h3\" component=\"h1\">\r\n                {t('signup.title')}\r\n            </Typography>\r\n            <div className={classes.subtitleContainer}>\r\n                <Typography\r\n                    className={classes.subtitle}\r\n                    variant=\"h5\"\r\n                    component=\"h2\"\r\n                >\r\n                    {t('signup.subtitle')}\r\n                </Typography>\r\n                <Typography\r\n                    onClick={login}\r\n                    className={clsx(classes.subtitle, classes.subtitleLogin)}\r\n                    variant=\"h5\"\r\n                    component=\"h2\"\r\n                >\r\n                    {t('login.title')}\r\n                </Typography>\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default SignupTitle\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        header: {\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            margin: theme.spacing(4, 3, 2, 4),\r\n            alignItems: 'center',\r\n        },\r\n        title: {\r\n            marginLeft: theme.spacing(1),\r\n        },\r\n    })\r\n)\r\n","import EditTitle from './EditTitle'\r\n\r\nexport default EditTitle\r\n","import React from 'react'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\r\n\r\nimport { useHistory } from 'react-router'\r\n\r\nimport { useStyles } from './EditTitle.style'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nconst EditTitle = () => {\r\n    const { t } = useTranslation()\r\n\r\n    const history = useHistory()\r\n    const classes = useStyles()\r\n\r\n    const goBack = () => history.goBack()\r\n\r\n    return (\r\n        <header className={classes.header}>\r\n            <IconButton onClick={() => goBack()}>\r\n                <ArrowBackIcon />\r\n            </IconButton>\r\n            <Typography className={classes.title} variant=\"h4\" component=\"h1\">\r\n                {t('profile.edit.title')}\r\n            </Typography>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default EditTitle\r\n","import Signup from './Signup'\r\n\r\nexport default Signup\r\n","import React from 'react'\r\n\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\n\r\nimport { Redirect, RouteComponentProps } from 'react-router'\r\n\r\nimport {\r\n    useResourceService,\r\n    useSessionService,\r\n    useUserService,\r\n} from '../../services'\r\nimport { HttpStatusCode } from '../../utils'\r\n\r\nimport { SignupForm } from '../../api/UserAPI'\r\n\r\nimport { useStyles } from './Signup.style'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport { EditTitle, SignupFormComponent } from './components'\r\nimport { CircularProgressIndicator } from '../../components'\r\n\r\nimport Backdrop from '@material-ui/core/Backdrop'\r\n\r\nimport { SignupTitle } from './components'\r\n\r\ninterface UserEditParams {\r\n    id?: string\r\n}\r\n\r\nconst Signup: React.FC<RouteComponentProps<UserEditParams>> = ({\r\n    history,\r\n    match,\r\n}) => {\r\n    const userService = useUserService()\r\n    const sessionService = useSessionService()\r\n    const resources = useResourceService()\r\n\r\n    const { t } = useTranslation()\r\n\r\n    const { id } = match.params\r\n    const edit = match.path.includes('edit')\r\n    const session = sessionService.current()\r\n\r\n    const _id = parseInt(id ?? '')\r\n    const userId =\r\n        isNaN(_id) || (session?.userId !== _id && !session?.admin)\r\n            ? undefined\r\n            : _id\r\n\r\n    const classes = useStyles()\r\n\r\n    const [data, setData] = React.useState<SignupForm | undefined>(\r\n        edit\r\n            ? undefined\r\n            : {\r\n                  name: '',\r\n                  surname: '',\r\n                  email: '',\r\n                  repeatedEmail: '',\r\n                  password: '',\r\n                  repeatedPassword: '',\r\n                  nickname: '',\r\n                  description: '',\r\n              }\r\n    )\r\n\r\n    const [imagePreview, setImagePreview] = React.useState<any>()\r\n    const [image, setImage] = React.useState<any>()\r\n\r\n    const [editImageUri, setEditImageUri] = React.useState<any>()\r\n\r\n    const [errors, setErrors] = React.useState<any>({})\r\n\r\n    const [uploadProgress, setUploadProgress] = React.useState<any>()\r\n\r\n    const uploading = uploadProgress !== undefined\r\n\r\n    const onUploadProgress = (e: any) => {\r\n        const p = (e.loaded / e.total) * 100\r\n        setUploadProgress(p === 100 ? undefined : p)\r\n    }\r\n\r\n    const removePhoto = () => {\r\n        setImagePreview(undefined)\r\n        setImage(undefined)\r\n\r\n        if (!edit || !data) return\r\n        setData({ ...data!!, deletePhoto: true })\r\n    }\r\n\r\n    const deletable = () =>\r\n        edit && session?.admin && session?.userId !== parseInt(id!!)\r\n\r\n    const deleteUser = async (e: any) => {\r\n        e.preventDefault()\r\n\r\n        if (uploading) return\r\n        if (!deletable()) return\r\n        const r = await userService.deleteUser(data?.id!!)\r\n\r\n        switch (r.status) {\r\n            case HttpStatusCode.OK:\r\n                history.push('/')\r\n                break\r\n            case HttpStatusCode.Forbidden:\r\n            case HttpStatusCode.NotFound:\r\n                history.goBack()\r\n        }\r\n    }\r\n\r\n    const doSignup = async () => {\r\n        const r = await userService.signup(data!!, image, onUploadProgress)\r\n\r\n        switch (r.status) {\r\n            case HttpStatusCode.OK:\r\n                break\r\n            case HttpStatusCode.NoContent:\r\n                history.push('/')\r\n                return\r\n            case HttpStatusCode.BadRequest:\r\n                setErrors((r.data as any).error)\r\n                return\r\n        }\r\n\r\n        const rLogin = await userService.login({\r\n            username: data!!.nickname,\r\n            password: data!!.password,\r\n        })\r\n\r\n        switch (rLogin.status) {\r\n            case HttpStatusCode.OK:\r\n            case HttpStatusCode.NoContent:\r\n                history.push('/')\r\n                break\r\n        }\r\n    }\r\n\r\n    const doEdit = async () => {\r\n        const r = await userService.edit(data!!, image, onUploadProgress)\r\n\r\n        if (r.status !== HttpStatusCode.OK) setErrors((r.data as any).error)\r\n        else history.goBack()\r\n    }\r\n\r\n    const doForm = (e: any) => {\r\n        e.preventDefault()\r\n\r\n        if (uploading || !data) return\r\n\r\n        if (edit) doEdit()\r\n        else doSignup()\r\n    }\r\n\r\n    const selectPhoto = (e: any) => {\r\n        const file = e.target.files[0]\r\n        const image = URL.createObjectURL(file)\r\n        setImagePreview(image)\r\n        setImage(file)\r\n        setData({ ...data!!, deletePhoto: false })\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const handleNotFound = () => history.push('/404')\r\n        const handleNotPermission = () => history.goBack()\r\n\r\n        const fetchUser = async () => {\r\n            const session = sessionService.current()\r\n            if (userId !== session?.userId && !session?.admin) {\r\n                handleNotPermission()\r\n                return\r\n            }\r\n\r\n            const r = await userService.getDetailedUser(userId!!)\r\n\r\n            switch (r.status) {\r\n                case HttpStatusCode.OK:\r\n                    const u = r.data\r\n                    setData({\r\n                        id: u.id,\r\n                        name: u.name,\r\n                        surname: u.surname,\r\n                        email: u.email,\r\n                        password: '',\r\n                        repeatedPassword: '',\r\n                        nickname: u.nickname,\r\n                        description: u.description,\r\n                    })\r\n\r\n                    setEditImageUri(u.profileImgUri)\r\n                    break\r\n                case HttpStatusCode.NotFound:\r\n                    handleNotFound()\r\n            }\r\n        }\r\n\r\n        if (edit) fetchUser()\r\n    }, [edit, userService, userId, history, sessionService])\r\n\r\n    React.useEffect(() => {\r\n        const loadImage = async () => {\r\n            const r = await resources.load(editImageUri)\r\n\r\n            if (r.status !== HttpStatusCode.OK) return\r\n\r\n            setImagePreview(URL.createObjectURL(r.data))\r\n        }\r\n\r\n        if (editImageUri) loadImage()\r\n    }, [editImageUri, resources])\r\n\r\n    if (!edit && sessionService.isLogged()) return <Redirect to=\"/\" />\r\n    if (edit && userId === undefined) return <Redirect to={`/vendor/${id}`} />\r\n\r\n    return (\r\n        <>\r\n            {edit ? <EditTitle /> : <SignupTitle />}\r\n\r\n            <div className={classes.container}>\r\n                <div className={classes.upload}>\r\n                    {imagePreview && (\r\n                        <IconButton\r\n                            component=\"span\"\r\n                            onClick={removePhoto}\r\n                            className={classes.deleteImage}\r\n                        >\r\n                            <DeleteIcon color=\"error\" />\r\n                        </IconButton>\r\n                    )}\r\n                    <input\r\n                        accept=\".jpg,.jpeg,.png\"\r\n                        id=\"profile-img-upload\"\r\n                        type=\"file\"\r\n                        onChange={selectPhoto}\r\n                    />\r\n                    <label htmlFor=\"profile-img-upload\">\r\n                        <IconButton component=\"span\">\r\n                            <Avatar\r\n                                className={classes.avatar}\r\n                                src={imagePreview}\r\n                            />\r\n                        </IconButton>\r\n                    </label>\r\n                    <Typography\r\n                        variant=\"caption\"\r\n                        color={'image' in errors ? 'error' : 'textSecondary'}\r\n                    >\r\n                        {t('signup.field.photo_footer')}\r\n                    </Typography>\r\n                </div>\r\n\r\n                {data && (\r\n                    <SignupFormComponent\r\n                        {...{\r\n                            doForm,\r\n                            data,\r\n                            errors,\r\n                            setData,\r\n                            uploading,\r\n                            edit,\r\n                            deleteUser: deletable() ? deleteUser : undefined,\r\n                        }}\r\n                    />\r\n                )}\r\n            </div>\r\n\r\n            <Backdrop className={classes.backdrop} open={uploading}>\r\n                <CircularProgressIndicator value={uploadProgress} size={52} />\r\n            </Backdrop>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Signup\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        title: {\r\n            margin: theme.spacing(10, 0, 5),\r\n            textAlign: 'center',\r\n            fontWeight: 400,\r\n            color: theme.palette.background.default,\r\n            textShadow: '2px 2px 2px #00000088',\r\n            zIndex: 0,\r\n        },\r\n        subtitle: {\r\n            margin: theme.spacing(2, 'auto', 0, 'auto'),\r\n            paddingLeft: theme.spacing(2),\r\n            maxWidth: 1800,\r\n            fontSize: 28,\r\n            fontWeight: 400,\r\n        },\r\n        categories: {\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n            '& > div': {\r\n                margin: theme.spacing(0.5),\r\n                padding: theme.spacing(3, 0),\r\n                '& > span': {\r\n                    fontWeight: 'bold',\r\n                },\r\n                boxShadow: '0px .5px .5px #00000055',\r\n            },\r\n            display: 'flex',\r\n            maxWidth: '100%',\r\n            justifyContent: 'center',\r\n            padding: theme.spacing(0, 1),\r\n            flexWrap: 'wrap',\r\n        },\r\n        slider: {\r\n            margin: '0 auto auto',\r\n            maxWidth: '100%',\r\n        },\r\n        topContainer: {\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            overflow: 'hidden',\r\n            padding: theme.spacing(4, 1, 8, 1),\r\n            margin: theme.spacing(0, 0, 2),\r\n            position: 'relative',\r\n        },\r\n        mainImgHolder: {\r\n            backgroundImage: 'url(img/home_bkg.jpg)',\r\n            backgroundRepeat: 'no-repeat',\r\n            backgroundPosition: 'center',\r\n            backgroundSize: 'cover',\r\n            filter: 'blur(3px)',\r\n            transform: 'scale(1.06) translateY(-7%)',\r\n            width: '100%',\r\n            height: '100%',\r\n            position: 'absolute',\r\n        },\r\n    })\r\n)\r\n","import React from 'react'\r\n\r\nimport { RecommenderAPI, RecommenderService } from '../api'\r\n\r\nexport const RecommenderContext = React.createContext<RecommenderService>(\r\n    new RecommenderAPI()\r\n)\r\n\r\nconst useRecommenderService = () => React.useContext(RecommenderContext)\r\n\r\nexport default useRecommenderService\r\n","import Home from './Home'\r\n\r\nexport default Home","import React from 'react'\r\n\r\nimport { Loading, ProductSlider } from '../../components'\r\n\r\nimport {\r\n    useCartService,\r\n    useFavoriteService,\r\n    useProductService,\r\n} from '../../services'\r\nimport { PreviewProduct, ProductCategory } from '../../types'\r\n\r\nimport { HttpStatusCode } from '../../utils'\r\n\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Chip from '@material-ui/core/Chip'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\nimport { useStyles } from './Home.style'\r\n\r\nimport { RouteComponentProps } from 'react-router'\r\nimport useRecommenderService from '../../services/RecommenderService'\r\n\r\nconst Home: React.FC<RouteComponentProps> = ({ history }) => {\r\n    const productService = useProductService()\r\n    const favService = useFavoriteService()\r\n    const cartService = useCartService()\r\n    const recommenderService = useRecommenderService()\r\n\r\n    const { t } = useTranslation()\r\n\r\n    const classes = useStyles()\r\n\r\n    const [categories, setCategories] = React.useState<ProductCategory[]>()\r\n\r\n    const [popular, setPopular] = React.useState<PreviewProduct[] | null>()\r\n    const [recommended, setRecommended] = React.useState<\r\n        PreviewProduct[] | null\r\n    >()\r\n\r\n    React.useEffect(() => {\r\n        const fetchRecommended = async () => {\r\n            const r = await recommenderService.getFor()\r\n            if (r.status === HttpStatusCode.OK) setRecommended(r.data)\r\n            else setRecommended(null)\r\n        }\r\n\r\n        const fetchPopular = async () => {\r\n            const r = await recommenderService.getPopular()\r\n            if (r.status === HttpStatusCode.OK) setPopular(r.data)\r\n            else setPopular(null)\r\n        }\r\n\r\n        fetchRecommended()\r\n        fetchPopular()\r\n    }, [recommenderService])\r\n\r\n    React.useEffect(() => {\r\n        const fetchCategories = async () => {\r\n            const r = await productService.findCategories()\r\n\r\n            if (r.status === HttpStatusCode.OK) setCategories(r.data)\r\n        }\r\n\r\n        if (!categories) fetchCategories()\r\n    }, [productService, categories])\r\n\r\n    const handleCategory = (id: number) =>\r\n        history.push('/search/all', { all: true, category: id })\r\n\r\n    return (\r\n        <>\r\n            <div className={classes.topContainer}>\r\n                <div className={classes.mainImgHolder} />\r\n                <Typography\r\n                    className={classes.title}\r\n                    variant=\"h2\"\r\n                    component=\"h1\"\r\n                >\r\n                    {t('home.title')}\r\n                </Typography>\r\n                <div className={classes.categories}>\r\n                    {categories &&\r\n                        categories.map((c) => (\r\n                            <Chip\r\n                                key={c.id}\r\n                                color=\"secondary\"\r\n                                onClick={() => handleCategory(c.id)}\r\n                                label={t(`category.${c.name}`)}\r\n                            />\r\n                        ))}\r\n                </div>\r\n            </div>\r\n\r\n            <div className={classes.slider}>\r\n                {popular ? (\r\n                    <>\r\n                        <Typography className={classes.subtitle} component=\"h2\">\r\n                            {t('home.weekly_popular')}\r\n                        </Typography>\r\n                        <ProductSlider\r\n                            {...{\r\n                                products: popular,\r\n                                productService,\r\n                                cartService,\r\n                                favService,\r\n                            }}\r\n                        />\r\n                    </>\r\n                ) : popular === undefined ? (\r\n                    <Loading />\r\n                ) : (\r\n                    <></>\r\n                )}\r\n            </div>\r\n\r\n            <div className={classes.slider}>\r\n                {recommended ? (\r\n                    <>\r\n                        <Typography className={classes.subtitle} component=\"h2\">\r\n                            {t('home.recommended')}\r\n                        </Typography>\r\n                        <ProductSlider\r\n                            {...{\r\n                                products: recommended,\r\n                                productService,\r\n                                cartService,\r\n                                favService,\r\n                            }}\r\n                        />\r\n                    </>\r\n                ) : recommended === undefined ? (\r\n                    <Loading />\r\n                ) : (\r\n                    <></>\r\n                )}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Home\r\n","import React from 'react'\r\n\r\nimport Typography from '@material-ui/core/Typography'\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nconst useStyle = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        main: {\r\n            margin: 'auto',\r\n            userSelect: 'none',\r\n            fontSize: 'xxx-large',\r\n            color: theme.palette.grey[400],\r\n        },\r\n    })\r\n)\r\n\r\nconst PageNotFound = () => {\r\n    const classes = useStyle()\r\n    const { t } = useTranslation()\r\n\r\n    return (\r\n        <Typography className={classes.main}>{t('error.not_found')}</Typography>\r\n    )\r\n}\r\n\r\nexport default PageNotFound\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {},\r\n        subtitle: {\r\n            margin: theme.spacing(2, 'auto', 0, 'auto'),\r\n            paddingLeft: theme.spacing(2),\r\n            maxWidth: 1800,\r\n            fontWeight: 100,\r\n        },\r\n        bottom: {\r\n            marginTop: theme.spacing(2),\r\n        },\r\n    })\r\n)\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            margin: theme.spacing(2),\r\n            display: 'grid',\r\n            [theme.breakpoints.up('md')]: {\r\n                gridTemplateColumns: '1fr 1.5fr',\r\n            },\r\n        },\r\n        image: {\r\n            margin: 'auto',\r\n            [theme.breakpoints.up('md')]: {\r\n                padding: theme.spacing(2, 2, 2, 1),\r\n            },\r\n            padding: theme.spacing(1, 1, 0, 0),\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            '& img': {\r\n                display: 'block',\r\n                width: '100%',\r\n                borderRadius: 4,\r\n            },\r\n        },\r\n        images: {\r\n            display: 'grid',\r\n            gridTemplateColumns: 'repeat(4, 1fr)',\r\n            alignItems: 'center',\r\n        },\r\n        mainImage: {\r\n            backgroundColor: theme.palette.grey[100],\r\n            '& img': {\r\n                maxHeight: 350,\r\n                maxWidth: 450,\r\n            },\r\n        },\r\n        imagePreview: {\r\n            '& img': {\r\n                maxHeight: 100,\r\n                maxWidth: 110,\r\n                cursor: 'pointer',\r\n            },\r\n        },\r\n        holder: {\r\n            margin: theme.spacing(0, 0, 1, 1),\r\n            alignItems: 'center',\r\n            display: 'flex',\r\n        },\r\n        subholder: {\r\n            margin: 'auto',\r\n        },\r\n        details: {\r\n            margin: theme.spacing(1, 1, 0, 0),\r\n            paddingRight: theme.spacing(1),\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            '& > h1': {\r\n                overflowWrap: 'anywhere',\r\n            },\r\n        },\r\n        catVendorVisits: {\r\n            display: 'flex',\r\n        },\r\n        visits: {\r\n            display: 'flex',\r\n            marginLeft: 'auto',\r\n            '& > span': {\r\n                marginLeft: theme.spacing(1),\r\n            },\r\n        },\r\n        descriptionBuy: {\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            justifyContent: 'space-between',\r\n            height: '100%',\r\n            [theme.breakpoints.down('sm')]: {\r\n                marginLeft: theme.spacing(2),\r\n                flexWrap: 'wrap',\r\n                '& > *': {\r\n                    flexBasis: '100%',\r\n                },\r\n            },\r\n        },\r\n        description: {\r\n            [theme.breakpoints.up('md')]: {\r\n                flexBasis: '75%',\r\n            },\r\n            color: theme.palette.grey[700],\r\n            marginTop: theme.spacing(2),\r\n            paddingBottom: theme.spacing(2),\r\n            wordBreak: 'break-word',\r\n            whiteSpace: 'pre-wrap',\r\n        },\r\n        infoPair: {\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            width: '100%',\r\n            '& > h1': {\r\n                wordBreak: 'break-word',\r\n            },\r\n        },\r\n        buttons: {\r\n            display: 'flex',\r\n            justifyContent: 'end',\r\n            marginBottom: theme.spacing(2),\r\n            flexWrap: 'wrap',\r\n            marginLeft: 'auto',\r\n        },\r\n        buyHolder: {\r\n            maxWidth: 200,\r\n            margin: 'auto',\r\n            marginTop: 'auto',\r\n            marginBottom: 'auto',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            padding: theme.spacing(2),\r\n            '& > *': {\r\n                margin: 'auto',\r\n            },\r\n        },\r\n    })\r\n)\r\n","import ProductInfo from './ProductInfo'\r\n\r\nexport default ProductInfo\r\n","import React from 'react'\r\n\r\nimport { useHistory } from 'react-router'\r\n\r\nimport useTheme from '@material-ui/core/styles/useTheme'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport Rating from '@material-ui/lab/Rating'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport FavoriteBorder from '@material-ui/icons/FavoriteBorder'\r\nimport EditOutlined from '@material-ui/icons/EditOutlined'\r\nimport ReportOutlined from '@material-ui/icons/ReportOutlined'\r\nimport Favorite from '@material-ui/icons/Favorite'\r\nimport Button from '@material-ui/core/Button'\r\nimport Autocomplete from '@material-ui/lab/Autocomplete'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Link from '@material-ui/core/Link'\r\nimport VisibilityIcon from '@material-ui/icons/VisibilityOutlined'\r\nimport AssessmentIcon from '@material-ui/icons/AssessmentOutlined'\r\n\r\nimport clsx from 'clsx'\r\n\r\nimport { useStyles } from './ProductInfo.style'\r\n\r\nimport { Product } from '../../../../types'\r\nimport {\r\n    useCartService,\r\n    useFavoriteService,\r\n    useResourceService,\r\n    useSessionService,\r\n} from '../../../../services'\r\nimport { Constants, HttpStatusCode } from '../../../../utils'\r\nimport { ProductImg, ReportDialog } from '../../../../components'\r\nimport { Hidden } from '@material-ui/core'\r\n\r\ninterface ProductInfoParams {\r\n    product: Product\r\n}\r\n\r\nconst ProductInfo: React.FC<ProductInfoParams> = ({ product }) => {\r\n    const history = useHistory()\r\n\r\n    const favService = useFavoriteService()\r\n    const cartService = useCartService()\r\n    const resources = useResourceService()\r\n    const sessionService = useSessionService()\r\n\r\n    const { t } = useTranslation()\r\n\r\n    const classes = useStyles()\r\n    const theme = useTheme()\r\n\r\n    const [favorite, setFavorite] = React.useState<boolean>()\r\n    const [amount, setAmount] = React.useState<number>(0)\r\n    const [amounts, setAmounts] = React.useState<number[]>([])\r\n    const [selectedImgUrl, setSelectedImgUrl] = React.useState<string>()\r\n    const [selectedImg, setSelectedImg] = React.useState<any>()\r\n\r\n    const [reporting, setReporting] = React.useState(false)\r\n\r\n    const session = sessionService.current()\r\n    const logged = sessionService.isLogged()\r\n    const owner = session?.userId === product.userId\r\n    const admin = session?.admin\r\n    const editable = owner || admin\r\n\r\n    const addToFav = async (e: any) => {\r\n        e.stopPropagation()\r\n\r\n        const r = await (favorite\r\n            ? favService.remove(product.id)\r\n            : favService.add(product.id))\r\n\r\n        if (r.status !== HttpStatusCode.OK) return\r\n\r\n        setFavorite(!favorite)\r\n    }\r\n\r\n    const addToCart = (e: any) => {\r\n        e.stopPropagation()\r\n        cartService.update({\r\n            productId: product.id,\r\n            amount,\r\n            add: true,\r\n        })\r\n    }\r\n\r\n    const edit = () => {\r\n        if (editable) history.push(`/product/${product.id}/edit`)\r\n    }\r\n\r\n    const reports = () => {\r\n        if (admin) history.push(`/reports/${product.id}`)\r\n    }\r\n\r\n    const report = () => setReporting(true)\r\n\r\n    const checkVendor = (e: any) => {\r\n        e.preventDefault()\r\n        history.push(`/vendor/${product.userId}`)\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setFavorite(product.fav === true)\r\n\r\n        let amnts = Array.from(\r\n            { length: Math.min(product.stock!!, 20) },\r\n            (_, i) => i + 1\r\n        )\r\n\r\n        if (amnts.length === 0) amnts = [0]\r\n\r\n        setAmounts(amnts)\r\n        setAmount(amnts[0])\r\n\r\n        if (product.images.length > 0) setSelectedImgUrl(product.images[0].u)\r\n        else {\r\n            setSelectedImgUrl(undefined)\r\n            setSelectedImg(undefined)\r\n        }\r\n    }, [product])\r\n\r\n    const InfoHeader = (\r\n        <>\r\n            <div className={classes.infoPair}>\r\n                <Typography variant=\"h5\" component=\"h1\">\r\n                    {product.name}\r\n                </Typography>\r\n                <div className={classes.buttons}>\r\n                    {admin && (\r\n                        <IconButton size=\"small\" onClick={reports}>\r\n                            <AssessmentIcon />\r\n                        </IconButton>\r\n                    )}\r\n                    {editable && (\r\n                        <IconButton id=\"edit-bt\" size=\"small\" onClick={edit}>\r\n                            <EditOutlined />\r\n                        </IconButton>\r\n                    )}\r\n                    {logged && (\r\n                        <IconButton size=\"small\" onClick={report}>\r\n                            <ReportOutlined />\r\n                        </IconButton>\r\n                    )}\r\n                    {!owner && (\r\n                        <IconButton\r\n                            id=\"fav-bt\"\r\n                            className={\r\n                                favorite\r\n                                    ? 'favorite-selected'\r\n                                    : 'favorite-not-selected'\r\n                            }\r\n                            size=\"small\"\r\n                            onClick={addToFav}\r\n                        >\r\n                            {favorite ? (\r\n                                <Favorite\r\n                                    htmlColor={theme.palette.error.main}\r\n                                />\r\n                            ) : (\r\n                                <FavoriteBorder />\r\n                            )}\r\n                        </IconButton>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            <Typography variant=\"subtitle2\" component=\"h2\">\r\n                {product.brand}\r\n            </Typography>\r\n            <div className={classes.catVendorVisits}>\r\n                <div>\r\n                    <Typography variant=\"button\">\r\n                        {t(`category.${product.category.name}`)}\r\n                    </Typography>\r\n                    {'  '}\r\n                    <Link\r\n                        href={`/vendor/${product.userId}`}\r\n                        onClick={checkVendor}\r\n                        variant=\"subtitle1\"\r\n                    >\r\n                        {product.vendorNick}\r\n                    </Link>\r\n                </div>\r\n                <div className={classes.visits}>\r\n                    <VisibilityIcon color=\"disabled\" />\r\n                    <Typography variant=\"button\" color=\"textSecondary\">\r\n                        {product.visits}\r\n                    </Typography>\r\n                </div>\r\n            </div>\r\n            <div className={classes.infoPair}>\r\n                <Typography variant=\"h6\">\r\n                    {product.price} {''}\r\n                </Typography>\r\n                <Rating value={product.rating} precision={0.1} readOnly />\r\n            </div>\r\n        </>\r\n    )\r\n\r\n    return (\r\n        <>\r\n            <div className={classes.root}>\r\n                <Hidden mdUp>{InfoHeader}</Hidden>\r\n                <div className={classes.image}>\r\n                    <div className={classes.holder}>\r\n                        <Paper\r\n                            className={clsx(\r\n                                classes.subholder,\r\n                                classes.mainImage\r\n                            )}\r\n                        >\r\n                            <ProductImg\r\n                                src={selectedImg ?? Constants.FALLBACK_IMAGE}\r\n                                alt={product.name}\r\n                            />\r\n                        </Paper>\r\n                    </div>\r\n                    <div className={classes.images}>\r\n                        {product.images.map((im) => (\r\n                            <div\r\n                                key={im.i}\r\n                                className={clsx(\r\n                                    classes.holder,\r\n                                    classes.imagePreview\r\n                                )}\r\n                            >\r\n                                <Paper\r\n                                    className={classes.subholder}\r\n                                    onClick={() => setSelectedImgUrl(im.u)}\r\n                                >\r\n                                    <ProductImg\r\n                                        url={im.u}\r\n                                        resources={resources}\r\n                                        selectedImgUrl={selectedImgUrl}\r\n                                        setSelectedImg={setSelectedImg}\r\n                                        alt={`I${im.i}`}\r\n                                    />\r\n                                </Paper>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n                <div className={classes.details}>\r\n                    <Hidden smDown>{InfoHeader}</Hidden>\r\n                    <div className={classes.descriptionBuy}>\r\n                        <Typography\r\n                            variant=\"body2\"\r\n                            className={classes.description}\r\n                        >\r\n                            {product.description}\r\n                        </Typography>\r\n                        <div>\r\n                            <Paper className={classes.buyHolder}>\r\n                                <Autocomplete\r\n                                    options={amounts}\r\n                                    getOptionLabel={(i) => `${i}`}\r\n                                    value={amount}\r\n                                    disabled={amount === 0}\r\n                                    onChange={(e, v) => setAmount(v)}\r\n                                    style={{ width: 120 }}\r\n                                    disableClearable\r\n                                    renderInput={(params) => (\r\n                                        <TextField\r\n                                            {...params}\r\n                                            name=\"amount\"\r\n                                            label={t('product.amount')}\r\n                                            variant=\"outlined\"\r\n                                            margin=\"dense\"\r\n                                        />\r\n                                    )}\r\n                                />\r\n                                <div>\r\n                                    <Button\r\n                                        id=\"buy-bt\"\r\n                                        variant=\"outlined\"\r\n                                        size=\"small\"\r\n                                        color=\"secondary\"\r\n                                        disabled={amount === 0}\r\n                                        onClick={addToCart}\r\n                                    >\r\n                                        {t(\r\n                                            amount === 0\r\n                                                ? 'product.no_stock'\r\n                                                : 'product.buy'\r\n                                        )}\r\n                                    </Button>\r\n                                </div>\r\n                            </Paper>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <ReportDialog\r\n                {...{ product, open: reporting, setOpen: setReporting }}\r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ProductInfo\r\n","import ProductPage from './ProductPage'\r\n\r\nexport default ProductPage\r\n","import React from 'react'\r\n\r\nimport { RouteComponentProps } from 'react-router'\r\n\r\nimport {\r\n    useCartService,\r\n    useFeedbackService,\r\n    useFavoriteService,\r\n    useProductService,\r\n} from '../../services'\r\n\r\nimport { ActionType, PreviewProduct, Product } from '../../types'\r\nimport { HttpStatusCode } from '../../utils'\r\n\r\nimport { Loading, ProductSlider } from '../../components'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport { useStyles } from './ProductPage.style'\r\nimport ProductInfo from './components'\r\nimport useRecommenderService from '../../services/RecommenderService'\r\n\r\ninterface ProductPageParams {\r\n    id: string\r\n}\r\n\r\nconst ProductPage: React.FC<RouteComponentProps<ProductPageParams>> = ({\r\n    match,\r\n    history,\r\n}) => {\r\n    const { id } = match.params\r\n\r\n    const productService = useProductService()\r\n    const favService = useFavoriteService()\r\n    const cartService = useCartService()\r\n    const feedbackService = useFeedbackService()\r\n    const recommenderService = useRecommenderService()\r\n\r\n    const { t } = useTranslation()\r\n\r\n    const classes = useStyles()\r\n\r\n    const [product, setProduct] = React.useState<Product>()\r\n\r\n    const [recommended, setRecommended] = React.useState<\r\n        PreviewProduct[] | null\r\n    >()\r\n\r\n    React.useEffect(() => {\r\n        if (product) document.title = product.name\r\n    }, [product])\r\n\r\n    React.useEffect(() => {\r\n        const handleNotFound = () => {\r\n            history.replace('/404')\r\n        }\r\n\r\n        const fetchProduct = async (productId: number) => {\r\n            const r = await productService.getProduct(productId)\r\n\r\n            switch (r.status) {\r\n                case HttpStatusCode.OK:\r\n                    setProduct(r.data)\r\n                    break\r\n                case HttpStatusCode.NotFound:\r\n                    handleNotFound()\r\n            }\r\n        }\r\n\r\n        let productId = parseInt(id)\r\n\r\n        if (isNaN(productId)) handleNotFound()\r\n        else {\r\n            fetchProduct(productId)\r\n            feedbackService.collect({\r\n                action: ActionType.VISIT,\r\n                item: productId,\r\n            })\r\n        }\r\n    }, [history, productService, feedbackService, id])\r\n\r\n    React.useEffect(() => {\r\n        const fetchRecommendations = async (p: number) => {\r\n            const r = await recommenderService.getFor(p)\r\n\r\n            if (r.status === HttpStatusCode.OK) setRecommended(r.data)\r\n            else setRecommended(null)\r\n        }\r\n\r\n        let productId = parseInt(id)\r\n        if (productId) fetchRecommendations(productId)\r\n    }, [history, recommenderService, id])\r\n\r\n    return product !== undefined ? (\r\n        <div className={classes.root}>\r\n            <ProductInfo {...{ product }} />\r\n            <div className={classes.bottom}>\r\n                <Typography\r\n                    variant=\"h5\"\r\n                    component=\"h2\"\r\n                    color=\"textSecondary\"\r\n                    className={classes.subtitle}\r\n                >\r\n                    {t('info.interesting')}\r\n                </Typography>\r\n\r\n                {recommended ? (\r\n                    <ProductSlider\r\n                        {...{\r\n                            products: recommended,\r\n                            productService,\r\n                            cartService,\r\n                            favService,\r\n                        }}\r\n                    />\r\n                ) : recommended === undefined ? (\r\n                    <Loading />\r\n                ) : (\r\n                    <></>\r\n                )}\r\n            </div>\r\n        </div>\r\n    ) : (\r\n        <Loading />\r\n    )\r\n}\r\n\r\nexport default ProductPage\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            margin: theme.spacing(4, 8),\r\n            [theme.breakpoints.down('sm')]: {\r\n                margin: theme.spacing(2),\r\n            },\r\n        },\r\n        header: {\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            marginBottom: theme.spacing(2),\r\n            alignItems: 'center',\r\n        },\r\n        title: {\r\n            marginLeft: theme.spacing(1),\r\n        },\r\n        images: {\r\n            width: '65%',\r\n            [theme.breakpoints.down('sm')]: {\r\n                width: '100%',\r\n                margin: theme.spacing(0, 0, 2, -0.5),\r\n            },\r\n            display: 'grid',\r\n            marginLeft: 'auto',\r\n            marginRight: 'auto',\r\n            marginBottom: theme.spacing(2),\r\n            gridTemplateColumns: 'repeat(4, 1fr)',\r\n            '& img': {\r\n                display: 'block',\r\n                width: '100%',\r\n            },\r\n        },\r\n        deleteImage: {\r\n            position: 'absolute',\r\n            top: 0,\r\n            right: 0,\r\n            zIndex: 1,\r\n        },\r\n        imagePreview: {},\r\n        holder: {\r\n            position: 'relative',\r\n            margin: theme.spacing(0, 0, 1, 1),\r\n            backgroundColor: theme.palette.grey[100],\r\n            justifyItems: 'center',\r\n            alignItems: 'center',\r\n            display: 'flex',\r\n            '& > input': {\r\n                display: 'none',\r\n            },\r\n        },\r\n        backdrop: {\r\n            zIndex: theme.zIndex.drawer + 1,\r\n            color: '#fff',\r\n        },\r\n    })\r\n)\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        form: {\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n        },\r\n        buttons: {\r\n            margin: theme.spacing(1),\r\n            marginLeft: 'auto',\r\n            padding: theme.spacing(1, 5),\r\n        },\r\n        input: {\r\n            margin: theme.spacing(1, 0),\r\n            backgroundColor: theme.palette.background.paper,\r\n            borderRadius: 4,\r\n        },\r\n        stock: {\r\n            marginLeft: theme.spacing(2),\r\n        },\r\n        bottom: {\r\n            marginLeft: 'auto',\r\n        },\r\n        pair: {\r\n            display: 'grid',\r\n            gridTemplateColumns: '1fr 1fr',\r\n            '& > label': {\r\n                marginRight: 'auto',\r\n                marginLeft: 'auto',\r\n            },\r\n        },\r\n    })\r\n)\r\n","import ProductEditForm from './ProductEditForm'\r\n\r\nexport default ProductEditForm\r\n","import React from 'react'\r\n\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport Autocomplete from '@material-ui/lab/Autocomplete'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport SaveIcon from '@material-ui/icons/Save'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport { ProductForm } from '../../../../api/ProductAPI'\r\n\r\nimport { useStyles } from './ProductEditForm.style'\r\nimport { ProductCategory } from '../../../../types'\r\n\r\nimport clsx from 'clsx'\r\nimport { ValidationTools } from '../../../../utils'\r\n\r\ninterface ProductEditFormProps {\r\n    updateProduct: (e: any) => void\r\n    deleteProduct: (e: any) => void\r\n    data: ProductForm\r\n    setData: (data: any) => void\r\n    errors: any\r\n    categories: ProductCategory[]\r\n    uploading: boolean\r\n}\r\n\r\nconst ProductEditForm: React.FC<ProductEditFormProps> = ({\r\n    updateProduct,\r\n    deleteProduct,\r\n    data,\r\n    setData,\r\n    errors,\r\n    categories,\r\n    uploading,\r\n}) => {\r\n    const { t } = useTranslation()\r\n\r\n    const classes = useStyles()\r\n\r\n    const [category, setCategory] = React.useState<ProductCategory>(\r\n        categories.find((c) => c.id === data.category) ?? categories[0]\r\n    )\r\n\r\n    const edit = data.id !== undefined\r\n\r\n    const updateData = (actual: {}) => {\r\n        setData({ ...data, ...actual })\r\n    }\r\n\r\n    const changeData = (field: string) => (e: any) =>\r\n        updateData({ [field]: e.target.value })\r\n\r\n    const { errorFor, helperFor } = ValidationTools.createValidator(t, errors)\r\n\r\n    React.useEffect(() => {\r\n        if (category !== undefined) updateData({ category: category.id })\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [categories])\r\n\r\n    return (\r\n        <form\r\n            id=\"product-form\"\r\n            className={classes.form}\r\n            onSubmitCapture={updateProduct}\r\n            noValidate\r\n            autoComplete=\"off\"\r\n        >\r\n            <TextField\r\n                className={classes.input}\r\n                name=\"name\"\r\n                label={t('product.name')}\r\n                variant=\"outlined\"\r\n                value={data['name']}\r\n                onChange={changeData('name')}\r\n                error={errorFor('name')}\r\n                helperText={helperFor('name')}\r\n                required\r\n            />\r\n\r\n            <TextField\r\n                className={classes.input}\r\n                name=\"brand\"\r\n                label={t('product.brand')}\r\n                variant=\"outlined\"\r\n                value={data['brand']}\r\n                onChange={changeData('brand')}\r\n                error={errorFor('brand')}\r\n                helperText={helperFor('brand')}\r\n                required\r\n            />\r\n\r\n            <div className={classes.pair}>\r\n                <TextField\r\n                    className={classes.input}\r\n                    name=\"price\"\r\n                    label={t('product.price')}\r\n                    variant=\"outlined\"\r\n                    value={data['price']}\r\n                    onChange={changeData('price')}\r\n                    error={errorFor('price')}\r\n                    helperText={helperFor('price')}\r\n                    InputProps={{\r\n                        endAdornment: (\r\n                            <InputAdornment position=\"end\"></InputAdornment>\r\n                        ),\r\n                    }}\r\n                    required\r\n                />\r\n\r\n                <FormControlLabel\r\n                    control={\r\n                        <Switch\r\n                            checked={data['hidden']}\r\n                            onChange={(e) =>\r\n                                updateData({ hidden: e.target.checked })\r\n                            }\r\n                            name=\"hidden\"\r\n                            color=\"primary\"\r\n                        />\r\n                    }\r\n                    label={t('product.hidden')}\r\n                />\r\n            </div>\r\n\r\n            <div className={classes.pair}>\r\n                <Autocomplete\r\n                    className={classes.input}\r\n                    options={categories}\r\n                    getOptionLabel={(c) => t(`category.${c.name!!}`)}\r\n                    value={category}\r\n                    onChange={(e, v) => {\r\n                        setCategory(v)\r\n                        updateData({ category: v.id })\r\n                    }}\r\n                    disableClearable\r\n                    renderInput={(params) => (\r\n                        <TextField\r\n                            {...params}\r\n                            name=\"category\"\r\n                            label={t('product.category')}\r\n                            variant=\"outlined\"\r\n                            error={errorFor('category')}\r\n                            helperText={helperFor('category')}\r\n                        />\r\n                    )}\r\n                />\r\n\r\n                <TextField\r\n                    className={clsx(classes.input, classes.stock)}\r\n                    name=\"stock\"\r\n                    label={t('product.stock')}\r\n                    variant=\"outlined\"\r\n                    type=\"number\"\r\n                    value={data['stock']}\r\n                    onChange={changeData('stock')}\r\n                    error={errorFor('stock')}\r\n                    helperText={helperFor('stock')}\r\n                    InputLabelProps={{\r\n                        shrink: true,\r\n                    }}\r\n                    required\r\n                />\r\n            </div>\r\n\r\n            <TextField\r\n                className={classes.input}\r\n                name=\"description\"\r\n                label={t('product.description')}\r\n                variant=\"outlined\"\r\n                value={data['description']}\r\n                onChange={changeData('description')}\r\n                error={errorFor('description')}\r\n                helperText={helperFor('description')}\r\n                multiline\r\n                rows={17}\r\n            />\r\n\r\n            <div className={classes.bottom}>\r\n                {edit && (\r\n                    <Button\r\n                        className={classes.buttons}\r\n                        disableElevation\r\n                        id=\"delete-bt\"\r\n                        onClick={deleteProduct}\r\n                        variant=\"contained\"\r\n                        color=\"secondary\"\r\n                        type=\"submit\"\r\n                        size=\"large\"\r\n                        disabled={uploading}\r\n                        startIcon={<DeleteIcon />}\r\n                    >\r\n                        {t('product.delete')}\r\n                    </Button>\r\n                )}\r\n\r\n                <Button\r\n                    className={classes.buttons}\r\n                    id=\"publish-bt\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    type=\"submit\"\r\n                    size=\"large\"\r\n                    disabled={uploading}\r\n                    startIcon={<SaveIcon />}\r\n                >\r\n                    {t('product.save')}\r\n                </Button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default ProductEditForm\r\n","import ProductEdit from './ProductEdit'\r\n\r\nexport default ProductEdit\r\n","import React from 'react'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\nimport {\r\n    useProductService,\r\n    useResourceService,\r\n    useSessionService,\r\n} from '../../services'\r\nimport { Constants, HttpStatusCode } from '../../utils'\r\n\r\nimport { ProductForm } from '../../api/ProductAPI'\r\n\r\nimport { useStyles } from './ProductEdit.style'\r\nimport { RouteComponentProps } from 'react-router'\r\nimport {\r\n    CircularProgressIndicator,\r\n    Loading,\r\n    ProductImg,\r\n} from '../../components'\r\n\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\r\nimport Backdrop from '@material-ui/core/Backdrop'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\n\r\nimport { ProductEditForm } from './components'\r\nimport { ProductCategory } from '../../types'\r\n\r\ninterface ProductEditProps {\r\n    id?: string\r\n}\r\n\r\nconst ProductEdit: React.FC<RouteComponentProps<ProductEditProps>> = ({\r\n    match,\r\n    history,\r\n}) => {\r\n    const { id } = match.params\r\n\r\n    const { t } = useTranslation()\r\n\r\n    const productService = useProductService()\r\n    const sessionService = useSessionService()\r\n    const resources = useResourceService()\r\n\r\n    const classes = useStyles()\r\n\r\n    const edit = id !== undefined\r\n\r\n    const [categories, setCategories] = React.useState<ProductCategory[]>()\r\n    const [data, setData] = React.useState<ProductForm | undefined>(\r\n        edit\r\n            ? undefined\r\n            : {\r\n                  id: undefined,\r\n                  name: '',\r\n                  brand: '',\r\n                  description: '',\r\n                  price: 0,\r\n                  stock: 1,\r\n                  category: 0,\r\n                  hidden: false,\r\n              }\r\n    )\r\n\r\n    const [errors, setErrors] = React.useState<any>({})\r\n\r\n    const [uploadProgress, setUploadProgress] = React.useState<any>()\r\n\r\n    const uploading = uploadProgress !== undefined\r\n\r\n    const onUploadProgress = (e: any) => {\r\n        const p = (e.loaded / e.total) * 100\r\n        setUploadProgress(p === 100 ? undefined : p)\r\n    }\r\n\r\n    const [imagePreviews, setImagePreviews] = React.useState<any[]>(\r\n        new Array(Constants.MAX_PRODUCT_IMAGES)\r\n    )\r\n    const [files, setFiles] = React.useState<any[]>(\r\n        new Array(Constants.MAX_PRODUCT_IMAGES)\r\n    )\r\n    const [images, setImages] = React.useState<any[]>([])\r\n\r\n    const goBack = () => history.goBack()\r\n\r\n    const updateProduct = async (e: any) => {\r\n        e.preventDefault()\r\n\r\n        if (uploading) return\r\n        if (!data) return\r\n\r\n        const r = await productService.publishProduct(\r\n            data,\r\n            files,\r\n            onUploadProgress,\r\n            edit\r\n        )\r\n\r\n        switch (r.status) {\r\n            case HttpStatusCode.OK:\r\n            case HttpStatusCode.Forbidden:\r\n                history.push(`/product/${r.data}`)\r\n                break\r\n            case HttpStatusCode.BadRequest:\r\n                setErrors((r.data as any).error)\r\n        }\r\n    }\r\n\r\n    const deleteProduct = async (e: any) => {\r\n        e.preventDefault()\r\n\r\n        if (uploading) return\r\n        if (!edit) return\r\n        const r = await productService.deleteProduct(data?.id!!)\r\n\r\n        switch (r.status) {\r\n            case HttpStatusCode.OK:\r\n                history.push('/profile')\r\n                break\r\n            case HttpStatusCode.Forbidden:\r\n                goBack()\r\n        }\r\n    }\r\n\r\n    const removePhoto = (i: number) => {\r\n        setImagePreviews((current) => {\r\n            current[i] = undefined\r\n            return [...current]\r\n        })\r\n        setFiles((current) => {\r\n            current[i] = null\r\n            return [...current]\r\n        })\r\n        setImages((current) => {\r\n            const index = current.findIndex((im) => im?.i === i)\r\n            current[index] = undefined\r\n            return [...current]\r\n        })\r\n    }\r\n\r\n    const selectPhoto = (i: number, e: any) => {\r\n        const file = e.target.files[0]\r\n        const image = URL.createObjectURL(file)\r\n        setImagePreviews((current) => {\r\n            current[i] = image\r\n            return [...current]\r\n        })\r\n        setFiles((current) => {\r\n            current[i] = file\r\n            return [...current]\r\n        })\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const handleNotFound = () => history.push('/404')\r\n        const handleNotPermission = () => history.goBack()\r\n\r\n        const fetchProduct = async (productId: number) => {\r\n            const r = await productService.getProduct(productId)\r\n            const session = sessionService.current()\r\n\r\n            switch (r.status) {\r\n                case HttpStatusCode.OK:\r\n                    const p = r.data\r\n                    if (p.userId !== session?.userId && !session?.admin) {\r\n                        handleNotPermission()\r\n                        return\r\n                    }\r\n\r\n                    setData({\r\n                        id: p.id,\r\n                        name: p.name,\r\n                        brand: p.brand,\r\n                        description: p.description,\r\n                        price: p.price,\r\n                        stock: p.stock,\r\n                        category: p.category.id,\r\n                        hidden: p.hidden,\r\n                    })\r\n\r\n                    setImages(p.images)\r\n                    break\r\n                case HttpStatusCode.NotFound:\r\n                    handleNotFound()\r\n            }\r\n        }\r\n\r\n        if (edit) {\r\n            let productId = parseInt(id!!)\r\n            fetchProduct(productId)\r\n        }\r\n    }, [edit, productService, id, history, sessionService])\r\n\r\n    React.useEffect(() => {\r\n        const fetchCategories = async () => {\r\n            const r = await productService.findCategories()\r\n\r\n            if (r.status === HttpStatusCode.OK) setCategories(r.data)\r\n        }\r\n\r\n        if (!categories) fetchCategories()\r\n    }, [productService, categories])\r\n\r\n    return (\r\n        <>\r\n            {categories === undefined || data === undefined ? (\r\n                <Loading />\r\n            ) : (\r\n                <div className={classes.root}>\r\n                    <header className={classes.header}>\r\n                        <IconButton onClick={() => goBack()}>\r\n                            <ArrowBackIcon />\r\n                        </IconButton>\r\n                        <Typography\r\n                            className={classes.title}\r\n                            variant=\"h4\"\r\n                            component=\"h1\"\r\n                        >\r\n                            {edit ? t('product.edit') : t('product.publish')}\r\n                        </Typography>\r\n                    </header>\r\n                    <div className={classes.images}>\r\n                        {Array.from(\r\n                            { length: Constants.MAX_PRODUCT_IMAGES },\r\n                            (_, i) => i\r\n                        ).map((i) => {\r\n                            const url = images.find((im) => im?.i === i)?.u\r\n                            return (\r\n                                <Paper key={i} className={classes.holder}>\r\n                                    {(url || files[i]) && (\r\n                                        <IconButton\r\n                                            size=\"small\"\r\n                                            component=\"span\"\r\n                                            onClick={() => removePhoto(i)}\r\n                                            className={classes.deleteImage}\r\n                                        >\r\n                                            <DeleteIcon color=\"error\" />\r\n                                        </IconButton>\r\n                                    )}\r\n                                    <input\r\n                                        accept=\".jpg,.jpeg,.png\"\r\n                                        id={`product-img-upload-${i}`}\r\n                                        type=\"file\"\r\n                                        onChange={(e) => selectPhoto(i, e)}\r\n                                    />\r\n                                    <label htmlFor={`product-img-upload-${i}`}>\r\n                                        <IconButton component=\"span\">\r\n                                            <ProductImg\r\n                                                className={classes.imagePreview}\r\n                                                src={imagePreviews[i]}\r\n                                                url={url ?? undefined}\r\n                                                resources={resources}\r\n                                                alt={`I${i}`}\r\n                                            />\r\n                                        </IconButton>\r\n                                    </label>\r\n                                </Paper>\r\n                            )\r\n                        })}\r\n                    </div>\r\n                    <ProductEditForm\r\n                        {...{\r\n                            updateProduct,\r\n                            deleteProduct,\r\n                            errors,\r\n                            data,\r\n                            setData,\r\n                            categories,\r\n                            uploading,\r\n                        }}\r\n                    />\r\n                </div>\r\n            )}\r\n            <Backdrop className={classes.backdrop} open={uploading}>\r\n                <CircularProgressIndicator value={uploadProgress} size={52} />\r\n            </Backdrop>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ProductEdit\r\n","import React from 'react'\r\nimport { RouteComponentProps } from 'react-router'\r\n\r\nimport { useSessionService } from '../services'\r\n\r\nconst Logout: React.FC<RouteComponentProps> = ({ history }) => {\r\n    const sessionService = useSessionService()\r\n\r\n    React.useEffect(() => {\r\n        const logout = async () => {\r\n            if (sessionService.isLogged()) await sessionService.logout()\r\n\r\n            history.push('/')\r\n        }\r\n\r\n        logout()\r\n    }, [sessionService, history])\r\n\r\n    return <></>\r\n}\r\n\r\nexport default Logout\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n        },\r\n        controls: {\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n            flexWrap: 'wrap',\r\n            width: 'calc(100% - 32px)',\r\n            margin: theme.spacing(0, 4, 2, 4),\r\n            [theme.breakpoints.down('xs')]: {\r\n                width: 'calc(100% - 16px)',\r\n                margin: theme.spacing(0, 2, 2, 2),\r\n            },\r\n        },\r\n        categories: {\r\n            margin: theme.spacing(1.5, 0.5, 0.5),\r\n            '& > div': {\r\n                margin: theme.spacing(0.5),\r\n            },\r\n            display: 'flex',\r\n            maxWidth: '100%',\r\n            overflowX: 'auto',\r\n            scrollbarWidth: 'none',\r\n            '&::-webkit-scrollbar': {\r\n                display: 'none',\r\n            },\r\n        },\r\n        filterInput: {\r\n            width: 200,\r\n        },\r\n        filterField: {\r\n            backgroundColor: theme.palette.background.paper,\r\n            borderRadius: 4,\r\n        },\r\n    })\r\n)\r\n","import React from 'react'\r\n\r\nimport { RouteComponentProps } from 'react-router'\r\n\r\nimport {\r\n    useCartService,\r\n    useFavoriteService,\r\n    useProductService,\r\n    useResourceService,\r\n} from '../../services'\r\n\r\nimport { PreviewProduct, ProductCategory } from '../../types'\r\n\r\nimport { PageContainer, ProductHolder } from '../../components'\r\nimport { HttpStatusCode } from '../../utils'\r\n\r\nimport Chip from '@material-ui/core/Chip'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Autocomplete from '@material-ui/lab/Autocomplete'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess'\r\n\r\nimport AccessTimeIcon from '@material-ui/icons/AccessTime'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport { useStyles } from './Search.style'\r\nimport { Paged } from '../../api/types'\r\n\r\ninterface SearchParams {\r\n    query: string\r\n}\r\n\r\nexport interface SearchLocationState {\r\n    category?: number\r\n    page?: number\r\n    all?: boolean\r\n    order?: number\r\n}\r\n\r\nconst sortingModes = [\r\n    { mode: -1, name: 'search.filter.recent', icon: <AccessTimeIcon /> },\r\n    { mode: 2, name: 'search.filter.price_up', icon: <ExpandLessIcon /> },\r\n    { mode: -2, name: 'search.filter.price_down', icon: <ExpandMoreIcon /> },\r\n]\r\n\r\nconst Search: React.FC<RouteComponentProps<SearchParams>> = ({\r\n    location,\r\n    history,\r\n    match,\r\n}) => {\r\n    const { query } = match.params\r\n\r\n    const state = location?.state as SearchLocationState\r\n\r\n    const { t } = useTranslation()\r\n\r\n    const productService = useProductService()\r\n    const cartService = useCartService()\r\n    const favService = useFavoriteService()\r\n    const resources = useResourceService()\r\n\r\n    const [shownItems, setShownItems] = React.useState<Paged<PreviewProduct>>()\r\n    const [categories, setCategories] = React.useState<ProductCategory[]>()\r\n\r\n    const [category, setCategory] = React.useState(state?.category)\r\n\r\n    const [selectedOrder, setSelectedOrder] = React.useState(sortingModes[0])\r\n    const [order, setOrder] = React.useState(state?.order ?? selectedOrder.mode)\r\n\r\n    const all = state?.all === true\r\n\r\n    const classes = useStyles()\r\n\r\n    const handleCategory = (id: number) => {\r\n        const newId = category === id ? undefined : id\r\n        history.push(location.pathname, {\r\n            all: all ? newId !== undefined : undefined,\r\n            category: newId,\r\n            page: undefined,\r\n            order,\r\n        })\r\n\r\n        setCategory(newId)\r\n    }\r\n\r\n    const handleOrder = (mode: any) => {\r\n        history.push(location.pathname, {\r\n            all,\r\n            category,\r\n            page: undefined,\r\n            order: mode.mode,\r\n        })\r\n\r\n        setSelectedOrder(mode)\r\n        setOrder(mode.mode)\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const fetchCategories = async () => {\r\n            const r = await productService.findCategories()\r\n\r\n            if (r.status === HttpStatusCode.OK) setCategories(r.data)\r\n        }\r\n\r\n        if (!categories) fetchCategories()\r\n    }, [productService, categories])\r\n\r\n    return (\r\n        <>\r\n            <div className={classes.root}>\r\n                <div className={classes.categories}>\r\n                    {shownItems !== undefined &&\r\n                        categories &&\r\n                        categories.map((c) => (\r\n                            <Chip\r\n                                key={c.id}\r\n                                color={\r\n                                    category === c.id ? 'secondary' : undefined\r\n                                }\r\n                                onClick={() => handleCategory(c.id)}\r\n                                label={t(`category.${c.name}`)}\r\n                            />\r\n                        ))}\r\n                </div>\r\n\r\n                {shownItems !== undefined && (\r\n                    <div className={classes.controls}>\r\n                        <Typography\r\n                            variant=\"h5\"\r\n                            component=\"h1\"\r\n                            color=\"textSecondary\"\r\n                        >\r\n                            {t('search.found')\r\n                                .replace('{0}', `${shownItems.total}`)\r\n                                .replace('{1}', () => query)}\r\n                        </Typography>\r\n                        <Autocomplete\r\n                            className={classes.filterInput}\r\n                            options={sortingModes}\r\n                            getOptionLabel={(m) => t(m.name)}\r\n                            value={selectedOrder}\r\n                            onChange={(e, v) => handleOrder(v)}\r\n                            disableClearable\r\n                            renderInput={(params) => (\r\n                                <TextField\r\n                                    {...params}\r\n                                    className={classes.filterField}\r\n                                    variant=\"outlined\"\r\n                                    margin=\"dense\"\r\n                                />\r\n                            )}\r\n                        />\r\n                    </div>\r\n                )}\r\n\r\n                <PageContainer\r\n                    request={(page) =>\r\n                        productService.searchProducts({\r\n                            query: all ? '' : query,\r\n                            page,\r\n                            category,\r\n                            order,\r\n                        })\r\n                    }\r\n                    itemRender={(product: PreviewProduct, i) => (\r\n                        <ProductHolder\r\n                            key={i}\r\n                            {...{ product, cartService, favService, resources }}\r\n                        />\r\n                    )}\r\n                    {...{ setShownItems, deps: [order, category, query] }}\r\n                />\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Search\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        top: {\r\n            margin: theme.spacing(3, 4, 4, 4),\r\n            display: 'flex',\r\n            flexWrap: 'wrap',\r\n            '& > h1': {\r\n                margin: theme.spacing(1, 1, 0, 0),\r\n            },\r\n        },\r\n        toggler: {\r\n            margin: theme.spacing(1, 0, 'auto', 'auto'),\r\n            maxHeight: theme.spacing(5),\r\n            backgroundColor: theme.palette.background.paper,\r\n        },\r\n    })\r\n)\r\n","import Favorites from './Favorites'\r\n\r\nexport default Favorites\r\n","import React from 'react'\r\n\r\nimport { PreviewProduct, User } from '../../types'\r\n\r\nimport {\r\n    useCartService,\r\n    useFavoriteService,\r\n    useResourceService,\r\n} from '../../services'\r\n\r\nimport {\r\n    ContentWarn,\r\n    PageContainer,\r\n    ProductHolder,\r\n    UserHolder,\r\n} from '../../components'\r\n\r\nimport Favorite from '@material-ui/icons/Favorite'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup'\r\nimport ToggleButton from '@material-ui/lab/ToggleButton'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport { useStyles } from './Favorites.style'\r\n\r\nimport { RouteComponentProps } from 'react-router'\r\n\r\nconst Favorites: React.FC<RouteComponentProps> = ({ history, location }) => {\r\n    const favService = useFavoriteService()\r\n    const cartService = useCartService()\r\n    const resources = useResourceService()\r\n\r\n    const { t } = useTranslation()\r\n    const classes = useStyles()\r\n\r\n    const [productOrUser, setProductOrUser] = React.useState(\r\n        (location?.state as any)?.favType !== false\r\n    )\r\n\r\n    const handleType = (e: any, value: boolean) => {\r\n        history.push(location.pathname, {\r\n            favType: value,\r\n            page: undefined,\r\n        })\r\n\r\n        setProductOrUser(value)\r\n    }\r\n\r\n    const Empty = () => (\r\n        <ContentWarn>\r\n            <Favorite />\r\n            <Typography>{t('favorites.empty')}</Typography>\r\n        </ContentWarn>\r\n    )\r\n\r\n    return (\r\n        <>\r\n            <div className={classes.top}>\r\n                <Typography variant=\"h4\" component=\"h1\">\r\n                    {t('favorites.title')}\r\n                </Typography>\r\n                <ToggleButtonGroup\r\n                    value={productOrUser}\r\n                    exclusive\r\n                    onChange={handleType}\r\n                    className={classes.toggler}\r\n                >\r\n                    <ToggleButton value={true}>\r\n                        {t('favorites.products')}\r\n                    </ToggleButton>\r\n                    <ToggleButton value={false}>\r\n                        {t('favorites.vendors')}\r\n                    </ToggleButton>\r\n                </ToggleButtonGroup>\r\n            </div>\r\n\r\n            <PageContainer\r\n                request={(page) =>\r\n                    favService.getForUser({ page }, productOrUser)\r\n                }\r\n                itemRender={(item, i) =>\r\n                    productOrUser ? (\r\n                        <ProductHolder\r\n                            key={i}\r\n                            {...{\r\n                                product: item as PreviewProduct,\r\n                                cartService,\r\n                                favService,\r\n                                resources,\r\n                            }}\r\n                        />\r\n                    ) : (\r\n                        <UserHolder\r\n                            key={i}\r\n                            {...{\r\n                                user: item as User,\r\n                                favService,\r\n                                resources,\r\n                            }}\r\n                        />\r\n                    )\r\n                }\r\n                EmptyComponent={Empty}\r\n                {...{ setShownItems: () => undefined, deps: [productOrUser] }}\r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Favorites\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        header: {\r\n            margin: theme.spacing(2, 4),\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            alignItems: 'center',\r\n            flexWrap: 'wrap',\r\n        },\r\n        title: {\r\n            userSelect: 'none',\r\n            marginRight: theme.spacing(1),\r\n        },\r\n        contentHolder: {\r\n            display: 'flex',\r\n        },\r\n        list: {\r\n            width: '100%',\r\n            maxWidth: 1280,\r\n            padding: theme.spacing(1),\r\n            margin: 'auto',\r\n        },\r\n        buyHolder: {\r\n            margin: theme.spacing(2, 0, 0, 'auto'),\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            width: 200,\r\n            height: 100,\r\n            '& > *': {\r\n                margin: 'auto',\r\n            },\r\n        },\r\n        bottom: {\r\n            marginTop: theme.spacing(2),\r\n            '& > h2': {\r\n                margin: theme.spacing(2),\r\n            },\r\n        },\r\n    })\r\n)\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            padding: theme.spacing(1),\r\n            marginBottom: theme.spacing(1),\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            minHeight: 200,\r\n            maxHeight: 250,\r\n            [theme.breakpoints.down('xs')]: {\r\n                maxHeight: 500,\r\n                display: 'grid',\r\n            },\r\n        },\r\n        title: {\r\n            display: 'flex',\r\n            '& > h2': {\r\n                cursor: 'pointer',\r\n            },\r\n            '& > *': {\r\n                alignSelf: 'center',\r\n            },\r\n            '& > p': {\r\n                marginLeft: theme.spacing(1),\r\n            },\r\n        },\r\n        imageContainer: {\r\n            margin: theme.spacing(1),\r\n            alignSelf: 'center',\r\n            minWidth: 250,\r\n            display: 'flex',\r\n            '& img': {\r\n                maxWidth: 250,\r\n                maxHeight: 175,\r\n                display: 'block',\r\n                borderRadius: 4,\r\n            },\r\n        },\r\n        image: {\r\n            margin: 'auto',\r\n            backgroundColor: theme.palette.grey[100],\r\n            '& > button': {\r\n                borderRadius: 4,\r\n            },\r\n        },\r\n        content: {\r\n            padding: theme.spacing(1, 0),\r\n            marginLeft: theme.spacing(1),\r\n            flexBasis: '100%',\r\n            overflowX: 'hidden',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n        },\r\n        amount: {\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n        },\r\n        subtotal: {\r\n            textAlign: 'end',\r\n            margin: theme.spacing(0.5),\r\n        },\r\n        actions: {\r\n            marginTop: 'auto',\r\n        },\r\n    })\r\n)\r\n","import CartProductHolder from './CartProductHolder'\r\n\r\nexport default CartProductHolder\r\n","import React from 'react'\r\n\r\nimport { CartProductPreview } from '../../../../types'\r\nimport { CartService, FavoriteService, ResourceService } from '../../../../api'\r\n\r\nimport { useTheme } from '@material-ui/core'\r\n\r\nimport { HttpStatusCode } from '../../../../utils'\r\n\r\nimport ButtonBase from '@material-ui/core/ButtonBase'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport UndoIcon from '@material-ui/icons/Undo'\r\nimport FavoriteBorder from '@material-ui/icons/FavoriteBorder'\r\nimport Favorite from '@material-ui/icons/Favorite'\r\n\r\nimport { useStyles } from './CartProductHolder.style'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\nimport { ProductImg } from '../../../../components'\r\n\r\nconst round = (n: number) => Math.round(n * 100) / 100\r\n\r\nconst CartProductHolder: React.FC<{\r\n    product: CartProductPreview\r\n    cartService: CartService\r\n    favoriteService: FavoriteService\r\n    resources: ResourceService\r\n    history: any\r\n    updateTotal: any\r\n}> = ({\r\n    product: pc,\r\n    cartService,\r\n    favoriteService,\r\n    history,\r\n    resources,\r\n    updateTotal,\r\n}) => {\r\n    const theme = useTheme()\r\n    const classes = useStyles()\r\n    const { t } = useTranslation()\r\n\r\n    const [favorite, setFavorite] = React.useState(pc.product.fav === true)\r\n\r\n    const [removed, setRemoved] = React.useState(false)\r\n    const [unavailable, setUnavailable] = React.useState(\r\n        pc.unavailable === true\r\n    )\r\n\r\n    const [amountField, setAmountField] = React.useState<any>(pc.amount)\r\n    const [amountError, setAmountError] = React.useState<string>()\r\n\r\n    const outStock = pc.product.stock <= 0\r\n\r\n    const calcSub = () => round(pc.amount * pc.product.price)\r\n\r\n    const [subtotal, setSubtotal] = React.useState(calcSub())\r\n\r\n    const checkStock = (a: number) => {\r\n        if (a > pc.product.stock) {\r\n            setAmountError(t('cart.no_stock'))\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        checkStock(pc.amount)\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [setAmountError, pc])\r\n\r\n    const gotoProduct = () =>\r\n        history.push(`/product/${pc.product.id}`, undefined)\r\n\r\n    const handleCart = async (e: any) => {\r\n        e.stopPropagation()\r\n\r\n        const r = await (!removed\r\n            ? cartService.remove(pc.product.id)\r\n            : cartService.update({\r\n                  productId: pc.product.id,\r\n                  amount: pc.amount,\r\n                  add: false,\r\n              }))\r\n\r\n        switch (r.status) {\r\n            case HttpStatusCode.OK:\r\n                pc.removed = !removed\r\n                updateTotal()\r\n                setRemoved(!removed)\r\n                break\r\n            case HttpStatusCode.NotFound:\r\n                pc.unavailable = true\r\n                setUnavailable(true)\r\n                break\r\n            case HttpStatusCode.BadRequest:\r\n                if (pc.product.stock) checkStock(pc.amount)\r\n        }\r\n    }\r\n\r\n    const changeUnits = async () => {\r\n        const a = parseInt(amountField)\r\n\r\n        setAmountField(pc.amount)\r\n        if (isNaN(a)) return\r\n\r\n        if (a <= 0 || a === pc.amount) return\r\n\r\n        setAmountField(a)\r\n        if (checkStock(a)) return\r\n\r\n        pc.amount = a\r\n        updateTotal()\r\n        setAmountError(undefined)\r\n        setSubtotal(calcSub())\r\n\r\n        const r = await cartService.update({\r\n            productId: pc.product.id,\r\n            amount: a,\r\n            add: false,\r\n        })\r\n\r\n        if (r.status !== HttpStatusCode.OK) return\r\n\r\n        setRemoved(false)\r\n        updateTotal()\r\n    }\r\n\r\n    const addToFav = async (e: any) => {\r\n        e.stopPropagation()\r\n\r\n        const r = await (favorite\r\n            ? favoriteService.remove(pc.product.id)\r\n            : favoriteService.add(pc.product.id))\r\n\r\n        if (r.status !== HttpStatusCode.OK) return\r\n\r\n        setFavorite(!favorite)\r\n    }\r\n\r\n    return (\r\n        <Paper variant=\"outlined\" className={classes.root}>\r\n            <div className={classes.imageContainer}>\r\n                <Paper variant=\"outlined\" className={classes.image}>\r\n                    <ButtonBase onClick={gotoProduct}>\r\n                        <ProductImg\r\n                            url={pc.product.mainImage}\r\n                            resources={resources}\r\n                        />\r\n                    </ButtonBase>\r\n                </Paper>\r\n            </div>\r\n\r\n            <div className={classes.content}>\r\n                <div className={classes.title}>\r\n                    <Typography\r\n                        variant=\"h6\"\r\n                        component={unavailable ? 'h3' : 'h2'}\r\n                        onClick={unavailable ? undefined : gotoProduct}\r\n                        color={unavailable ? 'error' : 'initial'}\r\n                    >\r\n                        {unavailable ? t('cart.unavailable') : pc.product.name}\r\n                    </Typography>\r\n\r\n                    {unavailable && (\r\n                        <Typography\r\n                            variant=\"body1\"\r\n                            component=\"p\"\r\n                            color={'textSecondary'}\r\n                        >\r\n                            {pc.product.name}\r\n                        </Typography>\r\n                    )}\r\n                </div>\r\n\r\n                {!unavailable && (\r\n                    <>\r\n                        <Typography variant=\"button\" color=\"textSecondary\">\r\n                            {`${pc.product.price} /`}\r\n                            {t('cart.unit')}\r\n                        </Typography>\r\n                        <Typography\r\n                            variant=\"h6\"\r\n                            className={classes.subtotal}\r\n                        >{`${subtotal} `}</Typography>\r\n\r\n                        <div className={classes.amount}>\r\n                            <TextField\r\n                                label={t('product.amount')}\r\n                                variant=\"outlined\"\r\n                                margin=\"dense\"\r\n                                value={amountField}\r\n                                style={{ maxWidth: 100 }}\r\n                                onChange={(e) => setAmountField(e.target.value)}\r\n                                onBlur={changeUnits}\r\n                                error={amountError !== undefined}\r\n                                InputLabelProps={{\r\n                                    shrink: true,\r\n                                }}\r\n                            />\r\n                            {!outStock && amountError && (\r\n                                <Typography\r\n                                    variant=\"caption\"\r\n                                    color=\"error\"\r\n                                    className={classes.subtotal}\r\n                                >\r\n                                    {amountError}\r\n                                </Typography>\r\n                            )}\r\n                            {outStock && (\r\n                                <Typography\r\n                                    className={classes.subtotal}\r\n                                    variant=\"button\"\r\n                                    color=\"error\"\r\n                                >\r\n                                    {t('product.no_stock')}\r\n                                </Typography>\r\n                            )}\r\n                        </div>\r\n                    </>\r\n                )}\r\n\r\n                <div className={classes.actions}>\r\n                    <IconButton\r\n                        id=\"remove-cart-bt\"\r\n                        size={'small'}\r\n                        onClick={handleCart}\r\n                    >\r\n                        {removed ? (\r\n                            !unavailable && <UndoIcon />\r\n                        ) : (\r\n                            <DeleteIcon htmlColor={theme.palette.error.main} />\r\n                        )}\r\n                    </IconButton>\r\n                    {!unavailable && (\r\n                        <IconButton size={'small'} onClick={addToFav}>\r\n                            {favorite ? (\r\n                                <Favorite\r\n                                    htmlColor={theme.palette.error.main}\r\n                                />\r\n                            ) : (\r\n                                <FavoriteBorder />\r\n                            )}\r\n                        </IconButton>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default CartProductHolder\r\n","import InvalidCartDialog from './InvalidCartDialog'\r\n\r\nexport default InvalidCartDialog\r\n","import React from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\n\r\ninterface InvalidCartDialogProps {\r\n    content: string | undefined\r\n    setContent: (open: string | undefined) => void\r\n}\r\n\r\nconst InvalidCartDialog: React.FC<InvalidCartDialogProps> = ({\r\n    content,\r\n    setContent,\r\n}) => {\r\n    const { t } = useTranslation()\r\n\r\n    const handleClose = () => setContent(undefined)\r\n\r\n    return (\r\n        <Dialog\r\n            open={content !== undefined}\r\n            onClose={handleClose}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle id=\"alert-dialog-title\">\r\n                {t('cart.invalid.title')}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                {content && (\r\n                    <DialogContentText id=\"alert-dialog-description\">\r\n                        {content}\r\n                    </DialogContentText>\r\n                )}\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    id=\"got-it-bt\"\r\n                    onClick={handleClose}\r\n                    color=\"primary\"\r\n                    autoFocus\r\n                >\r\n                    {t('cart.invalid.button')}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default InvalidCartDialog\r\n","import CartPage from './CartPage'\r\n\r\nexport default CartPage","import React from 'react'\r\n\r\nimport {\r\n    useCartService,\r\n    useFavoriteService,\r\n    useResourceService,\r\n} from '../../services'\r\n\r\nimport { ContentWarn, Loading } from '../../components'\r\n\r\nimport { CartProductPreview } from '../../types'\r\n\r\nimport { HttpStatusCode } from '../../utils'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport ShoppingCart from '@material-ui/icons/ShoppingCart'\r\nimport PaymentIcon from '@material-ui/icons/Payment'\r\n\r\nimport { useStyles } from './CartPage.style'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\nimport { RouteComponentProps } from 'react-router'\r\n\r\nimport { CartProductHolder, InvalidCartDialog } from './components'\r\n\r\nconst round = (n: number) => Math.round(n * 100) / 100\r\n\r\nconst CartPage: React.FC<RouteComponentProps> = ({ history }) => {\r\n    const cartService = useCartService()\r\n    const favService = useFavoriteService()\r\n    const resources = useResourceService()\r\n\r\n    const { t } = useTranslation()\r\n    const classes = useStyles()\r\n\r\n    const [content, setContent] = React.useState<string>()\r\n\r\n    const [products, setProducts] = React.useState<CartProductPreview[]>()\r\n\r\n    const calcTotal = () =>\r\n        round(\r\n            products?.reduce<number>(\r\n                (prev, prod) =>\r\n                    (prev += prod.removed\r\n                        ? 0\r\n                        : prod.amount * prod.product.price),\r\n                0\r\n            ) ?? 0\r\n        )\r\n\r\n    const [total, setTotal] = React.useState<number>()\r\n\r\n    const [size, setSize] = React.useState<number>(0)\r\n\r\n    const updateTotal = () => {\r\n        setTotal(calcTotal())\r\n        updateSize()\r\n    }\r\n    const updateSize = () =>\r\n        setSize(\r\n            products?.reduce<number>(\r\n                (pred, p) => (pred += p.removed ? 0 : 1),\r\n                0\r\n            ) ?? 0\r\n        )\r\n\r\n    React.useEffect(() => {\r\n        const fetchProducts = async () => {\r\n            const r = await cartService.current()\r\n\r\n            setProducts(r.status === HttpStatusCode.OK ? r.data : [])\r\n        }\r\n\r\n        fetchProducts()\r\n    }, [cartService])\r\n\r\n    React.useEffect(() => {\r\n        updateTotal()\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [products])\r\n\r\n    const checkValidCart = () => {\r\n        if (size === 0) return false\r\n\r\n        const errors = products\r\n            ?.map((p) =>\r\n                !p.removed &&\r\n                (p.amount > p.product.stock || p.product.stock === 0)\r\n                    ? p.product.name\r\n                    : null\r\n            )\r\n            .filter((p) => p)\r\n\r\n        const valid = errors?.length === 0\r\n        if (!valid)\r\n            setContent(\r\n                t('cart.invalid.content') + (errors as string[]).join(', ')\r\n            )\r\n        return valid\r\n    }\r\n\r\n    const goCheckout = () => {\r\n        if (checkValidCart()) history.push('/checkout', { total, size })\r\n    }\r\n\r\n    const EmptyCart = () => (\r\n        <ContentWarn>\r\n            <ShoppingCart />\r\n            <Typography>{t('cart.empty')}</Typography>\r\n        </ContentWarn>\r\n    )\r\n\r\n    return (\r\n        <>\r\n            <header className={classes.header}>\r\n                <div>\r\n                    <Typography\r\n                        className={classes.title}\r\n                        variant=\"h3\"\r\n                        component=\"h1\"\r\n                    >\r\n                        {t('cart.title')}\r\n                    </Typography>\r\n                    <Typography\r\n                        color=\"textSecondary\"\r\n                        variant=\"h5\"\r\n                        component=\"h2\"\r\n                    >\r\n                        {size} {t(size > 1 ? 'cart.items' : 'cart.item')}\r\n                    </Typography>\r\n                </div>\r\n                <Paper variant=\"outlined\" className={classes.buyHolder}>\r\n                    <Typography variant=\"h6\" component=\"p\">\r\n                        {t('cart.total')}\r\n                        {`: ${total} `}\r\n                    </Typography>\r\n                    <Button\r\n                        id=\"proceed-bt\"\r\n                        onClick={goCheckout}\r\n                        variant=\"outlined\"\r\n                        disabled={size === 0}\r\n                        color=\"secondary\"\r\n                        endIcon={<PaymentIcon />}\r\n                    >\r\n                        {t('cart.buy')}\r\n                    </Button>\r\n                </Paper>\r\n            </header>\r\n            <div className={classes.contentHolder}>\r\n                {products !== undefined ? (\r\n                    products.length ? (\r\n                        <div className={classes.list}>\r\n                            {products!!.map((p, i: number) => (\r\n                                <CartProductHolder\r\n                                    key={i}\r\n                                    product={p}\r\n                                    {...{\r\n                                        cartService,\r\n                                        favoriteService: favService,\r\n                                        history,\r\n                                        resources,\r\n                                        updateTotal,\r\n                                    }}\r\n                                />\r\n                            ))}\r\n                        </div>\r\n                    ) : (\r\n                        <EmptyCart />\r\n                    )\r\n                ) : (\r\n                    <Loading />\r\n                )}\r\n            </div>\r\n            <InvalidCartDialog {...{ content, setContent }} />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CartPage\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        toggler: {\r\n            marginLeft: 'auto',\r\n            marginRight: theme.spacing(3),\r\n            maxHeight: theme.spacing(5),\r\n            transform: 'translateY(-50%)',\r\n            backgroundColor: theme.palette.background.paper,\r\n            [theme.breakpoints.down(520)]: {\r\n                margin: theme.spacing(3, 2, 3),\r\n                marginLeft: 'auto',\r\n                transform: 'none',\r\n            },\r\n        },\r\n        container: {\r\n            marginTop: theme.spacing(4),\r\n            margin: 'auto',\r\n        },\r\n    })\r\n)\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        top: {\r\n            position: 'relative',\r\n            display: 'flex',\r\n            padding: theme.spacing(4),\r\n            alignItems: 'center',\r\n            flexWrap: 'wrap',\r\n            backgroundColor: theme.palette.background.paper,\r\n        },\r\n        topText: {\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            margin: 'auto',\r\n            paddingLeft: theme.spacing(1),\r\n            paddingBottom: theme.spacing(2),\r\n            maxWidth: '100%',\r\n            '& > p': {\r\n                overflowWrap: 'break-word',\r\n            },\r\n        },\r\n        avatar: {\r\n            marginRight: 'auto',\r\n            marginLeft: 'auto',\r\n            marginBottom: theme.spacing(2),\r\n            height: theme.spacing(24),\r\n            width: theme.spacing(24),\r\n            fontSize: '3em',\r\n            '& img': {\r\n                display: 'block',\r\n                width: '100%',\r\n            },\r\n        },\r\n        buttons: {\r\n            position: 'absolute',\r\n            display: 'flex',\r\n            top: theme.spacing(2),\r\n            right: theme.spacing(2),\r\n            zIndex: 1,\r\n            borderRadius: '100px',\r\n            padding: theme.spacing(0.5),\r\n            //background: theme.palette.background.default,\r\n            border: 1,\r\n            borderColor: theme.palette.grey[300],\r\n            borderStyle: 'solid',\r\n        },\r\n    })\r\n)\r\n","import VendorProfileInfo from './VendorProfileInfo'\r\n\r\nexport default VendorProfileInfo\r\n","import React from 'react'\r\n\r\nimport {\r\n    useFavoriteService,\r\n    useResourceService,\r\n    useSessionService,\r\n} from '../../../../services'\r\n\r\nimport { useStyles } from './VendorProfileInfo.style'\r\nimport { HttpStatusCode } from '../../../../utils'\r\n\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport FavoriteBorder from '@material-ui/icons/FavoriteBorder'\r\nimport Favorite from '@material-ui/icons/Favorite'\r\nimport EditOutlined from '@material-ui/icons/EditOutlined'\r\nimport Paper from '@material-ui/core/Paper'\r\n\r\nimport { useTheme } from '@material-ui/core'\r\nimport { User } from '../../../../types'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\nimport { useHistory } from 'react-router'\r\n\r\ninterface VendorProfileInfoParams {\r\n    user: User\r\n    self: boolean\r\n}\r\n\r\nconst VendorProfileInfo: React.FC<VendorProfileInfoParams> = ({\r\n    user,\r\n    self,\r\n}) => {\r\n    const history = useHistory()\r\n\r\n    const favService = useFavoriteService()\r\n    const resources = useResourceService()\r\n    const sessionService = useSessionService()\r\n\r\n    const classes = useStyles()\r\n    const theme = useTheme()\r\n\r\n    const { t } = useTranslation()\r\n\r\n    const editable = self || sessionService.current()?.admin\r\n\r\n    const [profileImage, setProfileImage] = React.useState<string>()\r\n\r\n    const [favorite, setFavorite] = React.useState<boolean>()\r\n\r\n    const edit = () => {\r\n        if (editable) history.push(`/profile/edit/${user.id}`)\r\n    }\r\n\r\n    const addToFav = async (e: any) => {\r\n        e.stopPropagation()\r\n\r\n        if (!user) return\r\n\r\n        const r = await (favorite\r\n            ? favService.remove(user.id, false)\r\n            : favService.add(user.id, false))\r\n\r\n        if (r.status !== HttpStatusCode.OK) return\r\n\r\n        setFavorite(!favorite)\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const loadImage = async () => {\r\n            const r = await resources.load(user?.profileImgUri!!)\r\n            if (r.status !== HttpStatusCode.OK) return\r\n\r\n            setProfileImage(URL.createObjectURL(r.data))\r\n        }\r\n\r\n        if (user?.profileImgUri) loadImage()\r\n    }, [user, resources])\r\n\r\n    React.useEffect(() => {\r\n        if (user) setFavorite(user.fav === true)\r\n    }, [user])\r\n\r\n    return (\r\n        <div className={classes.top}>\r\n            <Paper elevation={0} className={classes.buttons}>\r\n                {!self && (\r\n                    <IconButton size=\"small\" onClick={addToFav}>\r\n                        {favorite ? (\r\n                            <Favorite htmlColor={theme.palette.error.main} />\r\n                        ) : (\r\n                            <FavoriteBorder />\r\n                        )}\r\n                    </IconButton>\r\n                )}\r\n                {editable && (\r\n                    <IconButton size=\"small\" onClick={edit}>\r\n                        <EditOutlined />\r\n                    </IconButton>\r\n                )}\r\n            </Paper>\r\n\r\n            <Avatar className={classes.avatar} src={profileImage}>\r\n                {user?.nickname?.substring(0, 2)}\r\n            </Avatar>\r\n            <div className={classes.topText}>\r\n                <Typography variant=\"h3\" component=\"h1\">\r\n                    {user?.nickname}\r\n                </Typography>\r\n                <Typography variant=\"body2\">{user?.description}</Typography>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default VendorProfileInfo\r\n","import VendorProfile from './VendorProfile'\r\n\r\nexport default VendorProfile\r\n","import React from 'react'\r\n\r\nimport { RouteComponentProps } from 'react-router'\r\n\r\nimport {\r\n    useCartService,\r\n    useFavoriteService,\r\n    useProductService,\r\n    useResourceService,\r\n    useSessionService,\r\n    useUserService,\r\n} from '../../services'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport { useStyles } from './VendorProfile.style'\r\nimport { PreviewProduct, User } from '../../types'\r\nimport { HttpStatusCode } from '../../utils'\r\nimport { ContentWarn, PageContainer, ProductHolder } from '../../components'\r\n\r\nimport Typography from '@material-ui/core/Typography'\r\nimport EmptyIcon from '@material-ui/icons/CheckBoxOutlineBlank'\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup'\r\nimport ToggleButton from '@material-ui/lab/ToggleButton'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport VendorProfileInfo from './components'\r\n\r\ninterface VendorProfileParams {\r\n    id?: string\r\n}\r\n\r\nconst VendorProfile: React.FC<RouteComponentProps<VendorProfileParams>> = ({\r\n    match,\r\n    history,\r\n    location,\r\n}) => {\r\n    const { id } = match.params\r\n\r\n    const userService = useUserService()\r\n    const productService = useProductService()\r\n    const cartService = useCartService()\r\n    const favService = useFavoriteService()\r\n    const sessionService = useSessionService()\r\n    const resources = useResourceService()\r\n\r\n    const { t } = useTranslation()\r\n\r\n    const classes = useStyles()\r\n\r\n    const session = sessionService.current()\r\n    const self = id === undefined || session?.userId === parseInt(id)\r\n    const perms = self || session?.admin\r\n\r\n    const vendorId = self ? session?.userId!! : parseInt(id!!)\r\n\r\n    const [user, setUser] = React.useState<User>()\r\n\r\n    const [shown, setShown] = React.useState(\r\n        (location?.state as any)?.shown !== false\r\n    )\r\n\r\n    const handleShown = (e: any, value: boolean) => {\r\n        if (perms) {\r\n            history.push(location.pathname, {\r\n                shown: value,\r\n                page: undefined,\r\n            })\r\n            setShown(value)\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const handleNotFound = () => history.replace('/404')\r\n\r\n        const fetchVendor = async () => {\r\n            const r = await userService.getUser(vendorId)\r\n\r\n            switch (r.status) {\r\n                case HttpStatusCode.OK:\r\n                    setUser(r.data)\r\n                    break\r\n                case HttpStatusCode.Forbidden:\r\n                    history.goBack()\r\n                    break\r\n                case HttpStatusCode.NotFound:\r\n                    handleNotFound()\r\n            }\r\n        }\r\n\r\n        if (isNaN(vendorId)) handleNotFound()\r\n        else fetchVendor()\r\n    }, [userService, vendorId, history])\r\n\r\n    const Empty = () => (\r\n        <ContentWarn>\r\n            <EmptyIcon />\r\n            <Typography>{t('profile.empty')}</Typography>\r\n        </ContentWarn>\r\n    )\r\n\r\n    return (\r\n        <>\r\n            {user && <VendorProfileInfo {...{ user, self }} />}\r\n\r\n            <Divider />\r\n\r\n            {user && perms && (\r\n                <ToggleButtonGroup\r\n                    value={shown}\r\n                    exclusive\r\n                    onChange={handleShown}\r\n                    className={classes.toggler}\r\n                >\r\n                    <ToggleButton value={true}>\r\n                        {t('profile.shown')}\r\n                    </ToggleButton>\r\n                    <ToggleButton value={false}>\r\n                        {t('profile.hidden')}\r\n                    </ToggleButton>\r\n                </ToggleButtonGroup>\r\n            )}\r\n\r\n            <div className={perms ? undefined : classes.container}>\r\n                <PageContainer\r\n                    request={(page) =>\r\n                        productService.getVendorProducts(vendorId, shown, {\r\n                            page,\r\n                        })\r\n                    }\r\n                    itemRender={(product: PreviewProduct, i) => (\r\n                        <ProductHolder\r\n                            key={i}\r\n                            {...{\r\n                                product,\r\n                                cartService,\r\n                                favService,\r\n                                resources,\r\n                                noFav: self,\r\n                                noCart: !shown,\r\n                            }}\r\n                        />\r\n                    )}\r\n                    EmptyComponent={Empty}\r\n                    {...{ setShownItems: () => undefined, deps: [shown] }}\r\n                />\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default VendorProfile\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            margin: theme.spacing(1),\r\n        },\r\n        header: {\r\n            margin: theme.spacing(4),\r\n        },\r\n    })\r\n)\r\n","import ReportHolder from './ReportHolder'\r\n\r\nexport default ReportHolder\r\n","import React from 'react'\r\n\r\nimport { ProductReport } from '../../../../types'\r\n\r\nimport Delete from '@material-ui/icons/Delete'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport IconButton from '@material-ui/core/IconButton'\r\n\r\nimport { DateUtils } from '../../../../utils'\r\n\r\nimport { Link } from 'react-router-dom'\r\n\r\ninterface ReportHolderProps {\r\n    report: ProductReport\r\n    deleteReport: any\r\n}\r\n\r\nconst ReportHolder: React.FC<ReportHolderProps> = ({\r\n    report,\r\n    deleteReport,\r\n}) => {\r\n    const [removed, setRemoved] = React.useState(false)\r\n\r\n    const date = DateUtils.format(report.date.seconds)\r\n\r\n    const onDelete = () => {\r\n        if (!removed) if (deleteReport()) setRemoved(true)\r\n    }\r\n\r\n    return (\r\n        <TableRow>\r\n            <TableCell component=\"th\" scope=\"row\">\r\n                {date}\r\n            </TableCell>\r\n            <TableCell align=\"right\">\r\n                <Link to={`/product/${report.productId}`}>\r\n                    {report.productName}\r\n                </Link>\r\n            </TableCell>\r\n            <TableCell align=\"right\">{report.reason}</TableCell>\r\n            <TableCell align=\"right\">\r\n                <Link to={`/vendor/${report.userId}`}>\r\n                    {report.userNickname}\r\n                </Link>\r\n            </TableCell>\r\n            <TableCell align=\"right\">\r\n                {!removed && (\r\n                    <IconButton size=\"small\" onClick={onDelete}>\r\n                        <Delete />\r\n                    </IconButton>\r\n                )}\r\n            </TableCell>\r\n        </TableRow>\r\n    )\r\n}\r\n\r\nexport default ReportHolder\r\n","import ReportsPage from './ReportsPage'\r\n\r\nexport default ReportsPage\r\n","import React from 'react'\r\n\r\nimport { RouteComponentProps } from 'react-router'\r\n\r\nimport { useProductReportService, useProductService } from '../../services'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport { useStyles } from './ReportsPage.style'\r\nimport { Product, ProductReport } from '../../types'\r\nimport { ContentWarn, PageContainer } from '../../components'\r\n\r\nimport Typography from '@material-ui/core/Typography'\r\nimport NotesIcon from '@material-ui/icons/Notes'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableHead from '@material-ui/core/TableHead'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport Table from '@material-ui/core/Table'\r\nimport TableContainer from '@material-ui/core/TableContainer'\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport Paper from '@material-ui/core/Paper'\r\n\r\nimport { HttpStatusCode } from '../../utils'\r\nimport ReportHolder from './components'\r\n\r\ninterface ReportsParams {\r\n    id?: string\r\n}\r\n\r\nconst ReportsPage: React.FC<RouteComponentProps<ReportsParams>> = ({\r\n    match,\r\n    history,\r\n}) => {\r\n    const { t } = useTranslation()\r\n\r\n    const { id } = match.params\r\n\r\n    const _id = parseInt(id ?? '')\r\n    const productId = isNaN(_id) ? undefined : _id\r\n\r\n    const reportService = useProductReportService()\r\n    const productService = useProductService()\r\n\r\n    const [product, setProduct] = React.useState<Product>()\r\n\r\n    const classes = useStyles()\r\n\r\n    React.useEffect(() => {\r\n        const fetchProduct = async () => {\r\n            const r = await productService.getProduct(productId!!)\r\n\r\n            switch (r.status) {\r\n                case HttpStatusCode.OK:\r\n                    setProduct(r.data)\r\n                    break\r\n                case HttpStatusCode.NotFound:\r\n                    history.push('/404')\r\n            }\r\n        }\r\n\r\n        if (productId) fetchProduct()\r\n    }, [history, productId, productService])\r\n\r\n    const deleteReport = (id: number) => async () => {\r\n        const r = await reportService.remove(id)\r\n        return r.status === HttpStatusCode.OK\r\n    }\r\n\r\n    const NoReports = () => (\r\n        <ContentWarn>\r\n            <NotesIcon />\r\n            <Typography>{t('reports.empty')}</Typography>\r\n        </ContentWarn>\r\n    )\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <header className={classes.header}>\r\n                <Typography variant=\"h4\" component=\"h1\">\r\n                    {t('reports.title')}\r\n                </Typography>\r\n                {productId && product && (\r\n                    <Typography\r\n                        variant=\"h6\"\r\n                        component=\"h2\"\r\n                        color=\"textSecondary\"\r\n                    >\r\n                        {product.name}\r\n                    </Typography>\r\n                )}\r\n            </header>\r\n            <PageContainer\r\n                request={(page) => reportService.getFor({ page, productId })}\r\n                itemRender={(r: ProductReport, i) => (\r\n                    <ReportHolder\r\n                        key={i}\r\n                        report={r}\r\n                        deleteReport={deleteReport(r.id)}\r\n                    />\r\n                )}\r\n                EmptyComponent={NoReports}\r\n                ContainerComponent={({ children }) => (\r\n                    <TableContainer component={Paper}>\r\n                        <Table>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell>{t('reports.date')}</TableCell>\r\n                                    <TableCell align=\"right\">\r\n                                        {t('reports.product')}\r\n                                    </TableCell>\r\n                                    <TableCell align=\"right\">\r\n                                        {t('reports.reason')}\r\n                                    </TableCell>\r\n                                    <TableCell align=\"right\">\r\n                                        {t('signup.field.nickname')}\r\n                                    </TableCell>\r\n                                    <TableCell align=\"right\"> </TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>{children}</TableBody>\r\n                        </Table>\r\n                    </TableContainer>\r\n                )}\r\n                {...{\r\n                    setShownItems: () => undefined,\r\n                    deps: [],\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ReportsPage\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            margin: theme.spacing(1, 'auto', 2),\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            flexWrap: 'wrap',\r\n        },\r\n        form: {\r\n            margin: 'auto',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            padding: theme.spacing(0, 1, 0, 2),\r\n            '& > h2': {\r\n                marginBottom: theme.spacing(2),\r\n            },\r\n        },\r\n        summary: {\r\n            margin: 'auto',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            width: 200,\r\n            maxHeight: 200,\r\n            '& > *': {\r\n                margin: '6px auto auto auto',\r\n            },\r\n            padding: theme.spacing(2, 0),\r\n        },\r\n        pair: {\r\n            display: 'grid',\r\n            gridTemplateColumns: '1fr 1fr',\r\n        },\r\n        input: {\r\n            margin: theme.spacing(0, 2, 2, 0),\r\n            backgroundColor: theme.palette.background.paper,\r\n            borderRadius: 4,\r\n        },\r\n        header: {\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            margin: theme.spacing(4),\r\n            alignItems: 'center',\r\n            userSelect: 'none',\r\n        },\r\n        title: {\r\n            marginLeft: theme.spacing(1),\r\n        },\r\n        addressesTitle: {\r\n            margin: theme.spacing(0, 0, 1, 2),\r\n        },\r\n        addressButton: {\r\n            margin: theme.spacing(1, 1, 3, 1),\r\n            borderRadius: 4,\r\n            cursor: 'pointer',\r\n        },\r\n        addressContainer: {\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            padding: theme.spacing(0, 0, 0, 2),\r\n            overflowX: 'auto',\r\n            flexWrap: 'nowrap',\r\n        },\r\n        addressHolder: {\r\n            padding: theme.spacing(1),\r\n            width: 180,\r\n            minWidth: 180,\r\n            height: 90,\r\n            overflow: 'hidden',\r\n        },\r\n        endGap: {\r\n            minWidth: theme.spacing(2),\r\n        },\r\n    })\r\n)\r\n","import CheckoutPage from './CheckoutPage'\r\n\r\nexport default CheckoutPage","import React from 'react'\r\n\r\nimport Typography from '@material-ui/core/Typography'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport ButtonBase from '@material-ui/core/ButtonBase'\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport PaymentIcon from '@material-ui/icons/Payment'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\r\n\r\nimport {\r\n    useCartService,\r\n    useSessionService,\r\n    useUserService,\r\n} from '../../services'\r\n\r\nimport { useStyles } from './CheckoutPage.style'\r\n\r\nimport { Redirect, RouteComponentProps } from 'react-router'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport { HttpStatusCode, ValidationTools } from '../../utils'\r\nimport { UserAddress } from '../../types'\r\nimport { InvalidCartDialog } from '../CartPage/components'\r\n\r\nconst CheckoutPage: React.FC<RouteComponentProps> = ({ history, location }) => {\r\n    const cartService = useCartService()\r\n    const userService = useUserService()\r\n    const sessionService = useSessionService()\r\n\r\n    const { t } = useTranslation()\r\n\r\n    const classes = useStyles()\r\n\r\n    const state = location.state as any\r\n\r\n    const [addresses, setAddresses] = React.useState<UserAddress[]>()\r\n\r\n    const [errors, setErrors] = React.useState({})\r\n    const [data, setData] = React.useState<UserAddress>({\r\n        recipient: '',\r\n        code: '',\r\n        city: '',\r\n        region: '',\r\n        country: '',\r\n        address: '',\r\n        phone: '',\r\n    })\r\n\r\n    const [content, setContent] = React.useState<string>()\r\n\r\n    React.useEffect(() => {\r\n        ;(async () => {\r\n            const r = await userService.addresses(\r\n                sessionService.current()?.userId!!\r\n            )\r\n\r\n            if (r.status !== HttpStatusCode.OK) return\r\n            setAddresses(r.data)\r\n        })()\r\n    }, [sessionService, userService])\r\n\r\n    if (!state) return <Redirect to={'/cart'} />\r\n    const { total, size } = state\r\n\r\n    const selectAddress = (i: number) => () => {\r\n        if (addresses) setData(addresses[i])\r\n    }\r\n\r\n    const checkout = async (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const r = await cartService.checkout(data)\r\n        switch (r.status) {\r\n            case HttpStatusCode.BadRequest:\r\n                const err = (r.data as any).error\r\n                if (err === 'invalid') setContent(t('checkout.invalid'))\r\n                else if (err === 'empty') setContent(t('checkout.empty'))\r\n                else setErrors(err)\r\n                return\r\n            case HttpStatusCode.OK:\r\n                break\r\n            default:\r\n                return\r\n        }\r\n\r\n        history.push('/history', { done: r.data.orderId })\r\n        setErrors({})\r\n    }\r\n\r\n    const updateData = (actual: {}) => {\r\n        setData({ ...data, ...actual })\r\n    }\r\n\r\n    const changeData = (field: string) => (e: any) =>\r\n        updateData({ [field]: e.target.value })\r\n\r\n    const { errorFor, helperFor } = ValidationTools.createValidator(t, errors)\r\n\r\n    return (\r\n        <>\r\n            <header className={classes.header}>\r\n                <IconButton onClick={() => history.goBack()}>\r\n                    <ArrowBackIcon />\r\n                </IconButton>\r\n                <Typography\r\n                    className={classes.title}\r\n                    variant=\"h4\"\r\n                    component=\"h1\"\r\n                >\r\n                    {t('checkout.title')}\r\n                </Typography>\r\n            </header>\r\n\r\n            <Typography\r\n                variant=\"h6\"\r\n                component=\"h2\"\r\n                color=\"textSecondary\"\r\n                className={classes.addressesTitle}\r\n            >\r\n                {t(\r\n                    addresses !== undefined\r\n                        ? addresses?.length\r\n                            ? 'checkout.recent_addresses'\r\n                            : 'checkout.no_recent_addresses'\r\n                        : 'checkout.loading_recent_addresses'\r\n                )}\r\n            </Typography>\r\n\r\n            {addresses && addresses.length > 0 && (\r\n                <div className={classes.addressContainer}>\r\n                    {addresses.map((a, i) => (\r\n                        <ButtonBase key={i} className={classes.addressButton}>\r\n                            <Paper\r\n                                variant=\"outlined\"\r\n                                className={classes.addressHolder}\r\n                                onClick={selectAddress(i)}\r\n                            >\r\n                                <Typography variant=\"body2\">\r\n                                    {a.recipient}\r\n                                    {' / '}\r\n                                    {a.address}\r\n                                    {' / '}\r\n                                    {a.city}\r\n                                    {' / '}\r\n                                    {a.region}\r\n                                    {' / '}\r\n                                    {a.country}\r\n                                </Typography>\r\n                            </Paper>\r\n                        </ButtonBase>\r\n                    ))}\r\n                    <div className={classes.endGap} />\r\n                </div>\r\n            )}\r\n\r\n            <form\r\n                id=\"address-form\"\r\n                className={classes.root}\r\n                onSubmitCapture={checkout}\r\n                noValidate\r\n                autoComplete=\"off\"\r\n            >\r\n                <div className={classes.form}>\r\n                    <Typography\r\n                        variant=\"h6\"\r\n                        component=\"h2\"\r\n                        color=\"textSecondary\"\r\n                    >\r\n                        {t('address.address')}\r\n                    </Typography>\r\n                    <TextField\r\n                        className={classes.input}\r\n                        label={t('address.recipient')}\r\n                        variant=\"outlined\"\r\n                        name=\"recipient\"\r\n                        value={data['recipient']}\r\n                        onChange={changeData('recipient')}\r\n                        error={errorFor('recipient')}\r\n                        helperText={helperFor('recipient')}\r\n                        required\r\n                    />\r\n                    <div className={classes.pair}>\r\n                        <TextField\r\n                            className={classes.input}\r\n                            label={t('address.city')}\r\n                            variant=\"outlined\"\r\n                            name=\"city\"\r\n                            value={data['city']}\r\n                            onChange={changeData('city')}\r\n                            error={errorFor('city')}\r\n                            helperText={helperFor('city')}\r\n                            required\r\n                        />\r\n                        <TextField\r\n                            className={classes.input}\r\n                            label={t('address.region')}\r\n                            variant=\"outlined\"\r\n                            name=\"region\"\r\n                            value={data['region']}\r\n                            onChange={changeData('region')}\r\n                            error={errorFor('region')}\r\n                            helperText={helperFor('region')}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className={classes.pair}>\r\n                        <TextField\r\n                            className={classes.input}\r\n                            label={t('address.code')}\r\n                            variant=\"outlined\"\r\n                            name=\"code\"\r\n                            value={data['code']}\r\n                            onChange={changeData('code')}\r\n                            error={errorFor('code')}\r\n                            helperText={helperFor('code')}\r\n                            required\r\n                        />\r\n                        <TextField\r\n                            className={classes.input}\r\n                            label={t('address.country')}\r\n                            variant=\"outlined\"\r\n                            name=\"country\"\r\n                            value={data['country']}\r\n                            onChange={changeData('country')}\r\n                            error={errorFor('country')}\r\n                            helperText={helperFor('country')}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <TextField\r\n                        className={classes.input}\r\n                        label={t('address.address')}\r\n                        variant=\"outlined\"\r\n                        name=\"address\"\r\n                        value={data['address']}\r\n                        onChange={changeData('address')}\r\n                        error={errorFor('address')}\r\n                        helperText={helperFor('address')}\r\n                        required\r\n                    />\r\n                    <TextField\r\n                        className={classes.input}\r\n                        label={t('address.phone')}\r\n                        variant=\"outlined\"\r\n                        name=\"phone\"\r\n                        value={data['phone']}\r\n                        onChange={changeData('phone')}\r\n                        error={errorFor('phone')}\r\n                        helperText={helperFor('phone')}\r\n                        required\r\n                    />\r\n                </div>\r\n                <Paper variant=\"outlined\" className={classes.summary}>\r\n                    <Typography variant=\"h6\" component=\"p\">\r\n                        {t('cart.total')}\r\n                        {`: ${total} `}\r\n                    </Typography>\r\n\r\n                    <Typography\r\n                        variant=\"body1\"\r\n                        component=\"p\"\r\n                        color=\"textSecondary\"\r\n                    >\r\n                        {size} {t(size > 1 ? 'cart.items' : 'cart.item')}\r\n                    </Typography>\r\n\r\n                    <Button\r\n                        id=\"finish-bt\"\r\n                        onClick={undefined}\r\n                        color=\"secondary\"\r\n                        variant=\"contained\"\r\n                        size=\"large\"\r\n                        type=\"submit\"\r\n                        endIcon={<PaymentIcon />}\r\n                    >\r\n                        {t('checkout.finish')}\r\n                    </Button>\r\n                </Paper>\r\n            </form>\r\n\r\n            <InvalidCartDialog {...{ content, setContent }} />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CheckoutPage\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        root: {\r\n            margin: theme.spacing(1),\r\n        },\r\n        header: {\r\n            margin: theme.spacing(4),\r\n        },\r\n        container: {\r\n            width: '100%',\r\n            maxWidth: 1000,\r\n        },\r\n        orderSuccess: {\r\n            padding: theme.spacing(2),\r\n            margin: theme.spacing(2),\r\n        },\r\n    })\r\n)\r\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\r\n\r\nexport const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        id: {\r\n            flexBasis: '17%',\r\n            alignSelf: 'center',\r\n        },\r\n        summary: {\r\n            [theme.breakpoints.down('xs')]: {\r\n                padding: theme.spacing(1),\r\n            },\r\n        },\r\n        heading: {\r\n            flexBasis: '33.33%',\r\n            flexShrink: 0,\r\n        },\r\n        secondaryHeading: {\r\n            color: theme.palette.text.secondary,\r\n            flexBasis: '33.33%',\r\n        },\r\n        container: {\r\n            width: '100%',\r\n            padding: 0,\r\n        },\r\n        product: {\r\n            display: 'flex',\r\n            padding: 0,\r\n            maxHeight: 200,\r\n            [theme.breakpoints.down(500)]: {\r\n                maxHeight: 400,\r\n                display: 'grid',\r\n                justifyContent: 'center',\r\n                justifyItems: 'center',\r\n                '& > div': {\r\n                    margin: theme.spacing(1),\r\n                },\r\n            },\r\n        },\r\n        imageContainer: {\r\n            margin: theme.spacing(1, 1, 1, 0),\r\n            alignSelf: 'center',\r\n            minWidth: 200,\r\n            maxWidth: 200,\r\n            display: 'flex',\r\n            '& img': {\r\n                maxWidth: 190,\r\n                maxHeight: 140,\r\n                display: 'block',\r\n                borderRadius: 4,\r\n            },\r\n        },\r\n        image: {\r\n            margin: 'auto',\r\n            backgroundColor: theme.palette.grey[100],\r\n            '& > button': {\r\n                borderRadius: 4,\r\n            },\r\n        },\r\n        data: {\r\n            maxHeight: 200,\r\n            display: 'flex',\r\n            width: '100%',\r\n            flexWrap: 'wrap',\r\n            '& > *': {\r\n                margin: theme.spacing(1, 0),\r\n            },\r\n        },\r\n        title: {\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            alignItems: 'baseline',\r\n            cursor: 'pointer',\r\n            '& > span': {\r\n                marginRight: theme.spacing(0.5),\r\n            },\r\n            marginRight: theme.spacing(1),\r\n        },\r\n        price: {\r\n            marginLeft: 'auto',\r\n        },\r\n        address: {\r\n            display: 'flex',\r\n            flexWrap: 'wrap',\r\n            marginBottom: theme.spacing(2),\r\n        },\r\n        addressValues: {\r\n            display: 'flex',\r\n            flexDirection: 'row',\r\n            flexBasis: '40%',\r\n            margin: theme.spacing(0.25, 1),\r\n            '& > span': {\r\n                marginRight: 4,\r\n            },\r\n        },\r\n    })\r\n)\r\n","import React from 'react'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport { useStyles } from './OrderHolder.style'\r\nimport { Order, OrderedProduct } from '../../../../types'\r\nimport { ProductImg } from '../../../../components'\r\n\r\nimport Accordion from '@material-ui/core/Accordion'\r\nimport AccordionDetails from '@material-ui/core/AccordionDetails'\r\nimport AccordionSummary from '@material-ui/core/AccordionSummary'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Rating from '@material-ui/lab/Rating'\r\nimport ButtonBase from '@material-ui/core/ButtonBase'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\n\r\nimport { DateUtils } from '../../../../utils'\r\nimport { ResourceService } from '../../../../api'\r\nimport { useProductService } from '../../../../services'\r\n\r\ninterface OrderHolderProps {\r\n    order: Order\r\n    resources: ResourceService\r\n    history: any\r\n}\r\n\r\nconst OrderHolder: React.FC<OrderHolderProps> = ({\r\n    order: o,\r\n    resources,\r\n    history,\r\n}) => {\r\n    const classes = useStyles()\r\n\r\n    const { t } = useTranslation()\r\n\r\n    const [expanded, setExpanded] = React.useState(false)\r\n\r\n    const handleChange = (e: any, isExpanded: boolean) =>\r\n        setExpanded(isExpanded)\r\n\r\n    const gotoProduct = (id: number) => () =>\r\n        history.push(`/product/${id}`, undefined)\r\n\r\n    const round = (n: number) => Math.round(n * 100) / 100\r\n\r\n    const total = round(\r\n        o.items.reduce<number>((v, p) => (v += p.amount * p.unitPrice), 0)\r\n    )\r\n\r\n    return (\r\n        <Accordion\r\n            className=\"order-holder\"\r\n            expanded={expanded}\r\n            onChange={handleChange}\r\n        >\r\n            <AccordionSummary\r\n                expandIcon={<ExpandMoreIcon className=\"accordion-expander\" />}\r\n                className={classes.summary}\r\n            >\r\n                <Typography variant=\"body2\" className={classes.id}>\r\n                    #{o.id}\r\n                </Typography>\r\n                <Typography className={classes.heading}>\r\n                    {DateUtils.format(o.date.seconds)}\r\n                </Typography>\r\n                <Typography className={classes.secondaryHeading}>\r\n                    {o.items.length}{' '}\r\n                    {t(o.items.length > 1 ? 'cart.items' : 'cart.item')}\r\n                </Typography>\r\n                <Typography className={classes.secondaryHeading}>\r\n                    {total} {''}\r\n                </Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n                <List className={classes.container}>\r\n                    <Typography variant=\"h6\" color=\"textSecondary\">\r\n                        {t('address.address')}\r\n                    </Typography>\r\n                    <div className={classes.address}>\r\n                        {Object.entries(o.address).map(([k, v], i) =>\r\n                            i ? (\r\n                                <div key={i} className={classes.addressValues}>\r\n                                    <Typography\r\n                                        component=\"span\"\r\n                                        color=\"textSecondary\"\r\n                                    >\r\n                                        {t(`address.${k}`)}:\r\n                                    </Typography>\r\n                                    <Typography>{v}</Typography>\r\n                                </div>\r\n                            ) : (\r\n                                <div key={i}></div>\r\n                            )\r\n                        )}\r\n                    </div>\r\n                    {o.items.map((p, i) => (\r\n                        <OrderedProductHolder\r\n                            key={i}\r\n                            {...{ resources, product: p, gotoProduct }}\r\n                        />\r\n                    ))}\r\n                </List>\r\n            </AccordionDetails>\r\n        </Accordion>\r\n    )\r\n}\r\n\r\ninterface OrderedProductHolderProps {\r\n    product: OrderedProduct\r\n    resources: ResourceService\r\n    gotoProduct: any\r\n}\r\n\r\nconst OrderedProductHolder: React.FC<OrderedProductHolderProps> = ({\r\n    product: p,\r\n    resources,\r\n    gotoProduct,\r\n}) => {\r\n    const productService = useProductService()\r\n\r\n    const classes = useStyles()\r\n\r\n    const [rating, setRating] = React.useState<number | null>(\r\n        p.userRating ?? null\r\n    )\r\n\r\n    const id = p.product.id\r\n\r\n    const handleRating = (e: any, v: number | null) => {\r\n        if (v == null) return\r\n        setRating(v)\r\n        productService.rateProduct(id, v)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Divider />\r\n            <ListItem className={classes.product}>\r\n                <div className={classes.imageContainer}>\r\n                    <Paper className={classes.image}>\r\n                        <ButtonBase onClick={gotoProduct(p.product.id)}>\r\n                            <ProductImg\r\n                                url={p.product.mainImage}\r\n                                resources={resources}\r\n                            />\r\n                        </ButtonBase>\r\n                    </Paper>\r\n                </div>\r\n                <div className={classes.data}>\r\n                    <div className={classes.title}>\r\n                        <Typography\r\n                            variant=\"body2\"\r\n                            component=\"span\"\r\n                            color=\"textSecondary\"\r\n                        >\r\n                            {'x'}\r\n                            {p.amount}\r\n                        </Typography>\r\n                        <Typography onClick={gotoProduct(p.product.id)}>\r\n                            {p.product.name}\r\n                        </Typography>\r\n                    </div>\r\n                    <Rating\r\n                        className=\"rater\"\r\n                        name={`product-rating-${id}`}\r\n                        precision={0.5}\r\n                        value={rating}\r\n                        onChange={handleRating}\r\n                    />\r\n                    <Typography className={classes.price}>\r\n                        {p.amount * p.unitPrice} {''}\r\n                    </Typography>\r\n                </div>\r\n            </ListItem>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OrderHolder\r\n","import OrderHolder from './OrderHolder'\r\n\r\nexport default OrderHolder\r\n","import OrderHistoryPage from './OrderHistoryPage'\r\n\r\nexport default OrderHistoryPage\r\n","import React from 'react'\r\n\r\nimport { Redirect, RouteComponentProps } from 'react-router'\r\n\r\nimport {\r\n    useOrdersService,\r\n    useUserService,\r\n    useSessionService,\r\n    useResourceService,\r\n} from '../../services'\r\n\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport { useStyles } from './OrderHistoryPage.style'\r\nimport { Order, User } from '../../types'\r\nimport { ContentWarn, PageContainer } from '../../components'\r\n\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Alert from '@material-ui/lab/Alert'\r\nimport HistoryIcon from '@material-ui/icons/History'\r\n\r\nimport { HttpStatusCode } from '../../utils'\r\nimport OrderHolder from './components'\r\n\r\ninterface OrderHistoryPageParams {\r\n    id?: string\r\n}\r\n\r\nconst OrderHistoryPage: React.FC<\r\n    RouteComponentProps<OrderHistoryPageParams>\r\n> = ({ match, history, location }) => {\r\n    const { t } = useTranslation()\r\n\r\n    const { id } = match.params\r\n\r\n    const state = location.state as any\r\n    const completedOrder = state?.done\r\n\r\n    const orderService = useOrdersService()\r\n    const userService = useUserService()\r\n    const sessionService = useSessionService()\r\n    const resources = useResourceService()\r\n\r\n    const session = sessionService.current()\r\n\r\n    const _id = parseInt(id ?? '')\r\n    const userId = isNaN(_id) || !session?.admin ? undefined : _id\r\n\r\n    const [user, setUser] = React.useState<User>()\r\n\r\n    const classes = useStyles()\r\n\r\n    React.useEffect(() => {\r\n        const fetchUser = async () => {\r\n            const r = await userService.getUser(userId!!)\r\n\r\n            switch (r.status) {\r\n                case HttpStatusCode.OK:\r\n                    setUser(r.data)\r\n                    break\r\n                case HttpStatusCode.NotFound:\r\n                    history.push('/404')\r\n            }\r\n        }\r\n\r\n        if (userId) fetchUser()\r\n    }, [history, userId, userService])\r\n\r\n    const NoHistory = () => (\r\n        <ContentWarn>\r\n            <HistoryIcon />\r\n            <Typography>{t('orders.empty')}</Typography>\r\n        </ContentWarn>\r\n    )\r\n\r\n    if (id && !session?.admin) return <Redirect to={'/history'} />\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <header className={classes.header}>\r\n                <Typography variant=\"h4\" component=\"h1\">\r\n                    {t('orders.title')}\r\n                </Typography>\r\n                {userId && user && (\r\n                    <Typography\r\n                        variant=\"h6\"\r\n                        component=\"h2\"\r\n                        color=\"textSecondary\"\r\n                    >\r\n                        {user.nickname}\r\n                    </Typography>\r\n                )}\r\n            </header>\r\n\r\n            {completedOrder !== undefined && (\r\n                <Alert severity=\"success\" className={classes.orderSuccess}>\r\n                    {t('checkout.success').replace('{0}', completedOrder)}\r\n                </Alert>\r\n            )}\r\n\r\n            <PageContainer\r\n                request={(page) => orderService.getForUser({ page, userId })}\r\n                itemRender={(order: Order) => (\r\n                    <OrderHolder\r\n                        key={order.id}\r\n                        {...{ order, resources, history }}\r\n                    />\r\n                )}\r\n                EmptyComponent={NoHistory}\r\n                ContainerComponent={({ children }) => (\r\n                    <div className={classes.container}>{children}</div>\r\n                )}\r\n                {...{\r\n                    setShownItems: () => undefined,\r\n                    deps: [],\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OrderHistoryPage\r\n","import React from 'react'\r\n\r\nimport { Redirect, Route, Switch } from 'react-router'\r\nimport { ErrorWrapperClass, NavigationBarWrapper } from '../components'\r\n\r\nimport { NavRoute } from '../routes'\r\nimport { SessionService } from '../services'\r\n\r\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles'\r\nimport { ServerErrorHandlerListener } from '../utils'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n        base: {\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            position: 'relative',\r\n            overflow: 'hidden',\r\n            minHeight: '100vh',\r\n            backgroundColor: theme.palette.background.default,\r\n        },\r\n    })\r\n)\r\n\r\ninterface RouteCheckProps {\r\n    props: any\r\n    route: NavRoute\r\n    sessionService: SessionService\r\n}\r\n\r\nconst CheckRedirect: React.FC<any> = ({ props, path }) => {\r\n    return (\r\n        <Redirect\r\n            to={{\r\n                pathname: path,\r\n                state: {\r\n                    from: props.location,\r\n                },\r\n            }}\r\n        />\r\n    )\r\n}\r\n\r\nconst RouteCheck: React.FC<RouteCheckProps> = ({\r\n    props,\r\n    route,\r\n    sessionService,\r\n}) => {\r\n    const { t } = useTranslation()\r\n\r\n    const RouteComponent = route.component\r\n    const admin = route.admin\r\n    const identified = route.identified || admin\r\n\r\n    const auth = sessionService.isAuth()\r\n    const logged = sessionService.isLogged()\r\n\r\n    if (!auth) {\r\n        sessionService\r\n            .auth()\r\n            .then(() =>\r\n                props.history.push(\r\n                    props.location.pathname,\r\n                    props.location.state\r\n                )\r\n            )\r\n        return <></>\r\n    }\r\n\r\n    if (admin && !sessionService.current()?.admin)\r\n        return <CheckRedirect path=\"/404\" {...{ props }} />\r\n\r\n    if (identified === true && !logged)\r\n        return <CheckRedirect path=\"/login\" {...{ props }} />\r\n\r\n    document.title = t('routes.base') + t('routes.' + route.id)\r\n\r\n    return <RouteComponent {...props} />\r\n}\r\n\r\ninterface BaseLayoutProps {\r\n    serverErrorHandler: ServerErrorHandlerListener\r\n    sessionService: SessionService\r\n    routes: NavRoute[]\r\n}\r\n\r\nconst BaseLayout: React.FC<BaseLayoutProps> = ({\r\n    sessionService,\r\n    serverErrorHandler,\r\n    routes,\r\n}) => {\r\n    const classes = useStyles()\r\n\r\n    return (\r\n        <div className={classes.base}>\r\n            <NavigationBarWrapper sessionService={sessionService} />\r\n\r\n            <Switch>\r\n                {routes.map((route) => (\r\n                    <Route\r\n                        key={route.id}\r\n                        path={route.path}\r\n                        render={(props) => (\r\n                            <RouteCheck\r\n                                {...{\r\n                                    props,\r\n                                    route,\r\n                                    sessionService,\r\n                                }}\r\n                            />\r\n                        )}\r\n                        exact\r\n                    />\r\n                ))}\r\n                <Redirect to=\"/404\" />\r\n            </Switch>\r\n\r\n            <ErrorWrapperClass serverErrorHandler={serverErrorHandler} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BaseLayout\r\n","import React from 'react'\r\n\r\nimport { BrowserRouter as Router } from 'react-router-dom'\r\n\r\nimport {\r\n    Login,\r\n    Logout,\r\n    Signup,\r\n    Home,\r\n    ProductPage,\r\n    ProductEdit,\r\n    PageNotFound,\r\n    Search,\r\n    Favorites,\r\n    CartPage,\r\n    VendorProfile,\r\n    ReportsPage,\r\n    CheckoutPage,\r\n    OrderHistoryPage,\r\n} from './containers'\r\n\r\nimport { BaseLayout } from './layout'\r\nimport { useSessionService } from './services'\r\nimport { useServerErrorHandler } from './utils'\r\n\r\nexport interface NavRoute {\r\n    id: string\r\n    path: string\r\n    component: React.FC<any>\r\n    identified?: boolean\r\n    admin?: boolean\r\n}\r\n\r\nconst routes: NavRoute[] = [\r\n    {\r\n        id: 'home',\r\n        path: '/',\r\n        component: Home,\r\n    },\r\n    {\r\n        id: 'search',\r\n        path: '/search/:query',\r\n        component: Search,\r\n    },\r\n    {\r\n        id: 'vendor',\r\n        path: '/vendor/:id',\r\n        component: VendorProfile,\r\n    },\r\n    {\r\n        id: 'cart',\r\n        path: '/cart',\r\n        component: CartPage,\r\n    },\r\n    {\r\n        id: 'product_publish',\r\n        path: '/product/publish',\r\n        component: ProductEdit,\r\n        identified: true,\r\n    },\r\n    {\r\n        id: 'product',\r\n        path: '/product/:id',\r\n        component: ProductPage,\r\n    },\r\n    {\r\n        id: 'product_edit',\r\n        path: '/product/:id/edit',\r\n        component: ProductEdit,\r\n        identified: true,\r\n    },\r\n    {\r\n        id: 'login',\r\n        path: '/login',\r\n        component: Login,\r\n    },\r\n    {\r\n        id: 'logout',\r\n        path: '/logout',\r\n        component: Logout,\r\n        identified: true,\r\n    },\r\n    {\r\n        id: 'signup',\r\n        path: '/signup',\r\n        component: Signup,\r\n    },\r\n    {\r\n        id: 'profile',\r\n        path: '/profile',\r\n        component: VendorProfile,\r\n        identified: true,\r\n    },\r\n    {\r\n        id: 'profile_edit',\r\n        path: '/profile/edit/:id?',\r\n        component: Signup,\r\n        identified: true,\r\n    },\r\n    {\r\n        id: 'favorites',\r\n        path: '/favorites',\r\n        component: Favorites,\r\n        identified: true,\r\n    },\r\n    {\r\n        id: 'reports',\r\n        path: '/reports/:id?',\r\n        component: ReportsPage,\r\n        admin: true,\r\n    },\r\n    {\r\n        id: 'checkout',\r\n        path: '/checkout',\r\n        component: CheckoutPage,\r\n        identified: true,\r\n    },\r\n    {\r\n        id: 'history',\r\n        path: '/history/:id?',\r\n        component: OrderHistoryPage,\r\n        identified: true,\r\n    },\r\n    {\r\n        id: '404',\r\n        path: '/404',\r\n        component: PageNotFound,\r\n    },\r\n]\r\n\r\nconst Routes = () => {\r\n    const sessionService = useSessionService()\r\n    const serverErrorHandler = useServerErrorHandler()\r\n\r\n    return (\r\n        <Router>\r\n            <BaseLayout\r\n                serverErrorHandler={serverErrorHandler}\r\n                sessionService={sessionService}\r\n                routes={routes}\r\n            />\r\n        </Router>\r\n    )\r\n}\r\n\r\nexport default Routes\r\n","import { createMuiTheme } from '@material-ui/core/styles'\r\n\r\nimport blue from '@material-ui/core/colors/blue'\r\nimport orange from '@material-ui/core/colors/orange'\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        type: 'light',\r\n        primary: {\r\n            light: blue[200],\r\n            main: blue[600],\r\n            dark: blue[900],\r\n        },\r\n        secondary: {\r\n            light: orange['A100'],\r\n            main: orange['A200'],\r\n            dark: orange['A700'],\r\n        },\r\n    },\r\n})\r\n\r\nexport { theme }\r\n","import React from 'react'\r\n\r\nimport Routes from './routes'\r\n\r\nimport ThemeProvider from '@material-ui/styles/ThemeProvider'\r\n\r\nimport { theme } from './themeConfig'\r\n\r\nconst App = () => {\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            <Routes />\r\n        </ThemeProvider>\r\n    )\r\n}\r\n\r\nexport default App\r\n","import { ReportHandler } from 'web-vitals'\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n    if (onPerfEntry && onPerfEntry instanceof Function) {\r\n        import('web-vitals').then(\r\n            ({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n                getCLS(onPerfEntry)\r\n                getFID(onPerfEntry)\r\n                getFCP(onPerfEntry)\r\n                getLCP(onPerfEntry)\r\n                getTTFB(onPerfEntry)\r\n            }\r\n        )\r\n    }\r\n}\r\n\r\nexport default reportWebVitals\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './i18n'\r\nimport App from './App'\r\nimport reportWebVitals from './reportWebVitals'\r\n\r\nimport './index.css'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n\r\nreportWebVitals(/*console.log*/)\r\n"],"sourceRoot":""}